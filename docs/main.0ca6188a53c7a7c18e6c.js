(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=Object(r.e)(h.value,2),f=d[1];u===this.normalizeInstanceIdentifier(d[0])&&f.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return c},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("/6Yf"),o=n("qOnz"),s=n("mrSG"),a=n("q/0M"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new a.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.F)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},m=null,v=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=a.a.VERBOSE,m=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,d.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===m&&!0===d.get("logging_enabled")&&b(!0)),m){var n=y.apply(null,t);m(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(s.f)([t],Object(s.e)(e)))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));throw f.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===T||e===I)return-1;if(e===T||t===I)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},A=function(t,e){return t===e?0:t<e?-1:1},j=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},k=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=k(t[e[i]]);return r+"}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var R=function(t){var e,n,r,i,s;Object(o.d)(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){throw E("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';E(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),U=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),q=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,B="websocket",H="long_polling",Q=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function z(t,e,n){var r;if(Object(o.d)("string"==typeof e,"typeof type must == string"),Object(o.d)("object"==typeof n,"typeof params must == object"),e===B)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==H)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return P(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var G=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),W={},K={};function $(t){var e=t.toString();return W[e]||(W[e]=new G),W[e]}var Y=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&L(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),X="start",J="close",Z=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=$(e),this.urlFn=function(t){return z(e,H,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Y(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new tt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===X)n.id=o,n.password=a;else{if(i!==J)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=N(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),tt=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),et="";function nt(t){et=t}var rt=null;"undefined"!=typeof MozWebSocket?rt=MozWebSocket:"undefined"!=typeof WebSocket&&(rt=WebSocket);var it=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=$(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),z(t,B,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+et+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new rt(this.connURL,[],r)}else this.mySock=new rt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==rt&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ot=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Z,it]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=it&&it.isAvailable(),o=i&&!it.previouslyFailed();if(e.webSocketOnly&&(i||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[it];else{var a=this.transports_=[];try{for(var u=Object(s.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),st=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new ot(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=j("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),at=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ut=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(s.f)([],Object(s.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ct=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ut),lt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ht(){return new lt("")}function dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ft(t){return t.pieces_.length-t.pieceNum_}function pt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function gt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yt(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function mt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function vt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof lt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new lt(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=dt(t),r=dt(e);if(null===n)return e;if(n===r)return wt(pt(t),pt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ct(t,e){for(var n=mt(t,0),r=mt(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ot(t,e){if(ft(t)!==ft(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Et(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ft(t)>ft(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var St=function(){return function(t,e){this.errorPrefix_=e,this.parts_=mt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);Tt(this)}}();function Tt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+It(t))}function It(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var xt,At,jt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ut),kt=1e3,Nt=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=kt,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),jt.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ct.getInstance().on("online",l.onOnline_,l),l}return Object(s.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=kt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new st(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){E(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&E(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return k(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new lt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(s.g)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,Object(s.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+et.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ct.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(at),Pt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Rt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Pt(T,t),r=new Pt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Pt.MIN},t}(),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return xt},set:function(t){xt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(I,xt)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Pt(t,xt)},e.prototype.toString=function(){return".key"},e}(Rt),Mt=new Dt,Lt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Ut.EMPTY_NODE,this.right=null!=o?o:Ut.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ut.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ut.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Vt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ft(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ut=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Lt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Lt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Vt,t}();function qt(t,e){return x(t.name,e.name)}function Bt(t,e){return x(t,e)}var Ht,Qt,zt,Gt,Wt,Kt=function(t){return"number"==typeof t?"number:"+R(t):"string:"+t},$t=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===At||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===At||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$t(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ht},set:function(t){Ht=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===dt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=dt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===ft(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Kt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?R(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Xt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return new Pt(I,new Yt("[PRIORITY-POST]",zt))},e.prototype.makePost=function(t,e){var n=Qt(t);return new Pt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Rt)),Jt=Math.log(2),Zt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Jt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ft(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ft.BLACK):(a(h,Ft.BLACK),a(h,Ft.RED))}return o}(new Zt(t.length));return new Ut(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(ee&&Xt,"ChildrenNode.ts has not been loaded"),Gt=Gt||new t({".priority":ee},{".priority":Xt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ut?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Pt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?te(i,e.getCompare()):ee;var l=e.toString(),h=Object(s.a)({},this.indexSet_);h[l]=e;var d=Object(s.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Pt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Pt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Pt(e.name,r)):t}),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&$t(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Wt||(Wt=new t(new Ut(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Wt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Wt:e},t.prototype.getChild=function(t){var e=dt(t);return null===e?this:this.getImmediateChild(e).getChild(pt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Pt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Wt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=dt(t);if(null===n)return e;Object(o.d)(".priority"!==dt(t)||1===ft(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Xt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Kt(this.getPriority().val())+":"),this.forEachChild(Xt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Pt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Pt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Mt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Mt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Xt),r=e.getIterator(Xt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Mt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Ut(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(s.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return P(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=oe(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(oe(e))}var r=[],i=!1;if(P(t,function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Pt(t,n)))}}),0===r.length)return re.EMPTY_NODE;var s=te(r,qt,function(t){return t.name},Bt);if(i){var a=te(r,Xt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Xt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(Pt,{MIN:{value:new Pt(T,re.EMPTY_NODE)},MAX:{value:new Pt(I,ie)}}),Dt.__EMPTY_NODE=re.EMPTY_NODE,Yt.__childrenNodeConstructor=re,At=ie,zt=ie,Qt=oe;var se,ae,ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!_t(e)&&".priority"!==dt(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(s.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new Pt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new Pt(I,t)},e.prototype.toString=function(){return mt(this.indexPath_,0).join("/")},e}(Rt),ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Pt.MIN},e.prototype.maxPost=function(){return Pt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new Pt(e,n)},e.prototype.toString=function(){return".value"},e}(Rt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=le.charAt(ae[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),de=function(t){if("2147483647"===t)return"-";var e=M(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return T;var e=M(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ye(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function me(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ye(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(me(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Xt,function(t,r){e.hasChild(t)||n.trackChildChange(ye(t,r))}),e.isLeafNode()||e.forEachChild(Xt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Pt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Xt,function(t,e){i.matches(new Pt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Pt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new Pt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(me(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ye(e,d));var g=u.updateImmediateChild(e,re.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(ge(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ye(l.name,l.node)),i.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Xt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ce(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Oe(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Ee(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Se(t,e,n){var r;return t.index_===Mt?("string"==typeof e&&(e=de(e)),r=Ee(t,e,n)):r=Ee(t,e,null==n?I:de(n)),r.startAfterSet_=!0,r}function Te(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ie(t,e,n){var r;return t.index_===Mt?("string"==typeof e&&(e=fe(e)),r=Te(t,e,n)):r=Te(t,e,null==n?T:fe(n)),r.endBeforeSet_=!0,r}function xe(t,e){var n=t.copy();return n.index_=e,n}function Ae(t){var e,n={};return t.isDefault()||(t.index_===Xt?e="$priority":t.index_===ce?e="$value":t.index_===Mt?e="$key":(Object(o.d)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.G)(e),t.startSet_&&(n.startAt=Object(o.G)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.G)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.G)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.G)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var je=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(s.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Ae(t.getQueryParams());this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ae(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){E("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&E("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(at),ke=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ne(){return{value:null,children:new Map}}function Pe(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=dt(e);t.children.has(r)||t.children.set(r,Ne()),Pe(t.children.get(r),e=pt(e),n)}}function Re(t,e){if(_t(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Xt,function(e,n){Pe(t,new lt(e),n)}),Re(t,e)}if(t.children.size>0){var r=dt(e);return e=pt(e),t.children.has(r)&&Re(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function De(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){De(r,new lt(e.toString()+"/"+t),n)})}var Me=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(s.a)({},t);return this.last_&&P(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Le=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Me(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ve(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ue,qe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Fe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lt(e));return new t(ht(),n,this.revert)}return Object(o.d)(dt(this.path)===e,"operationForChild called for unrelated child."),new t(pt(this.path),this.affectedTree,this.revert)},t}(),Be=function(){function t(t,e){this.source=t,this.path=e,this.type=Fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ht()):new t(this.source,pt(this.path))},t}(),He=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Fe.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,ht(),this.snap.getImmediateChild(e)):new t(this.source,pt(this.path),this.snap)},t}(),Qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Fe.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new lt(e));return n.isEmpty()?null:n.value?new He(this.source,ht(),n.value):new t(this.source,ht(),n)}return Object(o.d)(dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,pt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ze=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=dt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ge=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function We(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new Pt(e.childName,e.snapshotNode),i=new Pt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function Ke(t,e){return{eventCache:t,serverCache:e}}function $e(t,e,n,r){return Ke(new ze(e,n,r),t.serverCache)}function Ye(t,e,n,r){return Ke(t.eventCache,new ze(e,n,r))}function Xe(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Je(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ze=function(){function t(t,e){void 0===e&&(Ue||(Ue=new Ut(A)),e=Ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return P(e,function(t,e){n=n.set(new lt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ht(),value:this.value};if(_t(t))return null;var n=dt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pt(t),e);return null!=i?{path:bt(new lt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(_t(e))return this;var n=dt(e),r=this.children.get(n);return null!==r?r.subtree(pt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=dt(e),i=(this.children.get(r)||new t(null)).set(pt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=dt(e),r=this.children.get(n);if(r){var i=r.remove(pt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=dt(t),n=this.children.get(e);return n?n.get(pt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=dt(e),o=(this.children.get(i)||new t(null)).setTree(pt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ht(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ht(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=dt(t),o=this.children.get(i);return o?o.findOnPath_(pt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ht(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=dt(e),o=this.children.get(i);return o?o.foreachOnPath_(pt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ht(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),tn=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ze(null))},t}();function en(t,e,n){if(_t(e))return new tn(new Ze(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new tn(t.writeTree_.set(i,o))}var a=new Ze(n),u=t.writeTree_.setTree(e,a);return new tn(u)}function nn(t,e,n){var r=t;return P(n,function(t,n){r=en(r,bt(e,t),n)}),r}function rn(t,e){if(_t(e))return tn.empty();var n=t.writeTree_.setTree(e,new Ze(null));return new tn(n)}function on(t,e){return null!=sn(t,e)}function sn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function an(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Xt,function(t,n){e.push(new Pt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Pt(t,n.value))}),e}function un(t,e){if(_t(e))return t;var n=sn(t,e);return new tn(null!=n?new Ze(n):t.writeTree_.subtree(e))}function cn(t){return t.writeTree_.isEmpty()}function ln(t,e){return hn(ht(),t.writeTree_,e)}function hn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=hn(bt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function dn(t,e){return On(e,t)}function fn(t,e){if(t.snap)return Et(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Et(bt(t.path,n),e))return!0;return!1}function pn(t){return t.visible}function gn(t,e,n){for(var r=tn.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Et(n,a)?r=en(r,u=wt(n,a),s.snap):Et(a,n)&&(u=wt(a,n),r=en(r,ht(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(Et(n,a))r=nn(r,u=wt(n,a),s.children);else if(Et(a,n))if(_t(u=wt(a,n)))r=nn(r,ht(),s.children);else{var c=Object(o.D)(s.children,dt(u));if(c){var l=c.getChild(pt(u));r=en(r,ht(),l)}}}}}return r}function yn(t,e,n,r,i){if(r||i){var o=un(t.visibleWrites,e);return!i&&cn(o)?n:i||null!=n||on(o,ht())?ln(gn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Et(t.path,e)||Et(e,t.path))},e),n||re.EMPTY_NODE):null}var s=sn(t.visibleWrites,e);if(null!=s)return s;var a=un(t.visibleWrites,e);return cn(a)?n:null!=n||on(a,ht())?ln(a,n||re.EMPTY_NODE):null}function mn(t,e,n,r){return yn(t.writeTree,t.treePath,e,n,r)}function vn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=sn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=un(t.visibleWrites,e);return n.forEachChild(Xt,function(t,e){var n=ln(un(o,new lt(t)),e);r=r.updateImmediateChild(t,n)}),an(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return an(un(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function bn(t,e,n,r){return function(t,e,n,r,i){Object(o.d)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(on(t.visibleWrites,s))return null;var a=un(t.visibleWrites,s);return cn(a)?i.getChild(n):ln(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function _n(t,e){return function(t,e){return sn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function wn(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=sn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?ln(un(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function Cn(t,e){return On(bt(t.treePath,e),t.writeTree)}function On(t,e){return{treePath:t,writeTree:e}}var En=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,me(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Sn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Tn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ze(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Je(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=un(t.visibleWrites,e),c=sn(u,ht());if(null!=c)a=c;else{if(null==n)return[];a=ln(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function In(t,e,n,r,i,s){var a=e.eventCache;if(null!=_n(r,n))return e;var u=void 0,c=void 0;if(_t(n))if(Object(o.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Je(e),h=vn(r,l instanceof re?l:re.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=mn(r,Je(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=dt(n);if(".priority"===f){Object(o.d)(1===ft(n),"Can't have a priority with additional path components");var p=a.getNode(),g=bn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var y=pt(n),m=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=bn(r,n,a.getNode(),c);m=null!=v?a.getNode().getImmediateChild(f).updateChild(y,v):a.getNode().getImmediateChild(f)}else m=wn(r,f,e.serverCache);u=null!=m?t.filter.updateChild(a.getNode(),f,m,y,i,s):a.getNode()}}return $e(e,u,a.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function xn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=dt(n);if(!c.isCompleteForPath(n)&&ft(n)>1)return e;var f=pt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,Sn,null)}var g=Ye(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return In(t,g,n,i,new Tn(i,g,o),a)}function An(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Tn(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=$e(e,u,!0,t.filter.filtersNodes());else{var h=dt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=$e(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=pt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(_t(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===gt(d)&&g.getChild(vt(d)).isEmpty()?g:g.updateChild(d,r):re.EMPTY_NODE}a=f.equals(p)?e:$e(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function jn(t,e){return t.eventCache.isCompleteForChild(e)}function kn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Nn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Ze(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=xn(t,c,new lt(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=xn(t,c,new lt(n),h,i,o,s,a)}}),c}var Pn,Rn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new _e(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new ze(u,s.isFullyInitialized(),i.filtersNodes()),h=new ze(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ke(h,l),this.eventGenerator_=new Ge(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Dn(t,e){var n=Je(t.viewCache_);return n&&(t.query.getQueryParams().loadsAllData()||!_t(e)&&!n.getImmediateChild(dt(e)).isEmpty())?n.getChild(e):null}function Mn(t){return 0===t.eventRegistrations_.length}function Ln(t,e,n){var r=[];if(n){Object(o.d)(null==e,"A cancel should cancel all event registrations.");var i=t.query.path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Fn(t,e,n,r){e.type===Fe.MERGE&&null!==e.source.queryId&&(Object(o.d)(Je(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.d)(Xe(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new En;if(n.type===Fe.OVERWRITE){var c=n;c.source.fromUser?s=An(t,e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),s=xn(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Fe.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);jn(e,dt(c))&&(a=An(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);jn(e,dt(c))||(a=An(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Nn(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Fe.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=_n(r,n))return e;var u=new Tn(r,e,i),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===dt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=mn(r,Je(e));else{var d=e.serverCache.getNode();Object(o.d)(d instanceof re,"serverChildren would be complete if leaf node"),h=vn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=dt(n),p=wn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,pt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,re.EMPTY_NODE,pt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=mn(r,Je(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=_n(r,ht()),$e(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=_n(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return xn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(_t(n)){var c=new Ze(null);return u.getNode().forEachChild(Mt,function(t,e){c=c.set(new lt(t),e)}),Nn(t,e,n,c,i,o,a,s)}return e}var l=new Ze(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Nn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Fe.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return In(t,Ye(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,Sn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Xe(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe(Xe(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.d)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.d)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.d)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Vn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Vn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),We(t,i,"child_removed",e,r,n),We(t,i,"child_added",e,r,n),We(t,i,"child_moved",o,r,n),We(t,i,"child_changed",e,r,n),We(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Un=function(){return function(){this.views=new Map}}();function qn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.d)(null!=c,"SyncTree gave us an op for an invalid query."),Fn(c,e,n,r)}var l=[];try{for(var h=Object(s.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Fn(c=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Bn(t,e,n,r,i){var o=e.queryIdentifier(),s=t.views.get(o);if(!s){var a=mn(n,i?r:null),u=!1;a?u=!0:r instanceof re?(a=vn(n,r),u=!1):(a=re.EMPTY_NODE,u=!1);var c=Ke(new ze(a,u,!1),new ze(r,i,!1));return new Rn(e,c)}return s}function Hn(t){var e,n,r=[];try{for(var i=Object(s.g)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query.getQueryParams().loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Qn(t,e){var n,r,i=null;try{for(var o=Object(s.g)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Dn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function zn(t,e){if(e.getQueryParams().loadsAllData())return Kn(t);var n=e.queryIdentifier();return t.views.get(n)}function Gn(t,e){return null!=zn(t,e)}function Wn(t){return null!=Kn(t)}function Kn(t){var e,n;try{for(var r=Object(s.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query.getQueryParams().loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var $n=1,Yn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ze(null),this.pendingWriteTree_={visibleWrites:tn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Xn(t,e,n,r,i){return function(t,e,n,r,i){Object(o.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=en(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?rr(t,new He({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Jn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&fn(u,r.path)?i=!1:Et(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=gn(t.allWrites,pn,ht()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=rn(t.visibleWrites,r.path):P(r.children,function(e){t.visibleWrites=rn(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new Ze(null);return null!=r.snap?i=i.set(ht(),!0):P(r.children,function(t){i=i.set(new lt(t),!0)}),rr(t,new qe(r.path,i,n))}return[]}function Zn(t,e,n){return rr(t,new He({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function tr(t,e,n,r){var i=e.path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e.queryIdentifier()||Gn(a,e))){var c=function(t,e,n,r){var i,a,u=e.queryIdentifier(),c=[],l=[],h=Wn(t);if("default"===u)try{for(var d=Object(s.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(s.e)(f.value,2),y=g[0];l=l.concat(Ln(p=g[1],n,r)),Mn(p)&&(t.views.delete(y),p.query.getQueryParams().loadsAllData()||c.push(p.query))}}catch(m){i={error:m}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Ln(p,n,r)),Mn(p)&&(t.views.delete(u),p.query.getQueryParams().loadsAllData()||c.push(p.query)));return h&&!Wn(t)&&c.push(new(Object(o.d)(Pn,"Reference.ts has not been loaded"),Pn)(e.database,e.path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t.getQueryParams().loadsAllData()}),d=t.syncPointTree_.findOnPath(i,function(t,e){return Wn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(i);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Wn(e))return[Kn(e)];var r=[];return e&&(r=Hn(e)),P(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var y=p[g],m=y.query,v=sr(t,y);t.listenProvider_.startListening(dr(m),ar(t,m),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(dr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(ur(e));t.listenProvider_.stopListening(dr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=ur(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function er(t,e,n){var r=e.path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);i=i||Qn(e,n),s=s||Wn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Wn(u),i=i||Qn(u,ht())):(u=new Un,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Qn(e,ht());n&&(i=i.updateImmediateChild(t,n))}));var c=Gn(u,e);if(!c&&!e.getQueryParams().loadsAllData()){var l=ur(e);Object(o.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=$n++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Bn(t,e,r,i,o);return t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xt,function(t,e){r.push(ge(t,e))}),n.isFullyInitialized()&&r.push(pe(n.getNode())),Vn(t,r,n.getNode(),e)}(s,n)}(u,e,n,dn(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=zn(u,e);d=d.concat(function(t,e,n){var r=e.path,i=ar(t,e),s=sr(t,n),a=t.listenProvider_.startListening(dr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.d)(!Wn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!_t(t)&&e&&Wn(e))return[Kn(e).query];var r=[];return e&&(r=r.concat(Hn(e).map(function(t){return t.query}))),P(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(dr(h),ar(t,h))}return a}(t,e,f))}return d}function nr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Qn(n,wt(t,e));if(r)return r});return yn(r,e,i,n,!0)}function rr(t,e){return ir(e,t.syncPointTree_,null,dn(t.pendingWriteTree_,ht()))}function ir(t,e,n,r){if(_t(t.path))return or(t,e,n,r);var i=e.get(ht());null==n&&null!=i&&(n=Qn(i,ht()));var o=[],s=dt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=Cn(r,s);o=o.concat(ir(a,u,c,l))}return i&&(o=o.concat(qn(i,t,r,n))),o}function or(t,e,n,r){var i=e.get(ht());null==n&&null!=i&&(n=Qn(i,ht()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=Cn(r,e),u=t.operationForChild(e);u&&(o=o.concat(or(u,i,s,a)))}),i&&(o=o.concat(qn(i,t,r,n))),o}function sr(t,e){var n=e.query,r=ar(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=cr(t,n);if(r){var i=lr(r),o=i.path,s=i.queryId,a=wt(o,e);return hr(t,o,new Be(Ve(s),a))}return[]}(t,n.path,r):function(t,e){return rr(t,new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return tr(t,n,null,i)}}}function ar(t,e){var n=ur(e);return t.queryToTagMap.get(n)}function ur(t){return t.path.toString()+"$"+t.queryIdentifier()}function cr(t,e){return t.tagToQueryMap.get(e)}function lr(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function hr(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.d)(r,"Missing sync point for query tag that we're tracking"),qn(r,n,dn(t.pendingWriteTree_,e),null)}function dr(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var fr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),pr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return nr(this.syncTree_,this.path_)},t}(),gr=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?yr(t[".sv"],e,n):"object"==typeof t[".sv"]?mr(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},yr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},mr=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},vr=function(t,e,n,r){return _r(e,new pr(n,t),r)},br=function(t,e,n){return _r(t,new fr(e),n)};function _r(t,e,n){var r,i=t.getPriority().val(),o=gr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=gr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,oe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild(Xt,function(t,i){var o=_r(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var wr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function Cr(t,e){for(var n=e instanceof lt?e:new lt(e),r=t,i=dt(n);null!==i;){var s=Object(o.D)(r.node.children,i)||{children:{},childCount:0};r=new wr(i,r,s),i=dt(n=pt(n))}return r}function Or(t){return t.node.value}function Er(t,e){t.node.value=e,Ar(t)}function Sr(t){return t.node.childCount>0}function Tr(t,e){P(t.node.children,function(n,r){e(new wr(n,t,r))})}function Ir(t,e,n,r){n&&!r&&e(t),Tr(t,function(t){Ir(t,e,!0,r)}),n&&r&&e(t)}function xr(t){return new lt(null===t.parent?t.name:xr(t.parent)+"/"+t.name)}function Ar(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Or(t)&&!Sr(t)}(n),i=Object(o.h)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ar(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Ar(t))}(t.parent,t.name,t)}var jr=/[\[\].#$\/\u0000-\u001F\u007F]/,kr=/[\[\].#$\u0000-\u001F\u007F]/,Nr=10485760,Pr=function(t){return"string"==typeof t&&0!==t.length&&!jr.test(t)},Rr=function(t){return"string"==typeof t&&0!==t.length&&!kr.test(t)},Dr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},Mr=function(t,e,n,r,i){i&&void 0===n||Lr(Object(o.l)(t,e,i),n,r)},Lr=function(t,e,n){var r=n instanceof lt?new St(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+It(r));if("function"==typeof e)throw new Error(t+"contains a function "+It(r)+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+It(r));if("string"==typeof e&&e.length>Nr/3&&Object(o.E)(e)>Nr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+It(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(P(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Pr(e)))throw new Error(t+" contains an invalid key ("+e+") "+It(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;u=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(u),a.byteLength_+=Object(o.E)(u),Tt(a),Lr(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=Object(o.E)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+It(r)+" in addition to actual children.")}},Fr=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];P(n,function(t,e){var n=new lt(t);if(Lr(s,e,bt(r,n)),".priority"===gt(n)&&!Dr(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=mt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Pr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Et(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},Vr=function(t,e,n,r){if(!r||void 0!==n){if(S(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dr(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ur=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},qr=function(t,e,n,r){if(!(r&&void 0===n||Pr(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Br=function(t,e,n,r){if(!(r&&void 0===n||Rr(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Hr=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Br(t,e,n,r)},Qr=function(t,e){if(".info"===dt(e))throw new Error(t+" failed = Can't modify data under /.info/")},zr=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Pr(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Rr(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Gr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},Wr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Kr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ot(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function $r(t,e,n){Kr(t,n),Xr(t,function(t){return Ot(t,e)})}function Yr(t,e,n){Kr(t,n),Xr(t,function(t){return Et(t,e)||Et(e,t)})}function Xr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Jr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Jr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();m&&_("event: "+n.toString()),L(r)}}}var Zr="repo_interrupt",ti=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ne(),this.transactionQueueTree_=new wr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ei(t){var e=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ni(t){return(e=(e={timestamp:ei(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ri(t,e,n,r,i){t.dataUpdateCount++;var s=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.B)(n,function(t){return oe(t)});a=function(t,e,n,r){var i=cr(t,r);if(i){var o=lr(i),s=o.path,a=o.queryId,u=wt(s,e),c=Ze.fromObject(n);return hr(t,s,new Qe(Ve(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=oe(n);a=function(t,e,n,r){var i=cr(t,r);if(null!=i){var o=lr(i),s=o.path,a=o.queryId,u=wt(s,e);return hr(t,s,new He(Ve(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.B)(n,function(t){return oe(t)});a=function(t,e,n){var r=Ze.fromObject(n);return rr(t,new Qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Zn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=Ci(t,s)),Yr(t.eventQueue_,d,a)}function ii(t,e){oi(t,"connected",e),!1===e&&function(t){mi(t,"onDisconnectEvents");var e=ni(t),n=Ne();De(t.onDisconnect_,ht(),function(r,i){var o=vr(r,i,t.serverSyncTree_,e);Pe(n,r,o)});var r=[];De(n,ht(),function(e,n){r=r.concat(Zn(t.serverSyncTree_,e,n));var i=Ii(t,e);Ci(t,i)}),t.onDisconnect_=Ne(),Yr(t.eventQueue_,ht(),r)}(t)}function oi(t,e,n){var r=new lt("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Zn(t.infoSyncTree_,r,i);Yr(t.eventQueue_,r,o)}function si(t){return t.nextWriteId_++}function ai(t,e,n,r,i){mi(t,"set",{path:e.toString(),value:n,priority:r});var o=ni(t),s=oe(n,r),a=nr(t.serverSyncTree_,e),u=br(s,a,o),c=si(t),l=Xn(t.serverSyncTree_,e,u,c,!0);Kr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||E("set at "+e+" failed: "+n);var s=Jn(t.serverSyncTree_,c,!o);Yr(t.eventQueue_,e,s),vi(0,i,n,r)});var h=Ii(t,e);Ci(t,h),Yr(t.eventQueue_,h,[])}function ui(t,e,n,r){mi(t,"update",{path:e.toString(),value:n});var i=!0,s=ni(t),a={};if(P(n,function(n,r){i=!1,a[n]=vr(bt(e,n),oe(r),t.serverSyncTree_,s)}),i)_("update() called with empty data.  Don't do anything."),vi(0,r,"ok",void 0);else{var u=si(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=nn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Ze.fromObject(n);return rr(t,new Qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Kr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||E("update at "+e+" failed: "+n);var s=Jn(t.serverSyncTree_,u,!o),a=s.length>0?Ci(t,e):e;Yr(t.eventQueue_,a,s),vi(0,r,n,i)}),P(n,function(n){var r=Ii(t,bt(e,n));Ci(t,r)}),Yr(t.eventQueue_,e,[])}}function ci(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Re(t.onDisconnect_,e),vi(0,n,r,i)})}function li(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Pe(t.onDisconnect_,e,i),vi(0,r,n,o)})}function hi(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Pe(t.onDisconnect_,e,o),vi(0,i,n,r)})}function di(t,e,n,r){if(Object(o.s)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void vi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&P(n,function(n,r){var i=oe(r);Pe(t.onDisconnect_,bt(e,n),i)}),vi(0,r,i,o)})}function fi(t,e,n){var r;r=".info"===dt(e.path)?er(t.infoSyncTree_,e,n):er(t.serverSyncTree_,e,n),$r(t.eventQueue_,e.path,r)}function pi(t,e,n){var r;r=".info"===dt(e.path)?tr(t.infoSyncTree_,e,n):tr(t.serverSyncTree_,e,n),$r(t.eventQueue_,e.path,r)}function gi(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Zr)}function yi(t){t.persistentConnection_&&t.persistentConnection_.resume(Zr)}function mi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(s.f)([r],Object(s.e)(e)))}function vi(t,e,n,r){e&&L(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function bi(t,e,n,r,i,s){mi(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:p(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=_i(t,e,void 0);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{Lr("transaction failed: Data returned ",c,a.path),a.status=0;var l=Cr(t.transactionQueueTree_,e),h=Or(l)||[];h.push(a),Er(l,h);var d=void 0;"object"==typeof c&&null!==c&&Object(o.h)(c,".priority")?(d=Object(o.D)(c,".priority"),Object(o.d)(Dr(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(nr(t.serverSyncTree_,e)||re.EMPTY_NODE).getPriority().val();var f=ni(t),g=oe(c,d),y=br(g,u,f);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=y,a.currentWriteId=si(t);var m=Xn(t.serverSyncTree_,e,y,a.currentWriteId,a.applyLocally);Yr(t.eventQueue_,e,m),wi(t,t.transactionQueueTree_)}}function _i(t,e,n){return nr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function wi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||Ti(t,e),Or(e)){var n=Ei(t,e);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=_i(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){mi(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Jn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(Ti(t,Cr(t.transactionQueueTree_,e)),wi(t,t.transactionQueueTree_),Yr(t.eventQueue_,e,i),a=0;a<o.length;a++)L(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(E("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;Ci(t,e)}},a)}(t,xr(e),n)}else Sr(e)&&Tr(e,function(e){wi(t,e)})}function Ci(t,e){var n=Oi(t,e),r=xr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=wt(n,c.path),h=!1;if(Object(o.d)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Jn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Jn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=_i(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Lr("transaction failed: Data returned ",f,c.path);var p=oe(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,y=ni(t),m=br(p,d,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=si(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Xn(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(Jn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(Jn(t.serverSyncTree_,c.currentWriteId,!0))}Yr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(Ti(t,t.transactionQueueTree_),u=0;u<r.length;u++)L(r[u]);wi(t,t.transactionQueueTree_)}}(t,Ei(t,n),r),r}function Oi(t,e){var n,r=t.transactionQueueTree_;for(n=dt(e);null!==n&&void 0===Or(r);)r=Cr(r,n),n=dt(e=pt(e));return r}function Ei(t,e){var n=[];return Si(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function Si(t,e,n){var r=Or(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Tr(e,function(e){Si(t,e,n)})}function Ti(t,e){var n=Or(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Er(e,n.length>0?n:void 0)}Tr(e,function(e){Ti(t,e)})}function Ii(t,e){var n=xr(Oi(t,e)),r=Cr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){xi(t,e)}),xi(t,r),Ir(r,function(e){xi(t,e)}),n}function xi(t,e){var n=Or(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Jn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Er(e,void 0):n.length=s+1,Yr(t.eventQueue_,xr(e),i),a=0;a<r.length;a++)L(r[a])}}var Ai,ji=function(t,e){var n=ki(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Q(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new lt(n.pathString)}},ki=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(s.g)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Ni=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),Br("DataSnapshot.child",1,e,!1);var n=new lt(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Xt)},t.prototype.hasChild=function(t){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),Br("DataSnapshot.hasChild",1,t,!1);var e=new lt(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Xt))})},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Pi=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return ci(this.repo_,this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),Qr("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,t,!0);var e=new o.a;return li(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),Qr("OnDisconnect.set",this.path_),Mr("OnDisconnect.set",1,t,this.path_,!1),Object(o.I)("OnDisconnect.set",2,e,!0);var n=new o.a;return li(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),Qr("OnDisconnect.setWithPriority",this.path_),Mr("OnDisconnect.setWithPriority",1,t,this.path_,!1),Vr("OnDisconnect.setWithPriority",2,e,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return hi(this.repo_,this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),Qr("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fr("OnDisconnect.update",1,t,this.path_,!1),Object(o.I)("OnDisconnect.update",2,e,!0);var i=new o.a;return di(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},t}(),Ri=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),Di=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Mi=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Ri("value",this,new Ni(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Di(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Li=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Di(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Ri(t.type,this,new Ni(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Fi=function(){function t(t,e,n,r){this.database=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r,this.repo=t.repo_}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(Ai,"Reference.ts has not been loaded"),Ai},set:function(t){Ai=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Mt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Xt){if(null!=e&&!Dr(e)||null!=n&&!Dr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof ue||t.getIndex()===ce,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.database,this.path)},t.prototype.on=function(e,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),Ur("Query.on",1,e,!1),Object(o.I)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Mi(t,e||null,n||null);fi(this.repo,this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Li(t,e,n);fi(this.repo,this,r)},t.prototype.off=function(t,e,n){Object(o.H)("Query.off",0,3,arguments.length),Ur("Query.off",1,t,!0),Object(o.I)("Query.off",2,e,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Mi(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Li(i,null,n||null));pi(this.repo,this,r)},t.prototype.get=function(){var t,e,n,r=this;return(t=this.repo,e=this,n=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||Qn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Qn(i,ht()):(i=new Un,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new ze(r,!0,!1):null;return Xe(Bn(i,e,dn(t.pendingWriteTree_,e.path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e),null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=oe(n),i=Zn(t.serverSyncTree_,e.path,r);return $r(t.eventQueue_,e.path,i),Promise.resolve(r)},function(n){return mi(t,"get for query "+Object(o.G)(e)+" failed: "+n),Promise.reject(new Error(n))})).then(function(t){return new Ni(t,r.getRef(),r.getQueryParams().getIndex())})},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),Ur("Query.once",1,e,!1),Object(o.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.database,this.path,Ce(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.database,this.path,Oe(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Br("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new lt(e);if(_t(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new ue(n),i=xe(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.database,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=xe(this.queryParams_,Mt);return t.validateQueryEndpoints_(e),new t(this.database,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=xe(this.queryParams_,Xt);return t.validateQueryEndpoints_(e),new t(this.database,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=xe(this.queryParams_,ce);return t.validateQueryEndpoints_(e),new t(this.database,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),Mr("Query.startAt",1,e,this.path,!0),qr("Query.startAt",2,n,!0);var r=Ee(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAfter",0,2,arguments.length),Mr("Query.startAfter",1,e,this.path,!1),qr("Query.startAfter",2,n,!0);var r=Se(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),Mr("Query.endAt",1,e,this.path,!0),qr("Query.endAt",2,n,!0);var r=Te(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endBefore",0,2,arguments.length),Mr("Query.endBefore",1,e,this.path,!1),qr("Query.endBefore",2,n,!0);var r=Ie(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.database,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.H)("Query.equalTo",1,2,arguments.length),Mr("Query.equalTo",1,t,this.path,!1),qr("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+yt(this.path)},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Xt&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=k(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=Ot(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.I)(t,3,r.cancel,!0),r.context=n,Object(o.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Vi=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ui=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(s.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),_t(this.path)?null:gt(this.path)},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof lt||(null===dt(this.path)?Hr("Reference.child",1,t,!1):Br("Reference.child",1,t,!1)),new e(this.database,bt(this.path,t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=vt(this.path);return null===t?null:new e(this.database,t)},e.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),Qr("Reference.set",this.path),Mr("Reference.set",1,t,this.path,!1),Object(o.I)("Reference.set",2,e,!0);var n=new o.a;return ai(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),Qr("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fr("Reference.update",1,t,this.path,!1),Object(o.I)("Reference.update",2,e,!0);var i=new o.a;return ui(this.repo,this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),Qr("Reference.setWithPriority",this.path),Mr("Reference.setWithPriority",1,t,this.path,!1),Vr("Reference.setWithPriority",2,e,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return ai(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.H)("Reference.remove",0,1,arguments.length),Qr("Reference.remove",this.path),Object(o.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,n,r){var i=this;if(Object(o.H)("Reference.transaction",1,3,arguments.length),Qr("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,t,!1),Object(o.I)("Reference.transaction",2,n,!0),Gr("Reference.transaction",3,r,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===r&&(r=!0);var s=new o.a;"function"==typeof n&&s.promise.catch(function(){});var a=function(t,r,o){if(t)s.reject(t),"function"==typeof n&&n(t,r,null);else{var a=new Ni(o,new e(i.database,i.path),Xt);s.resolve(new Vi(r,a)),"function"==typeof n&&n(null,r,a)}},u=function(){},c=new e(this.database,this.path);c.on("value",u);var l=function(){c.off("value",u)};return bi(this.repo,this.path,t,a,l,r),s.promise},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),Qr("Reference.setPriority",this.path),Vr("Reference.setPriority",1,t,!1),Object(o.I)("Reference.setPriority",2,e,!0);var n=new o.a;return ai(this.repo,bt(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.H)("Reference.push",0,2,arguments.length),Qr("Reference.push",this.path),Mr("Reference.push",1,t,this.path,!0),Object(o.I)("Reference.push",2,e,!0);var n,r=ei(this.repo),i=he(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return Qr("Reference.onDisconnect",this.path),new Pi(this.repo,this.path)},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Fi);Fi.__referenceConstructor=Ui,function(t){Object(o.d)(!Pn,"__referenceConstructor has already been defined"),Pn=t}(Ui);var qi={},Bi=!1;function Hi(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=ji(i,r),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=ji(i="http://"+c+"?ns="+u.namespace,r)).repoInfo):s=!a.repoInfo.secure;var l=r&&s?new U:new V(t,e);zr("Invalid Firebase Database URL",1,a),_t(a.path)||O("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n){var r=Object(o.D)(qi,e.name);r||(qi[e.name]=r={});var i=Object(o.D)(r,t.toURLString());return i&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ti(t,Bi,e,n),r[t.toURLString()]=i,i}(u,t,l);return new Qi(h)}var Qi=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(s.b)(e,void 0,void 0,function(){return Object(s.d)(this,function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=Object(o.D)(qi,e.app.name))&&Object(o.D)(n,e.key)===e||O("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),gi(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof ti||O("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(function(t){if(t.stats_=$(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new je(t.repoInfo_,function(e,n,r,i){ri(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return ii(t,!0)},0);else{var e=t.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Nt(t.repoInfo_,t.app.options.appId,function(e,n,r,i){ri(t,e,n,r,i)},function(e){ii(t,e)},function(e){!function(t,e){P(e,function(e,n){oi(t,e,n)})}(t,e)},t.authTokenProvider_,e),t.server_=t.persistentConnection_}var n,r;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(n=function(){return new Le(t.stats_,t.server_)},r=t.repoInfo_.toString(),K[r]||(K[r]=n()),K[r]),t.infoData_=new ke,t.infoSyncTree_=new Yn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=Zn(t.infoSyncTree_,e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),oi(t,"connected",!1),t.serverSyncTree_=new Yn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Yr(t.eventQueue_,e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Ui(this,ht())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?O("Cannot call useEmulator() after instance has already been initialized."):function(t,e,n){t.repoInfo_=new Q(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new U)}(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),t instanceof Ui?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.H)(e,1,1,arguments.length);var n=ji(t,this.repo_.repoInfo_.nodeAdmin);zr(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||O(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&O("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),gi(this.repo_)},t.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),yi(this.repo_)},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),zi=Object.freeze({__proto__:null,forceLongPolling:function(){it.forceDisallow(),Z.forceAllow()},forceWebSockets:function(){Z.forceDisallow()},isWebSocketsAvailable:function(){return it.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Me(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);P(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t.repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t.repo,e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t.repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;nt(t.version);var u=new i.c("auth-internal",new i.b("database-standalone"));return u.setComponent(new i.a("auth-internal",function(){return r},"PRIVATE")),{instance:Hi(e,u,n,a),namespace:o}}}),Gi=Nt;Nt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Nt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Wi=Object.freeze({__proto__:null,DataConnection:Gi,RealTimeConnection:st,hijackHash:function(t){var e=Nt.prototype.put;return Nt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Nt.prototype.put=e}},ConnectionTarget:Q,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){!function(t){Bi=t}(t)}}),Ki=Qi.ServerValue;!function(e){nt(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.a("database",function(t,e){var n=e.instanceIdentifier;return Hi(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),n,void 0)},"PUBLIC").setServiceProps({Reference:Ui,Query:Fi,Database:Qi,DataSnapshot:Ni,enableLogging:b,INTERNAL:zi,ServerValue:Ki,TEST_ACCESS:Wi}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.8"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.3","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return Ze}),n.d(e,"b",function(){return Za}),n.d(e,"c",function(){return Ka}),n.d(e,"d",function(){return Ga}),n.d(e,"e",function(){return Wa}),n.d(e,"f",function(){return Gu}),n.d(e,"g",function(){return Mu}),n.d(e,"h",function(){return Ys}),n.d(e,"i",function(){return lu}),n.d(e,"j",function(){return _s}),n.d(e,"k",function(){return nu}),n.d(e,"l",function(){return Es}),n.d(e,"m",function(){return dr}),n.d(e,"n",function(){return Aa}),n.d(e,"o",function(){return Wi}),n.d(e,"p",function(){return bn}),n.d(e,"q",function(){return A}),n.d(e,"r",function(){return Je}),n.d(e,"s",function(){return co}),n.d(e,"t",function(){return Hs}),n.d(e,"u",function(){return zs}),n.d(e,"v",function(){return eu}),n.d(e,"w",function(){return aa}),n.d(e,"x",function(){return Fu}),n.d(e,"y",function(){return sa}),n.d(e,"z",function(){return ku}),n.d(e,"A",function(){return fu}),n.d(e,"B",function(){return _n}),n.d(e,"C",function(){return Ja}),n.d(e,"D",function(){return Xa}),n.d(e,"E",function(){return Is}),n.d(e,"F",function(){return Ts}),n.d(e,"G",function(){return yr}),n.d(e,"H",function(){return As}),n.d(e,"I",function(){return ar}),n.d(e,"J",function(){return wn}),n.d(e,"K",function(){return qu}),n.d(e,"L",function(){return na}),n.d(e,"M",function(){return _u}),n.d(e,"N",function(){return tn}),n.d(e,"O",function(){return ks}),n.d(e,"P",function(){return js}),n.d(e,"Q",function(){return ca}),n.d(e,"R",function(){return D}),n.d(e,"S",function(){return Nu}),n.d(e,"T",function(){return Au}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return xu}),n.d(e,"W",function(){return Qu}),n.d(e,"X",function(){return Ou}),n.d(e,"Y",function(){return tu}),n.d(e,"Z",function(){return $i}),n.d(e,"ab",function(){return ss}),n.d(e,"bb",function(){return or}),n.d(e,"cb",function(){return Bn}),n.d(e,"db",function(){return kn}),n.d(e,"eb",function(){return Pn}),n.d(e,"fb",function(){return Ln}),n.d(e,"gb",function(){return Dn}),n.d(e,"hb",function(){return Rn}),n.d(e,"ib",function(){return Mn}),n.d(e,"jb",function(){return ns}),n.d(e,"kb",function(){return Hu}),n.d(e,"lb",function(){return rs}),n.d(e,"mb",function(){return is}),n.d(e,"nb",function(){return Nn}),n.d(e,"ob",function(){return U}),n.d(e,"pb",function(){return _o}),n.d(e,"qb",function(){return Do}),n.d(e,"rb",function(){return Po}),n.d(e,"sb",function(){return Ro}),n.d(e,"tb",function(){return es}),n.d(e,"ub",function(){return St}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return jn}),n.d(e,"xb",function(){return ho}),n.d(e,"yb",function(){return bt}),n.d(e,"zb",function(){return ms}),n.d(e,"Ab",function(){return Zr}),n.d(e,"Bb",function(){return Eo}),n.d(e,"Cb",function(){return Ho}),n.d(e,"Db",function(){return Ba}),n.d(e,"Eb",function(){return J}),n.d(e,"Fb",function(){return ot}),n.d(e,"Gb",function(){return _}),n.d(e,"Hb",function(){return w}),n.d(e,"Ib",function(){return nt}),n.d(e,"Jb",function(){return st}),n.d(e,"Kb",function(){return Io}),n.d(e,"Lb",function(){return No}),n.d(e,"Mb",function(){return ko}),n.d(e,"Nb",function(){return jo}),n.d(e,"Ob",function(){return We}),n.d(e,"Pb",function(){return Xo}),n.d(e,"Qb",function(){return yn}),n.d(e,"Rb",function(){return $e}),n.d(e,"Sb",function(){return za}),n.d(e,"Tb",function(){return Mo}),n.d(e,"Ub",function(){return Ha}),n.d(e,"Vb",function(){return Vo}),n.d(e,"Wb",function(){return Ia}),n.d(e,"Xb",function(){return xa}),n.d(e,"Yb",function(){return xo}),n.d(e,"Zb",function(){return Uo}),n.d(e,"ac",function(){return Ea}),n.d(e,"bc",function(){return Sa}),n.d(e,"cc",function(){return qa}),n.d(e,"dc",function(){return ur}),n.d(e,"ec",function(){return rt}),n.d(e,"fc",function(){return To}),n.d(e,"gc",function(){return Ko}),n.d(e,"hc",function(){return $o}),n.d(e,"ic",function(){return Yo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class y extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function m(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():m(t)}function b(t,e){const n=e?` in ${e}`:"";throw new y("201",`No provider for ${v(t)} found${n}`)}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function C(t){return O(t,S)||O(t,I)}function O(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(x))?t[T]:null}const S=u({"\u0275prov":u}),T=u({"\u0275inj":u}),I=u({ngInjectableDef:u}),x=u({ngInjectorDef:u});var A=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let j;function k(t){const e=j;return j=t,e}function N(t,e,n){const r=C(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&A.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function P(t){return{toString:t}.toString()}var R=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),D=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const M="undefined"!=typeof globalThis&&globalThis,L="undefined"!=typeof window&&window,F="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,U=M||V||L||F,q={},B=[],H=[],Q=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),G=u({"\u0275pipe":u}),W=u({"\u0275mod":u}),K=u({"\u0275loc":u}),$=u({"\u0275fac":u}),Y=u({__NG_ELEMENT_ID__:u});let X=0;function J(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===R.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||H,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||D.Emulated,id:"c",styles:t.styles||H,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=X++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Z):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(tt):null,n})}function Z(t){return at(t)||function(t){return t[z]||null}(t)}function tt(t){return function(t){return t[G]||null}(t)}const et={};function nt(t){const e={type:t.type,bootstrap:t.bootstrap||H,declarations:t.declarations||H,imports:t.imports||H,exports:t.exports||H,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&P(()=>{et[t.id]=t.type}),e}function rt(t,e){return P(()=>{const n=ut(t,!0);n.declarations=e.declarations||H,n.imports=e.imports||H,n.exports=e.exports||H})}function it(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ot=J;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[Q]||null}function ut(t,e){const n=t[W]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function gt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty($)?t[$]:null}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function bt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ct),wt}function wt(){const t=Ot(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ct(t,e,n,r){const i=Ot(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new vt(u&&u.currentValue,e,s===q),t[r]=e}function Ot(t){return t.__ngSimpleChanges__||null}let Et;function St(t){Et=t}function Tt(t){return!!t.listen}bt.ngInherit=!0;const It={createRenderer:(t,e)=>void 0!==Et?Et:"undefined"!=typeof document?document:void 0};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function At(t,e){return xt(e[t])}function jt(t,e){return xt(e[t.index])}function kt(t,e){return t.data[e]}function Nt(t,e){const n=e[t];return ht(n)?n:n[0]}function Pt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Rt(t){return 4==(4&t[2])}function Dt(t){return 128==(128&t[2])}function Mt(t,e){return null==e?null:t[e]}function Lt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Vt={lFrame:oe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ut(){return Vt.bindingsEnabled}function qt(){return Vt.lFrame.lView}function Bt(){return Vt.lFrame.tView}function Ht(){let t=Qt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Qt(){return Vt.lFrame.currentTNode}function zt(t,e){const n=Vt.lFrame;n.currentTNode=t,n.isParent=e}function Gt(){return Vt.lFrame.isParent}function Wt(){return Vt.isInCheckNoChangesMode}function Kt(t){Vt.isInCheckNoChangesMode=t}function $t(){const t=Vt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Yt(){return Vt.lFrame.bindingIndex++}function Xt(t,e){const n=Vt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Jt(e)}function Jt(t){Vt.lFrame.currentDirectiveIndex=t}function Zt(){return Vt.lFrame.currentQueryIndex}function te(t){Vt.lFrame.currentQueryIndex=t}function ee(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ne(t,e,n){if(n&A.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&A.Host||(r=ee(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Vt.lFrame=ie();return r.currentTNode=e,r.lView=t,!0}function re(t){const e=ie(),n=t[1];Vt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ie(){const t=Vt.lFrame,e=null===t?null:t.child;return null===e?oe(t):e}function oe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function se(){const t=Vt.lFrame;return Vt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ae=se;function ue(){const t=se();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ce(){return Vt.lFrame.selectedIndex}function le(t){Vt.lFrame.selectedIndex=t}function he(){const t=Vt.lFrame;return kt(t.tView,t.selectedIndex)}function de(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function fe(t,e,n){ye(t,e,3,n)}function pe(t,e,n,r){(3&t[2])===n&&ye(t,e,n,r)}function ge(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ye(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(me(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function me(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const ve=-1;class be{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function _e(t,e,n){const r=Tt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ce(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function we(t){return 3===t||4===t||6===t}function Ce(t){return 64===t.charCodeAt(0)}function Oe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ee(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ee(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Se(t){return t!==ve}function Te(t){return 32767&t}function Ie(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let xe=!0;function Ae(t){const e=xe;return xe=t,e}let je=0;function ke(t,e){const n=Pe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ne(r.data,t),Ne(e,null),Ne(r.blueprint,null));const i=Re(t,e),o=t.injectorIndex;if(Se(i)){const t=Te(i),n=Ie(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ne(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Pe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Re(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ve;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ve}function De(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=je++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Me(t,e,n){if(n&A.Optional)return t;b(e,"NodeInjector")}function Le(t,e,n,r){if(n&A.Optional&&void 0===r&&(r=null),0==(n&(A.Self|A.Host))){const i=t[9],o=k(void 0);try{return i?i.get(e,r,n&A.Optional):N(e,r,n&A.Optional)}finally{k(o)}}return Me(r,e,n)}function Fe(t,e,n,r=A.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e?e>=0?255&e:Ue:e}(n);if("function"==typeof o){if(!ne(e,t,r))return r&A.Host?Me(i,n,r):Le(e,n,r,i);try{const t=o();if(null!=t||r&A.Optional)return t;b(n)}finally{ae()}}else if("number"==typeof o){let i=null,s=Pe(t,e),a=ve,u=r&A.Host?e[16][6]:null;for((-1===s||r&A.SkipSelf)&&(a=-1===s?Re(t,e):e[s+8],a!==ve&&ze(r,!1)?(i=e[1],s=Te(a),e=Ie(a,e)):s=-1);-1!==s;){const t=e[1];if(Qe(o,s,t.data)){const t=qe(s,e,n,i,r,u);if(t!==Ve)return t}a=e[s+8],a!==ve&&ze(r,e[1].data[s+8]===u)&&Qe(o,s,e)?(i=t,s=Te(a),e=Ie(a,e)):s=-1}}}return Le(e,n,r,i)}const Ve={};function Ue(){return new Ge(Ht(),qt())}function qe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Be(a,s,n,null==r?pt(a)&&xe:r!=s&&0!=(3&a.type),i&A.Host&&o===a);return null!==u?He(e,s,u,a):Ve}function Be(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&yt(t)&&t.type===n)return u}return null}function He(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof be){const s=i;s.resolving&&function(t,e){throw new y("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Ae(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?k(s.injectImpl):null;ne(t,r,A.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&k(u),Ae(a),s.resolving=!1,ae()}}return i}function Qe(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function ze(t,e){return!(t&A.Self||t&A.Host&&e)}class Ge{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Fe(this._tNode,this._lView,t,void 0,e)}}function We(t){return P(()=>{const e=t.prototype.constructor,n=e[$]||Ke(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[$]||Ke(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ke(t){return g(t)?()=>{const e=Ke(p(t));return e&&e()}:mt(t)}function $e(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(we(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ht(),t)}const Ye="__parameters__";function Xe(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ye)?t[Ye]:Object.defineProperty(t,Ye,{value:[]})[Ye];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Je{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ze=new Je("AnalyzeForEntryComponents"),tn=Function;function en(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),en(r,e)):e!==t&&e.push(r)}return e}function nn(t,e){t.forEach(t=>Array.isArray(t)?nn(t,e):e(t))}function rn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function on(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function sn(t,e,n){let r=un(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function an(t,e){const n=un(t,e);if(n>=0)return t[1|n]}function un(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const cn={},ln=/\n/gm,hn="__source",dn=u({provide:String,useValue:u});let fn;function pn(t){const e=fn;return fn=t,e}function gn(t,e=A.Default){if(void 0===fn)throw new Error("inject() must be called from an injection context");return null===fn?N(t,void 0,e):fn.get(t,e&A.Optional?null:void 0,e)}function yn(t,e=A.Default){return(j||gn)(p(t),e)}function mn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=A.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(yn(t,n))}else e.push(yn(r))}return e}function vn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const bn=vn(Xe("Inject",t=>({token:t})),-1),_n=vn(Xe("Optional"),8),wn=vn(Xe("SkipSelf"),4);let Cn;function On(t){var e;return(null===(e=function(){if(void 0===Cn&&(Cn=null,U.trustedTypes))try{Cn=U.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Cn}())||void 0===e?void 0:e.createHTML(t))||t}class En{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Sn extends En{getTypeName(){return"HTML"}}class Tn extends En{getTypeName(){return"Style"}}class In extends En{getTypeName(){return"Script"}}class xn extends En{getTypeName(){return"URL"}}class An extends En{getTypeName(){return"ResourceURL"}}function jn(t){return t instanceof En?t.changingThisBreaksApplicationSecurity:t}function kn(t,e){const n=Nn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Nn(t){return t instanceof En&&t.getTypeName()||null}function Pn(t){return new Sn(t)}function Rn(t){return new Tn(t)}function Dn(t){return new In(t)}function Mn(t){return new xn(t)}function Ln(t){return new An(t)}class Fn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(On(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Vn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=On(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=On(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Un=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Bn(t){return(t=String(t)).match(Un)||t.match(qn)?t:"unsafe:"+t}function Hn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Qn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const zn=Hn("area,br,col,hr,img,wbr"),Gn=Hn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wn=Hn("rp,rt"),Kn=Qn(Wn,Gn),$n=Qn(zn,Qn(Gn,Hn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qn(Wn,Hn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kn),Yn=Hn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xn=Hn("srcset"),Jn=Qn(Yn,Xn,Hn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Zn=Hn("script,style,template");class tr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!$n.hasOwnProperty(e))return this.sanitizedSomething=!0,!Zn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Jn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Yn[o]&&(s=Bn(s)),Xn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Bn(t.trim())).join(", ")),this.buf.push(" ",e,'="',rr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();$n.hasOwnProperty(e)&&!zn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(rr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const er=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nr=/([^\#-~ |!])/g;function rr(t){return t.replace(/&/g,"&amp;").replace(er,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(nr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ir;function or(t,e){let n=null;try{ir=ir||function(t){const e=new Vn(t);return function(){try{return!!(new window.DOMParser).parseFromString(On(""),"text/html")}catch(t){return!1}}()?new Fn(e):e}(t);let r=e?String(e):"";n=ir.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=ir.getInertBodyElement(r)}while(r!==o);return On((new tr).sanitizeChildren(sr(n)||n))}finally{if(n){const t=sr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function sr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ar=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function ur(t){const e=function(){const t=qt();return t&&t[12]}();return e?e.sanitize(ar.URL,t)||"":kn(t,"URL")?jn(t):Bn(m(t))}function cr(t){return t.ngDebugContext}function lr(t){return t.ngOriginalError}function hr(t,...e){t.error(...e)}class dr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||hr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?cr(t)?cr(t):this._findContext(lr(t)):null}_findOriginalError(t){let e=lr(t);for(;e&&lr(e);)e=lr(e);return e}}function fr(t,e){t.__ngContext__=e}const pr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(U))();function gr(t){return t instanceof Function?t():t}var yr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function mr(t,e){return(void 0)(t,e)}function vr(t){const e=t[3];return dt(e)?e[3]:e}function br(t){return wr(t[13])}function _r(t){return wr(t[4])}function wr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Cr(t,e,n,r,i){if(null!=r){let o,s=!1;dt(r)?o=r:ht(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?Ar(e,n,a):xr(e,n,a,i||null,!0):1===t&&null!==n?xr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=kr(t,e);r&&function(t,e,n,r){Tt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&Cr(e,t,r,o,i);for(let s=lt;s<n.length;s++){const i=n[s];Lr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Or(t,e,n){return Tt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Er(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Sr(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Er(o,r),e>0&&(t[n-1][4]=r[4]);const s=on(t,lt+e);Lr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Tr(t,e){if(!(256&e[2])){const n=e[11];Tt(n)&&n.destroyNode&&Lr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ir(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&Ir(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&Ir(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ir(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof be)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):xt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Tt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Er(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function xr(t,e,n,r,i){Tt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ar(t,e,n){Tt(t)?t.appendChild(e,n):e.appendChild(n)}function jr(t,e,n,r,i){null!==r?xr(t,e,n,r,i):Ar(t,e,n)}function kr(t,e){return Tt(t)?t.parentNode(e):e.parentNode}function Nr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===D.None||e===D.Emulated)return null}return jt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?jt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)jr(o,i,n[a],s,!1);else jr(o,i,n,s,!1)}function Pr(t,e){if(null!==e){const n=e.type;if(3&n)return jt(e,t);if(4&n)return Dr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Pr(t,n);{const n=t[e.index];return dt(n)?Dr(-1,n):xt(n)}}if(32&n)return mr(e,t)()||xt(t[e.index]);{const n=Rr(t,e);return null!==n?Array.isArray(n)?n[0]:Pr(vr(t[16]),n):Pr(t,e.next)}}return null}function Rr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Dr(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Pr(t,r)}return e[7]}function Mr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&fr(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Mr(t,e,n.child,r,i,o,!1),Cr(e,t,i,a,o);else if(32&u){const s=mr(n,r);let u;for(;u=s();)Cr(e,t,i,u,o);Cr(e,t,i,a,o)}else 16&u?Fr(t,e,r,n,i,o):Cr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Lr(t,e,n,r,i,o){Mr(n,r,t.firstChild,e,i,o,!1)}function Fr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Cr(e,t,i,a[u],o);else Mr(t,e,a,s[3],i,o,!0)}function Vr(t,e,n){Tt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ur(t,e,n){Tt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function qr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Br="ng-template";function Hr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==qr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Qr(t){return 4===t.type&&t.value!==Br}function zr(t,e,n){return e===(4!==t.type||n?t.value:Br)}function Gr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(we(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!zr(t,u,n)||""===u&&1===e.length){if(Wr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Hr(t.attrs,c,n)){if(Wr(r))return!1;s=!0}continue}const l=Kr(8&r?"class":u,i,Qr(t),n);if(-1===l){if(Wr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==qr(e,c,0)||2&r&&c!==t){if(Wr(r))return!1;s=!0}}}}else{if(!s&&!Wr(r)&&!Wr(u))return!1;if(s&&Wr(u))continue;s=!1,r=u|1&r}}return Wr(r)||s}function Wr(t){return 0==(1&t)}function Kr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function $r(t,e,n=!1){for(let r=0;r<e.length;r++)if(Gr(t,e[r],n))return!0;return!1}function Yr(t,e){return t?":not("+e.trim()+")":e}function Xr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Wr(s)||(e+=Yr(o,i),i=""),r=s,o=o||!Wr(r);n++}return""!==i&&(e+=Yr(o,i)),e}const Jr={};function Zr(t){ti(Bt(),qt(),ce()+t,Wt())}function ti(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&fe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&pe(e,r,0,n)}le(n)}function ei(t,e){return t<<17|e<<2}function ni(t){return t>>17&32767}function ri(t){return 2|t}function ii(t){return(131068&t)>>2}function oi(t,e){return-131069&t|e<<2}function si(t){return 1|t}function ai(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];te(i),n.contentQueries(2,e[o],o)}}}function ui(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Lt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ci(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Qt(),s=Gt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Vt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Vt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return zt(o,!0),o}function li(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hi(t,e,n){re(e);try{const r=t.viewQuery;null!==r&&Ui(1,r,n);const i=t.template;null!==i&&pi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ai(t,e),t.staticViewQueries&&Ui(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Di(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ue()}}function di(t,e,n,r){const i=e[2];if(256==(256&i))return;re(e);const o=Wt();try{Lt(e),Vt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&pi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&fe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&pe(e,n,0,null),ge(e,0)}if(function(t){for(let e=br(t);null!==e;e=_r(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=br(t);null!==e;e=_r(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Dt(n)&&di(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ai(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&fe(e,n)}else{const n=t.contentHooks;null!==n&&pe(e,n,1),ge(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)le(~r);else{const i=r,o=n[++t],s=n[++t];Xt(o,i),s(2,e[i])}}}finally{le(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Pi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ui(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&fe(e,n)}else{const n=t.viewHooks;null!==n&&pe(e,n,2),ge(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{ue()}}function fi(t,e,n,r){const i=e[10],o=!Wt(),s=Rt(e);try{o&&!s&&i.begin&&i.begin(),s&&hi(t,e,r),di(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function pi(t,e,n,r,i){const o=ce();try{le(-1),2&r&&e.length>ct&&ti(t,e,ct,Wt()),n(r,i)}finally{le(o)}}function gi(t,e,n){Ut()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||ke(n,e),fr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=yt(r);o&&Ai(e,n,r);const u=He(e,t,a,n);fr(u,e),null!==s&&ji(0,a-i,u,r,0,s),o&&(Nt(n.index,e)[8]=u)}}(t,e,n,jt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Vt.lFrame.currentDirectiveIndex;try{le(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Jt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ei(r,i)}}finally{le(-1),Jt(s)}}(t,e,n))}function yi(t,e,n=jt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function mi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=vi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function vi(t,e,n,r,i,o,s,a,u,c){const l=ct+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jr);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function bi(t,e,n,r){const i=Bi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Hi(t).push(r,i.length-1))}function _i(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function wi(t,e,n,r,i,o,s,a){const u=jt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(zi(t,n,c,r,i),pt(e)&&function(t,e){const n=Nt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Tt(o)?o.setProperty(u,r,i):Ce(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ci(t,e,n,r){let i=!1;if(Ut()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];$r(n,s.selectors,!1)&&(i||(i=[]),De(ke(n,e),t,s.type),yt(s)?(Si(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ii(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=li(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Oe(n.mergedAttrs,c.hostAttrs),xi(t,n,e,u,c),Ti(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Qr(e)?null:ki(n,i);o.push(c),s=_i(n,u,s),a=_i(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new y("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Oe(n.mergedAttrs,n.attrs),i}function Oi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ei(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Si(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ti(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function Ii(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new be(o,yt(i),null);t.blueprint[r]=s,n[r]=s,Oi(t,e,0,r,li(t,n,i.hostVars,Jr),i)}function Ai(t,e,n){const r=jt(e,t),i=mi(n),o=t[10],s=Mi(t,ui(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function ji(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ki(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ni(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Pi(t,e){const n=Nt(e,t);if(Dt(n)){const t=n[1];80&n[2]?di(t,n,t.template,n[8]):n[5]>0&&Ri(n)}}function Ri(t){for(let n=br(t);null!==n;n=_r(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];di(t,e,t.template,e[8])}else e[5]>0&&Ri(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Nt(e[n],t);Dt(r)&&r[5]>0&&Ri(r)}}function Di(t,e){const n=Nt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),hi(r,n,n[8])}function Mi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Li(t){for(;t;){t[2]|=64;const e=vr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Fi(t,e,n){const r=e[10];r.begin&&r.begin();try{di(t,e,t.template,n)}catch(i){throw Qi(e,i),i}finally{r.end&&r.end()}}function Vi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Pt(n),i=r[1];fi(i,r,i.template,n)}}(t[8])}function Ui(t,e,n){te(0),e(t,n)}const qi=(()=>Promise.resolve(null))();function Bi(t){return t[7]||(t[7]=[])}function Hi(t){return t.cleanup||(t.cleanup=[])}function Qi(t,e){const n=t[9],r=n?n.get(dr,null):null;r&&r.handleError(e)}function zi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Gi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Wi=new Je("INJECTOR",-1);class Ki{get(t,e=cn){if(e===cn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const $i=new Je("Set Injector scope."),Yi={},Xi={},Ji=[];let Zi;function to(){return void 0===Zi&&(Zi=new Ki),Zi}function eo(t,e=null,n=null,r){return new no(t,n,e||to(),r)}class no{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&nn(e,n=>this.processProvider(n,t,e)),nn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Wi,oo(void 0,this));const o=this.records.get($i);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=cn,n=A.Default){this.assertNotDestroyed();const r=pn(this);try{if(!(n&A.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Je)&&C(t);e=n&&this.injectableDefInScope(n)?oo(ro(t),Yi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&A.Self?to():this.parent).get(t,e=n&A.Optional&&e===cn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[hn]&&i.unshift(e[hn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ln,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{pn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{nn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];nn(r,t=>this.processProvider(t,n,r||Ji))}}this.injectorDefTypes.add(o);const a=mt(o)||(()=>new o);this.records.set(o,oo(a,Yi));const u=r.providers;if(null!=u&&!s){const e=t;nn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ao(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return so(t)?oo(void 0,t.useValue):oo(io(t),Yi)}(t);if(ao(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=oo(void 0,Yi,!0),e.factory=()=>mn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Yi&&(e.value=Xi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function ro(t){const e=C(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof Je)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[I]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function io(t,e,n){let r;if(ao(t)){const e=p(t);return mt(e)||ro(e)}if(so(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...mn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>yn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||ro(e);r=()=>new e(...mn(t.deps))}var i;return r}function oo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function so(t){return null!==t&&"object"==typeof t&&dn in t}function ao(t){return"function"==typeof t}const uo=function(t,e,n){return function(t,e=null,n=null,r){const i=eo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let co=(()=>{class t{static create(t,e){return Array.isArray(t)?uo(t,e,""):uo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=cn,t.NULL=new Ki,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>yn(Wi)}),t.__NG_ELEMENT_ID__=-1,t})();function lo(t,e){de(Pt(t)[1],Ht())}function ho(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=fo(t.inputs),e.declaredInputs=fo(t.declaredInputs),e.outputs=fo(t.outputs);const n=i.hostBindings;n&&yo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&po(t,o),s&&go(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===ho&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Oe(i.hostAttrs,n=Oe(n,i.hostAttrs))}}(r)}function fo(t){return t===q?{}:t===H?[]:t}function po(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function go(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function yo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let mo=null;function vo(){if(!mo){const t=U.Symbol;if(t&&t.iterator)mo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(mo=n)}}}return mo}class bo{constructor(t){this.wrapped=t}static wrap(t){return new bo(t)}static unwrap(t){return bo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof bo}}function _o(t){return!!wo(t)&&(Array.isArray(t)||!(t instanceof Map)&&vo()in t)}function wo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Co(t,e,n){return t[e]=n}function Oo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Eo(t,e,n,r){const i=qt();return Oo(i,Yt(),e)&&(Bt(),function(t,e,n,r,i,o){const s=jt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Tt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?m(o):s(o,r||"",i);Tt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(he(),i,t,e,n,r)),Eo}function So(t,e,n,r){return Oo(t,Yt(),n)?e+m(n)+r:Jr}function To(t,e,n,r,i,o,s,a){const u=qt(),c=Bt(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=ci(e,t,4,s||null,Mt(c,a));Ci(e,n,l,Mt(c,u)),de(e,l);const h=l.tViews=vi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];zt(h,!1);const d=u[11].createComment("");Nr(c,u,d,h),fr(d,u),Mi(u,u[l]=Ni(d,u,d,h)),gt(h)&&gi(c,u,h),null!=s&&yi(u,h,a)}function Io(t,e=A.Default){const n=qt();return null===n?yn(t,e):Fe(Ht(),n,p(t),e)}function xo(t,e,n){const r=qt();return Oo(r,Yt(),e)&&wi(Bt(),he(),r,t,e,r[11],n,!1),xo}function Ao(t,e,n,r,i){const o=i?"class":"style";zi(t,n,e.inputs[o],o,r)}function jo(t,e,n,r){const i=qt(),o=Bt(),s=ct+t,a=i[11],u=i[s]=Or(a,e,Vt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ci(e,t,2,i,Mt(a,o));return Ci(e,n,u,Mt(a,s)),null!==u.attrs&&Gi(u,u.attrs,!1),null!==u.mergedAttrs&&Gi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];zt(c,!0);const l=c.mergedAttrs;null!==l&&_e(a,u,l);const h=c.classes;null!==h&&Ur(a,u,h);const d=c.styles;null!==d&&Vr(a,u,d),64!=(64&c.flags)&&Nr(o,i,u,c),0===Vt.lFrame.elementDepthCount&&fr(u,i),Vt.lFrame.elementDepthCount++,gt(c)&&(gi(o,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&yi(i,c)}function ko(){let t=Ht();Gt()?Vt.lFrame.isParent=!1:(t=t.parent,zt(t,!1));const e=t;Vt.lFrame.elementDepthCount--;const n=Bt();n.firstCreatePass&&(de(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ao(n,e,qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ao(n,e,qt(),e.stylesWithoutHost,!1)}function No(t,e,n,r){jo(t,e,n,r),ko()}function Po(t){return!!t&&"function"==typeof t.then}function Ro(t){return!!t&&"function"==typeof t.subscribe}const Do=Ro;function Mo(t,e,n=!1,r){const i=qt(),o=Bt(),s=Ht();return function(t,e,n,r,i,o,s=!1,a){const u=gt(r),c=t.firstCreatePass&&Hi(t),l=Bi(e);let h=!0;if(3&r.type){const d=jt(r,e),f=a?a(d):q,p=f.target||d,g=l.length,y=a?t=>a(xt(t[r.index])).target:r.index;if(Tt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Fo(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Fo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=Fo(r,e,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Mo}function Lo(t,e,n){try{return!1!==e(n)}catch(r){return Qi(t,r),!1}}function Fo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Nt(t.index,e):e;0==(32&e[2])&&Li(s);let a=Lo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Lo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Vo(t=1){return function(t){return(Vt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Vt.lFrame.contextLView))[8]}(t)}function Uo(t,e,n,r,i){const o=qt(),s=So(o,e,n,r);return s!==Jr&&wi(Bt(),he(),o,t,s,o[11],i,!1),Uo}function qo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ni(o):ii(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Bo(t[a],e)&&(u=!0,t[a+1]=r?si(n):ri(n)),a=r?ni(n):ii(n)}u&&(t[n+1]=r?ri(o):si(o))}function Bo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&un(t,e)>=0}function Ho(t,e){return function(t,e,n,r){const i=qt(),o=Bt(),s=function(t){const e=Vt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ce()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Vt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=zo(n=Qo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Qo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==ii(r))return t[ni(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Qo(null,t,e,n[1],r),n=zo(n,e.attrs,r),function(t,e,n,r){t[ni(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=zo(r,t[o].hostAttrs,true);return zo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ni(s),u=ii(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||un(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ni(t[a+1]);t[r+1]=ei(e,a),0!==e&&(t[e+1]=oi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ei(a,0),0!==a&&(t[a+1]=oi(t[a+1],r)),a=r;else t[r+1]=ei(u,0),0===a?a=r:t[u+1]=oi(t[u+1],r),u=r;l&&(t[r+1]=ri(t[r+1])),qo(t,c,r,!0),qo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&un(o,e)>=0&&(n[r+1]=si(n[r+1]))}(e,c,t,r),s=ei(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Jr&&Oo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Wo(1==(1&c)?Go(u,e,n,i,ii(c),s):void 0)||(Wo(o)||function(t){return 2==(2&t)}(c)&&(o=Go(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Tt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,At(ce(),n),i,o))}(o,o.data[ce()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(jn(t))),t}(e),true,s)}(t,e),Ho}function Qo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=zo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function zo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),sn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Go(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Jr&&(l=c?B:void 0);let h=c?an(l,r):u===r?l:void 0;if(o&&!Wo(h)&&(h=an(e,r)),Wo(h)&&(a=h,s))return a;const d=t[i+1];i=s?ni(d):ii(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=an(t,r))}return a}function Wo(t){return void 0!==t}function Ko(t,e=""){const n=qt(),r=Bt(),i=t+ct,o=r.firstCreatePass?ci(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Tt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Nr(r,n,s,o),zt(o,!1)}function $o(t){return Yo("",t,""),$o}function Yo(t,e,n){const r=qt(),i=So(r,t,e,n);return i!==Jr&&function(t,e,n){const r=At(e,t);!function(t,e,n){Tt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ce(),i),Yo}function Xo(t,e,n){const r=qt();return Oo(r,Yt(),e)&&wi(Bt(),he(),r,t,e,r[11],n,!0),Xo}const Jo=void 0;var Zo=["en",[["a","p"],["AM","PM"],Jo],[["AM","PM"],Jo,Jo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jo,"{1} 'at' {0}",Jo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ts={};function es(t,e,n){"string"!=typeof e&&(n=e,e=t[ss.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ts[e]=t,n&&(ts[e][ss.ExtraData]=n)}function ns(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=os(e);if(n)return n;const r=e.split("-")[0];if(n=os(r),n)return n;if("en"===r)return Zo;throw new Error(`Missing locale data for the locale "${t}".`)}function rs(t){return ns(t)[ss.CurrencyCode]||null}function is(t){return ns(t)[ss.PluralCase]}function os(t){return t in ts||(ts[t]=U.ng&&U.ng.common&&U.ng.common.locales&&U.ng.common.locales[t]),ts[t]}var ss=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const as="en-US";let us=as;function cs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(us=t.toLowerCase().replace(/_/g,"-"))}function ls(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)ls(t[o],e,n,r,i);else{const o=Bt(),s=qt();let a=ao(t)?t:p(t.provide),u=io(t);const c=Ht(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(ao(t)||!t.multi){const r=new be(u,i,Io),f=fs(a,e,i?l:l+d,h);-1===f?(De(ke(c,s),o,a),hs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=fs(a,e,l+d,h),p=fs(a,e,l,l+d),g=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!g){De(ke(c,s),o,a);const l=function(t,e,n,r,i){const o=new be(t,n,Io);return o.multi=[],o.index=e,o.componentProviders=0,ds(o,i,r&&!n),o}(i?gs:ps,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),hs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else hs(o,t,f>-1?f:p,ds(n[i?p:f],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function hs(t,e,n,r){const i=ao(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ds(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function fs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ps(t,e,n,r){return ys(this.multi,[])}function gs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=He(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ys(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ys(i,o);return o}function ys(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ms(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Bt();if(r.firstCreatePass){const i=yt(t);ls(n,r.data,r.blueprint,i,!0),ls(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class vs{}class bs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let _s=(()=>{class t{}return t.NULL=new bs,t})();function ws(...t){}function Cs(t,e){return new Es(jt(t,e))}const Os=function(){return Cs(Ht(),qt())};let Es=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Os,t})();function Ss(t){return t instanceof Es?t.nativeElement:t}class Ts{}let Is=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>xs(),t})();const xs=function(){const t=qt(),e=Nt(Ht().index,t);return function(t){return t[11]}(ht(e)?e:t)};let As=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class js{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ks=new js("11.2.8");class Ns{constructor(){}supports(t){return _o(t)}create(t){return new Rs(t)}}const Ps=(t,e)=>e;class Rs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ps}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Fs(n,r,i)?e:n,s=Fs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!_o(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[vo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ds(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ls),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ls),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ds{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ms{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ls{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ms,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Vs{constructor(){}supports(t){return t instanceof Map||wo(t)}create(){return new Us}}class Us{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||wo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new qs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class qs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Bs(){return new Hs([new Ns])}let Hs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Bs()),deps:[[t,new wn,new _n]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Bs}),t})();function Qs(){return new zs([new Vs])}let zs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Qs()),deps:[[t,new wn,new _n]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Qs}),t})();function Gs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),dt(o))for(let t=lt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Gs(e[1],e,n,r)}const s=n.type;if(8&s)Gs(t,e,n.child,r);else if(32&s){const t=mr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Rr(e,n);if(Array.isArray(t))r.push(...t);else{const n=vr(e[16]);Gs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ws{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Gs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Sr(t,n),on(e,n))}this._attachedToViewContainer=!1}Tr(this._lView[1],this._lView)}onDestroy(t){bi(this._lView[1],this._lView,null,t)}markForCheck(){Li(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Kt(!0);try{Fi(t,e,n)}finally{Kt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Lr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ks extends Ws{constructor(t){super(t),this._view=t}detectChanges(){Vi(this._view)}checkNoChanges(){!function(t){Kt(!0);try{Vi(t)}finally{Kt(!1)}}(this._view)}get context(){return null}}const $s=Xs;let Ys=(()=>{class t{}return t.__NG_ELEMENT_ID__=$s,t.__ChangeDetectorRef__=!0,t})();function Xs(t=!1){return function(t,e,n){if(!n&&pt(t)){const n=Nt(t.index,e);return new Ws(n,n)}return 47&t.type?new Ws(e[16],e):null}(Ht(),qt(),t)}const Js=[new Vs],Zs=new Hs([new Ns]),ta=new zs(Js),ea=function(){return oa(Ht(),qt())};let na=(()=>{class t{}return t.__NG_ELEMENT_ID__=ea,t})();const ra=na,ia=class extends ra{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ui(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),hi(e,n,t),new Ws(n)}};function oa(t,e){return 4&t.type?new ia(e,t,Cs(t,e)):null}class sa{}class aa{}const ua=function(){return pa(Ht(),qt())};let ca=(()=>{class t{}return t.__NG_ELEMENT_ID__=ua,t})();const la=ca,ha=class extends la{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Cs(this._hostTNode,this._hostLView)}get injector(){return new Ge(this._hostTNode,this._hostLView)}get parentInjector(){const t=Re(this._hostTNode,this._hostLView);if(Se(t)){const e=Ie(t,this._hostLView),n=Te(t);return new Ge(e[1].data[n+8],e)}return new Ge(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=da(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(sa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ha(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=lt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-lt?(e[4]=n[i],rn(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Dr(i,o),a=n[11],u=kr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Lr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),rn(fa(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=da(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Sr(this._lContainer,e);n&&(on(fa(this._lContainer),e),Tr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Sr(this._lContainer,e);return n&&null!=on(fa(this._lContainer),e)?new Ws(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function da(t){return t[8]}function fa(t){return t[8]||(t[8]=[])}function pa(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=jt(t,e);xr(n,kr(n,r),i,function(t,e){return Tt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ni(r,e,i,t),Mi(e,n)}return new ha(n,t,e)}const ga={};class ya extends _s{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new ba(e,this.ngModule)}}function ma(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const va=new Je("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>pr});class ba extends vs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Xr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ma(this.componentDef.inputs)}get outputs(){return ma(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ga,i);return o!==ga||r===ga?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ts,It),s=i.get(As,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Tt(t))return t.selectRootElement(e,n===D.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Or(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:pr,clean:qi,playerHandler:null,flags:0},d=vi(0,null,null,1,0,null,null,null,null,null),f=ui(null,d,h,l,null,null,o,a,s,i);let p,g;re(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ci(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Gi(a,u,!0),null!==t&&(_e(i,t,u),null!==a.classes&&Ur(i,t,a.classes),null!==a.styles&&Vr(i,t,a.styles)));const c=r.createRenderer(t,e),l=ui(n,mi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(De(ke(a,n),s,e.type),Si(s,a),Ii(a,n.length,1)),Mi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)_e(a,c,["ng-version",ks.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Wr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&_e(a,c,t),e&&e.length>0&&Ur(a,c,e.join(" "))}if(g=kt(d,ct),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Ht();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),xi(t,r,e,li(t,e,1,null),n));const i=He(e,t,r.directiveStart,r);fr(i,e);const o=jt(r,e);return o&&fr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Ht();e.contentQueries(1,s,t.directiveStart)}const a=Ht();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(le(a.index),Oi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ei(e,s)),s}(t,this.componentDef,f,h,[lo]),hi(d,f,null)}finally{ue()}return new _a(this.componentType,p,Cs(g,f),f,g)}}class _a extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Ks(r),this.componentType=t}get injector(){return new Ge(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const wa=new Map;class Ca extends sa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ya(this);const n=ut(t),r=t[K]||null;r&&cs(r),this._bootstrapComponents=gr(n.bootstrap),this._r3Injector=eo(t,e,[{provide:sa,useValue:this},{provide:_s,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=co.THROW_IF_NOT_FOUND,n=A.Default){return t===co||t===sa||t===Wi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Oa extends aa{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,wa.get(i),n),wa.set(i,n));const o=gr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ca(this.moduleType,t)}}function Ea(t,e,n){const r=$t()+t,i=qt();return i[r]===Jr?Co(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Sa(t,e,n,r){return Ta(qt(),$t(),t,e,n,r)}function Ta(t,e,n,r,i,o){const s=e+n;return Oo(t,s,i)?Co(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===Jr?void 0:n}(t,s+1)}function Ia(t,e){const n=Bt();let r;const i=t+ct;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new y("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=mt(r.type)),s=k(Io);try{const t=Ae(!1),e=o();return Ae(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,qt(),i,e),e}finally{k(s)}}function xa(t,e,n){const r=t+ct,i=qt(),o=function(t,e){return t[e]}(i,r);return function(t,e){return bo.isWrapped(e)&&(e=bo.unwrap(e),t[Vt.lFrame.bindingIndex]=Jr),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?Ta(i,$t(),e,o.transform,n,o):o.transform(n))}const Aa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function ja(){return this._results[vo()]()}class ka{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=vo(),n=ka.prototype;n[e]||(n[e]=ja)}get changes(){return this._changes||(this._changes=new Aa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=en(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Na{constructor(t){this.queryList=t,this.matches=null}clone(){return new Na(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Pa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Qa(t,e).matches&&this.queries[e].setDirty()}}class Ra{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Da{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Da(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ma{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ma(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,La(e,i)),this.matchTNodeWithReadOption(t,e,Be(e,t,i,!1,!1))}else n===na?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Be(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Es||r===ca||r===na&&4&e.type)this.addMatch(e.index,-2);else{const n=Be(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function La(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Fa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Cs(t,e):4&t.type?oa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Es?Cs(e,t):n===na?oa(e,t):n===ca?pa(e,t):void 0}(t,e,r):He(t,t[1],n,e)}function Va(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Fa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ua(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Va(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=lt;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ua(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ua(n[1],n,i,r)}}}}}return r}function qa(t){const e=qt(),n=Bt(),r=Zt();te(r+1);const i=Qa(n,r);if(t.dirty&&Rt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ua(n,e,r,[]):Va(n,e,i,r);t.reset(o,Ss),t.notifyOnChanges()}return!0}return!1}function Ba(t,e,n,r){const i=Bt();if(i.firstCreatePass){const o=Ht();(function(t,e,n){null===t.queries&&(t.queries=new Da),t.queries.track(new Ma(e,n))})(i,new Ra(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new ka(4==(4&n));bi(t,e,r,r.destroy),null===e[19]&&(e[19]=new Pa),e[19].queries.push(new Na(r))}(i,qt(),n)}function Ha(){return t=qt(),e=Zt(),t[19].queries[e].queryList;var t,e}function Qa(t,e){return t.queries.getByIndex(e)}function za(t=A.Default){const e=Xs(!0);if(null!=e||t&A.Optional)return e;b("ChangeDetectorRef")}const Ga=new Je("Application Initializer");let Wa=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ws,this.reject=ws,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Po(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(yn(Ga,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Ka=new Je("AppId"),$a={provide:Ka,useFactory:function(){return`${Ya()}${Ya()}${Ya()}`},deps:[]};function Ya(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Xa=new Je("Platform Initializer"),Ja=new Je("Platform ID"),Za=new Je("appBootstrapListener");let tu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const eu=new Je("LocaleId"),nu=new Je("DefaultCurrencyCode");class ru{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const iu=function(t){return new Oa(t)},ou=iu,su=function(t){return Promise.resolve(iu(t))},au=function(t){const e=iu(t),n=gr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new ba(n)),t},[]);return new ru(e,n)},uu=au,cu=function(t){return Promise.resolve(au(t))};let lu=(()=>{class t{constructor(){this.compileModuleSync=ou,this.compileModuleAsync=su,this.compileModuleAndAllComponentsSync=uu,this.compileModuleAndAllComponentsAsync=cu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const hu=(()=>Promise.resolve(0))();function du(t){"undefined"==typeof Zone?hu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class fu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Aa(!1),this.onMicrotaskEmpty=new Aa(!1),this.onStable=new Aa(!1),this.onError=new Aa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=U.requestAnimationFrame,e=U.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(U,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,yu(t),gu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),yu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return mu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),vu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return mu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),vu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,yu(t),gu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,pu,ws,ws);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const pu={};function gu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function mu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vu(t){t._nesting--,gu(t)}class bu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Aa,this.onMicrotaskEmpty=new Aa,this.onStable=new Aa,this.onError=new Aa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let _u=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fu.assertNotInAngularZone(),du(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())du(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(yn(fu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),wu=(()=>{class t{constructor(){this._applications=new Map,Su.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Su.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class Cu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Ou(t){Su=t}let Eu,Su=new Cu,Tu=!0,Iu=!1;function xu(){return Iu=!0,Tu}function Au(){if(Iu)throw new Error("Cannot enable prod mode after platform setup.");Tu=!1}const ju=new Je("AllowMultipleToken");class ku{constructor(t,e){this.name=t,this.token=e}}function Nu(t,e,n=[]){const r=`Platform: ${e}`,i=new Je(r);return(e=[])=>{let o=Pu();if(!o||o.injector.get(ju,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:$i,useValue:"platform"});!function(t){if(Eu&&!Eu.destroyed&&!Eu.injector.get(ju,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Eu=t.get(Ru);const e=t.get(Xa,null);e&&e.forEach(t=>t())}(co.create({providers:t,name:r}))}return function(t){const e=Pu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Pu(){return Eu&&!Eu.destroyed?Eu:null}let Ru=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new bu:("zone.js"===t?void 0:t)||new fu({enableLongStackTrace:xu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:fu,useValue:n}];return n.run(()=>{const e=co.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(dr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Lu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Po(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Wa);return t.runInitializers(),t.donePromise.then(()=>(cs(i.injector.get(eu,as)||as),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Du({},e);return function(t,e,n){const r=new Oa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Mu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(yn(co))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Du(t,e){return Array.isArray(e)?e.reduce(Du,t):Object.assign(Object.assign({},t),e)}let Mu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{fu.assertNotInAngularZone(),du(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{fu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof vs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(sa),i=n.create(co.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(_u,null),a=s&&i.injector.get(wu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Lu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Lu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Za,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(yn(fu),yn(co),yn(dr),yn(_s),yn(Wa))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Lu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Fu{}class Vu{}const Uu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let qu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Uu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Bu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Bu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(yn(lu),yn(Vu,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Bu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Hu=function(t){return null},Qu=Nu(null,"core",[{provide:Ja,useValue:"unknown"},{provide:Ru,deps:[co]},{provide:wu,deps:[]},{provide:tu,deps:[]}]),zu=[{provide:Mu,useClass:Mu,deps:[fu,co,dr,_s,Wa]},{provide:va,deps:[fu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Wa,useClass:Wa,deps:[[new _n,Ga]]},{provide:lu,useClass:lu,deps:[]},$a,{provide:Hs,useFactory:function(){return Zs},deps:[]},{provide:zs,useFactory:function(){return ta},deps:[]},{provide:eu,useFactory:function(t){return cs(t=t||"undefined"!=typeof $localize&&$localize.locale||as),t},deps:[[new bn(eu),new _n,new wn]]},{provide:nu,useValue:"USD"}];let Gu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(yn(Mu))},t.\u0275mod=nt({type:t}),t.\u0275inj=w({providers:zu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return E}),n.d(e,"c",function(){return L}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return N}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return B}),n.d(e,"m",function(){return W}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return k}),n.d(e,"p",function(){return y}),n.d(e,"q",function(){return m}),n.d(e,"r",function(){return b}),n.d(e,"s",function(){return R}),n.d(e,"t",function(){return _}),n.d(e,"u",function(){return p}),n.d(e,"v",function(){return g}),n.d(e,"w",function(){return C}),n.d(e,"x",function(){return v}),n.d(e,"y",function(){return w}),n.d(e,"z",function(){return j}),n.d(e,"A",function(){return I}),n.d(e,"B",function(){return D}),n.d(e,"C",function(){return M}),n.d(e,"D",function(){return P}),n.d(e,"E",function(){return G}),n.d(e,"F",function(){return z}),n.d(e,"G",function(){return x}),n.d(e,"H",function(){return q}),n.d(e,"I",function(){return H}),n.d(e,"J",function(){return Q});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return f().indexOf("Electron/")>=0}function _(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function C(){return!1}var O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return Object(r.c)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?S(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new O(i,a,r);return u},t}();function S(t,e){return t.replace(T,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var T=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var A=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},j=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},k=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin};function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function Q(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var z=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function W(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return E}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return C});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[v,u.A,[new u.B,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Qb(u.C))},t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.3",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.19",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Qb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=Object(r.Gb)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Qb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Qb)(s).location;return new b(Object(r.Qb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(a),r.Qb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(y),r.Qb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w(Object(r.Qb)(y),Object(r.Qb)(a))}function O(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.mb;class T{}let I=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class x{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new x(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new j(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new j(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(r.t))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class j{constructor(t,e){this.record=t,this.view=e}}let k=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){P("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){P("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function P(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}class R{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class D{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const M=new D,L=new R;let F=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Object(r.rb)(e))return M;if(Object(r.sb)(e))return L;throw n=t,Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.vb)(n)}'`);var n}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Sb())},t.\u0275pipe=r.Jb({name:"async",type:t,pure:!1}),t})(),V=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[{provide:T,useClass:I}]}),t})();function U(t){return"server"===t}let q=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new B(Object(r.Qb)(s),window)}),t})();class B{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=H(this.window.history)||H(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function H(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Q extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new Q,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=G||(G=document.querySelector("base"),G)?G.getAttribute("href"):null;return null==e?null:(n=e,z||(z=document.createElement("a")),z.setAttribute("href",n),"/"===z.pathname.charAt(0)?z.pathname:"/"+z.pathname);var n}resetBaseElement(){G=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let z,G=null;const W=new r.r("TRANSITION_ID"),K=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[W,s,r.s],multi:!0}];class ${static init(){Object(r.X)(new $)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Y=new r.r("EventManagerPlugins");let X=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Y),r.Qb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class J{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Z=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),tt=(()=>{class t extends Z{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nt=/%COMP%/g;function rt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?rt(t,i,n):(i=i.replace(nt,t),n.push(i))}return n}function it(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ot=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new st(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new at(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new ut(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=rt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(X),r.Qb(tt),r.Qb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class st{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(et[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=et[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=et[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,it(n)):this.eventManager.addEventListener(t,e,it(n))}}class at extends st{constructor(t,e,n,r){super(t),this.component=n;const i=rt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(nt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(nt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ut extends st{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=rt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ct=(()=>{class t extends J{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const lt=["alt","control","meta","shift"],ht={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ft={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let pt=(()=>{class t extends J{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(lt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&dt.hasOwnProperty(e)&&(e=dt[e]))}return ht[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),lt.forEach(r=>{r!=n&&(0,ft[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const gt=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){Q.makeCurrent(),$.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],yt=Object(r.S)(r.W,"browser",gt),mt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Y,useClass:ct,multi:!0,deps:[s,r.A,r.C]},{provide:Y,useClass:pt,multi:!0,deps:[s]},[],{provide:ot,useClass:ot,deps:[X,tt,r.c]},{provide:r.F,useExisting:ot},{provide:Z,useExisting:tt},{provide:tt,useClass:tt,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:X,useClass:X,deps:[Y,r.A]},[]];let vt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:W,useExisting:r.c},K]}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(t,12))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:mt,imports:[V,r.f]}),t})();"undefined"!=typeof window&&window;var bt=n("Cfvw"),_t=n("HDdC"),wt=n("DH7j"),Ct=n("lJxs"),Ot=n("XoHu");function Et(t,e){return new _t.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(bt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class St{}const Tt=new r.r("NgValueAccessor"),It={provide:Tt,useExisting:Object(r.U)(()=>At),multi:!0},xt=new r.r("CompositionEventMode");let At=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(xt,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Tb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([It])]}),t})();const jt=new r.r("NgValidators"),kt=new r.r("NgAsyncValidators");function Nt(t){return null!=t}function Pt(t){const e=Object(r.rb)(t)?Object(bt.a)(t):t;return Object(r.qb)(e),e}function Rt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Dt(t,e){return e.map(e=>e(t))}function Mt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Lt(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Nt);return 0==e.length?null:function(t){return Rt(Dt(t,e))}}(Mt(t)):null}function Ft(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Nt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(wt.a)(e))return Et(e,null);if(Object(Ot.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Et(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Et(t=1===t.length&&Object(wt.a)(t[0])?t[0]:t,null).pipe(Object(Ct.a)(t=>e(...t)))}return Et(t,null)}(Dt(t,e).map(Pt)).pipe(Object(Ct.a)(Rt))}}(Mt(t)):null}function Vt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ut(t){return t._rawValidators}function qt(t){return t._rawAsyncValidators}let Bt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Lt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ft(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),Ht=(()=>{class t extends Bt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Qt(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const Qt=r.Ob(Ht);class zt extends Bt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gt{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let Wt=(()=>{class t extends Gt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(zt,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})(),Kt=(()=>{class t extends Gt{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ht,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function $t(t,e){Jt(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&te(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&te(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Yt(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Zt(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Xt(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Jt(t,e,n){const r=Ut(t);null!==e.validator?t.setValidators(Vt(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=qt(t);if(null!==e.asyncValidator?t.setAsyncValidators(Vt(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Xt(e._rawValidators,n),Xt(e._rawAsyncValidators,n)}}function Zt(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=Ut(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=qt(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};Xt(e._rawValidators,t),Xt(e._rawAsyncValidators,t)}return r}function te(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ee(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ne="VALID",re="INVALID",ie="PENDING",oe="DISABLED";function se(t){return(le(t)?t.validators:t)||null}function ae(t){return Array.isArray(t)?Lt(t):t||null}function ue(t,e){return(le(e)?e.asyncValidators:t)||null}function ce(t){return Array.isArray(t)?Ft(t):t||null}function le(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class he{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=ae(this._rawValidators),this._composedAsyncValidatorFn=ce(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ne}get invalid(){return this.status===re}get pending(){return this.status==ie}get disabled(){return this.status===oe}get enabled(){return this.status!==oe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=ae(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ce(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ie,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=oe,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ne,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ne&&this.status!==ie||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oe:ne}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ie,this._hasOwnPendingAsyncValidator=!0;const e=Pt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof fe?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof pe&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?oe:this.errors?re:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ie)?ie:this._anyControlsHaveStatus(re)?re:ne}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){le(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class de extends he{constructor(t=null,e,n){super(se(e),ue(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ee(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ee(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class fe extends he{constructor(t,e,n){super(se(e),ue(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof de?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class pe extends he{constructor(t,e,n){super(se(e),ue(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof de?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let ge=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const ye={provide:Tt,useExisting:Object(r.U)(()=>me),multi:!0};let me=(()=>{class t extends St{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Tb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([ye]),r.xb]}),t})(),ve=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();const be=new r.r("NgModelWithFormControlWarning"),_e={provide:Ht,useExisting:Object(r.U)(()=>we)};let we=(()=>{class t extends Ht{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zt(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return $t(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Yt(t.control||null,t,!1),ee(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(Yt(e||null,t),n instanceof de&&($t(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){Jt(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return Zt(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Jt(this.form,this,!1),this._oldForm&&Zt(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(jt,10),r.Kb(kt,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Tb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([_e]),r.xb,r.yb]}),t})();const Ce={provide:zt,useExisting:Object(r.U)(()=>Oe)};let Oe=(()=>{class t extends zt{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===At?n=t:Object.getPrototypeOf(t.constructor)===St?r=t:i=t}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ht,13),r.Kb(jt,10),r.Kb(kt,10),r.Kb(Tt,10),r.Kb(be,8))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.zb([Ce]),r.xb,r.yb]}),t._ngModelWarningSentOnce=!1,t})();const Ee={provide:jt,useExisting:Object(r.U)(()=>Se),multi:!0};let Se=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(t){return null==(e=t.value)||0===e.length?{required:!0}:null;var e}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Bb("required",e.required?"":null)},inputs:{required:"required"},features:[r.zb([Ee])]}),t})(),Te=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[ve]]}),t})(),Ie=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[Te]}),t})(),xe=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:be,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[Te]}),t})();var Ae=n("LRne"),je=n("XNiG"),ke=n("9ppp");class Ne extends je.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ke.a;return this._value}next(t){super.next(this._value=t)}}var Pe=n("z+Ro"),Re=n("7o/Q");class De extends Re.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Me extends Re.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Le=n("SeVD");function Fe(t,e,n,r,i=new Me(t,n,r)){if(!i.closed)return e instanceof _t.a?e.subscribe(i):Object(Le.a)(e)(i)}var Ve=n("yCtX");const Ue={};class qe{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Be(t,this.resultSelector))}}class Be extends De{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ue),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Fe(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Ue?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const He=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Qe=n("bHdf");function ze(...t){return Object(Qe.a)(1)(Object(Ae.a)(...t))}var Ge=n("EY2u");function We(t){return new _t.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(bt.a)(n):Object(Ge.b)()).subscribe(e)})}var Ke=n("EQ5u"),$e=n("zx2A");function Ye(t,e){return"function"==typeof e?n=>n.pipe(Ye((n,r)=>Object(bt.a)(t(n,r)).pipe(Object(Ct.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Xe(t))}class Xe{constructor(t){this.project=t}call(t,e){return e.subscribe(new Je(t,this.project))}}class Je extends $e.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new $e.a(this),r=this.destination;r.add(n),this.innerSubscription=Object($e.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ze=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function tn(t){return e=>0===t?Object(Ge.b)():e.lift(new en(t))}class en{constructor(t){if(this.total=t,this.total<0)throw new Ze}call(t,e){return e.subscribe(new nn(t,this.total))}}class nn extends Re.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function rn(...t){const e=t[t.length-1];return Object(Pe.a)(e)?(t.pop(),n=>ze(t,n,e)):e=>ze(t,e)}function on(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new sn(t,e,n))}}class sn{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new an(t,this.accumulator,this.seed,this.hasSeed))}}class an extends Re.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function un(t,e){return function(n){return n.lift(new cn(t,e))}}class cn{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ln(t,this.predicate,this.thisArg))}}class ln extends Re.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function hn(t){return function(e){const n=new dn(t),r=e.lift(n);return n.caught=r}}class dn{constructor(t){this.selector=t}call(t,e){return e.subscribe(new fn(t,this.selector,this.caught))}}class fn extends $e.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new $e.a(this);this.add(r);const i=Object($e.c)(n,r);i!==r&&this.add(i)}}}var pn=n("5+tZ");function gn(t,e){return Object(pn.a)(t,e,1)}function yn(t){return function(e){return 0===t?Object(Ge.b)():e.lift(new mn(t))}}class mn{constructor(t){if(this.total=t,this.total<0)throw new Ze}call(t,e){return e.subscribe(new vn(t,this.total))}}class vn extends Re.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function bn(t=Cn){return e=>e.lift(new _n(t))}class _n{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new wn(t,this.errorFactory))}}class wn extends Re.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(z_){t=z_}this.destination.error(t)}}}function Cn(){return new He}function On(t=null){return e=>e.lift(new En(t))}class En{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Sn(t,this.defaultValue))}}class Sn extends Re.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Tn=n("SpAZ");function In(t,e){const n=arguments.length>=2;return r=>r.pipe(t?un((e,n)=>t(e,n,r)):Tn.a,tn(1),n?On(e):bn(()=>new He))}var xn=n("vkgz"),An=n("x+ZX"),jn=n("quSY");class kn{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Nn(t,this.callback))}}class Nn extends Re.a{constructor(t,e){super(t),this.add(new jn.a(e))}}class Pn{constructor(t,e){this.id=t,this.url=e}}class Rn extends Pn{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dn extends Pn{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Mn extends Pn{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ln extends Pn{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fn extends Pn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vn extends Pn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Un extends Pn{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qn extends Pn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bn extends Pn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hn{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zn{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kn{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $n{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Yn="primary";class Xn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Jn(t){return new Xn(t)}function Zn(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function tr(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function er(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!nr(t[i],e[i]))return!1;return!0}function nr(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function rr(t){return Array.prototype.concat.apply([],t)}function ir(t){return t.length>0?t[t.length-1]:null}function or(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function sr(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(bt.a)(Promise.resolve(t)):Object(Ae.a)(t)}function ar(t,e,n){return n?function(t,e){return er(t,e)}(t.queryParams,e.queryParams)&&ur(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>nr(t[n],e[n]))}(t.queryParams,e.queryParams)&&cr(t.root,e.root)}function ur(t,e){if(!pr(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!ur(t.children[n],e.children[n]))return!1}return!0}function cr(t,e){return lr(t,e,e.segments)}function lr(t,e,n){if(t.segments.length>n.length)return!!pr(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!pr(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!cr(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!pr(t.segments,r)&&!!t.children.primary&&lr(t.children.primary,e,i)}}class hr{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jn(this.queryParams)),this._queryParamMap}toString(){return mr.serialize(this)}}class dr{constructor(t,e){this.segments=t,this.children=e,this.parent=null,or(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vr(this)}}class fr{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Jn(this.parameters)),this._parameterMap}toString(){return Sr(this)}}function pr(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class gr{}class yr{parse(t){const e=new jr(t);return new hr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${br(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${wr(e)}=${wr(t)}`).join("&"):`${wr(e)}=${wr(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const mr=new yr;function vr(t){return t.segments.map(t=>Sr(t)).join("/")}function br(t,e){if(!t.hasChildren())return vr(t);if(e){const e=t.children.primary?br(t.children.primary,!1):"",n=[];return or(t.children,(t,e)=>{e!==Yn&&n.push(`${e}:${br(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return or(t.children,(t,r)=>{r===Yn&&(n=n.concat(e(t,r)))}),or(t.children,(t,r)=>{r!==Yn&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Yn?[br(t.children.primary,!1)]:[`${n}:${br(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${vr(t)}/${e[0]}`:`${vr(t)}/(${e.join("//")})`}}function _r(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wr(t){return _r(t).replace(/%3B/gi,";")}function Cr(t){return _r(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Or(t){return decodeURIComponent(t)}function Er(t){return Or(t.replace(/\+/g,"%20"))}function Sr(t){return`${Cr(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Cr(t)}=${Cr(e[t])}`).join("")}`;var e}const Tr=/^[^\/()?;=#]+/;function Ir(t){const e=t.match(Tr);return e?e[0]:""}const xr=/^[^=?&#]+/,Ar=/^[^?&#]+/;class jr{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dr([],{}):new dr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new dr(t,e)),n}parseSegment(){const t=Ir(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new fr(Or(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ir(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Ir(this.remaining);t&&(n=t,this.capture(n))}t[Or(e)]=Or(n)}parseQueryParam(t){const e=function(t){const e=t.match(xr);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Ar);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Er(e),i=Er(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Ir(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Yn);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new dr([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class kr{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Nr(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Nr(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Pr(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Pr(t,this._root).map(t=>t.value)}}function Nr(t,e){if(t===e.value)return e;for(const n of e.children){const e=Nr(t,n);if(e)return e}return null}function Pr(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Pr(t,n);if(r.length)return r.unshift(e),r}return[]}class Rr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Dr(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Mr extends kr{constructor(t,e){super(t),this.snapshot=e,Br(this,t)}toString(){return this.snapshot.toString()}}function Lr(t,e){const n=function(t,e){const n=new Ur([],{},{},"",{},Yn,e,null,t.root,-1,{});return new qr("",new Rr(n,[]))}(t,e),r=new Ne([new fr("",{})]),i=new Ne({}),o=new Ne({}),s=new Ne({}),a=new Ne(""),u=new Fr(r,i,s,a,o,Yn,e,n.root);return u.snapshot=n.root,new Mr(new Rr(u,[]),n)}class Fr{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Ct.a)(t=>Jn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Ct.a)(t=>Jn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vr(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ur{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qr extends kr{constructor(t,e){super(e),this.url=t,Br(this,e)}toString(){return Hr(this._root)}}function Br(t,e){e.value._routerState=t,e.children.forEach(e=>Br(t,e))}function Hr(t){const e=t.children.length>0?` { ${t.children.map(Hr).join(", ")} } `:"";return`${t.value}${e}`}function Qr(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,er(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),er(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!er(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),er(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function zr(t,e){return er(t.params,e.params)&&function(t,e){return pr(t,e)&&t.every((t,n)=>er(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||zr(t.parent,e.parent))}function Gr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Gr(t,e,r);return Gr(t,e)})}(t,e,n);return new Rr(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Wr(e,t),t}{const n=new Fr(new Ne((r=e.value).url),new Ne(r.params),new Ne(r.queryParams),new Ne(r.fragment),new Ne(r.data),r.outlet,r.component,r),i=e.children.map(e=>Gr(t,e));return new Rr(n,i)}}var r}function Wr(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Wr(t.children[n],e.children[n])}function Kr(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function $r(t){return"object"==typeof t&&null!=t&&t.outlets}function Yr(t,e,n,r,i){let o={};return r&&or(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new hr(n.root===t?e:Xr(n.root,t,e),o,i)}function Xr(t,e,n){const r={};return or(t.children,(t,i)=>{r[i]=t===e?n:Xr(t,e,n)}),new dr(t.segments,r)}class Jr{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Kr(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find($r);if(r&&r!==ir(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ti(t,e,n){if(t||(t=new dr([],{})),0===t.segments.length&&t.hasChildren())return ei(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if($r(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!oi(a,u,e))return o;r+=2}else{if(!oi(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new dr(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new dr(t.segments.slice(r.pathIndex),t.children),ei(e,0,i)}return r.match&&0===i.length?new dr(t.segments,{}):r.match&&!t.hasChildren()?ni(t,e,n):r.match?ei(t,0,i):ni(t,e,n)}function ei(t,e,n){if(0===n.length)return new dr(t.segments,{});{const r=function(t){return $r(t[0])?t[0].outlets:{[Yn]:t}}(n),i={};return or(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=ti(t.children[r],e,n))}),or(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new dr(t.segments,i)}}function ni(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if($r(o)){const t=ri(o.outlets);return new dr(r,t)}if(0===i&&Kr(n[0])){r.push(new fr(t.segments[e].path,ii(n[0]))),i++;continue}const s=$r(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Kr(a)?(r.push(new fr(s,ii(a))),i+=2):(r.push(new fr(s,{})),i++)}return new dr(r,{})}function ri(t){const e={};return or(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=ni(new dr([],{}),0,t))}),e}function ii(t){const e={};return or(t,(t,n)=>e[n]=`${t}`),e}function oi(t,e,n){return t==n.path&&er(e,n.parameters)}class si{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Qr(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Dr(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),or(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Dr(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=Dr(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Kn(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Gn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Qr(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),ai(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function ai(t){Qr(t.value),t.children.forEach(ai)}class ui{constructor(t,e){this.routes=t,this.module=e}}function ci(t){return"function"==typeof t}function li(t){return t instanceof hr}const hi=Symbol("INITIAL_VALUE");function di(){return Ye(t=>function(...t){let e,n;return Object(Pe.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(wt.a)(t[0])&&(t=t[0]),Object(Ve.a)(t,n).lift(new qe(e))}(t.map(t=>t.pipe(tn(1),rn(hi)))).pipe(on((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==hi)return t;if(r===hi&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||li(r))return r}return t},t)},hi),un(t=>t!==hi),Object(Ct.a)(t=>li(t)?t:!0===t),tn(1)))}let fi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[ao]},encapsulation:2}),t})();function pi(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];gi(r,yi(e,r))}}function gi(t,e){t.children&&pi(t.children,e)}function yi(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function mi(t){const e=t.children&&t.children.map(mi),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Yn&&(n.component=fi),n}function vi(t){return t.outlet||Yn}function bi(t,e){const n=t.filter(t=>vi(t)===e);return n.push(...t.filter(t=>vi(t)!==e)),n}const _i={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function wi(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},_i):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||tr)(n,t,e);if(!i)return Object.assign({},_i);const o={};or(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Ci(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Oi(t,e,n)&&vi(n)!==Yn)}(t,n,r)){const i=new dr(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&vi(o)!==Yn){const n=new dr([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[vi(o)]=n}return i}(t,e,r,new dr(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Oi(t,e,n))}(t,n,r)){const o=new dr(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Oi(t,n,a)&&!i[vi(a)]){const n=new dr([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[vi(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new dr(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Oi(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Ei(t,e,n,r){return!!(vi(t)===r||r!==Yn&&Oi(e,n,t))&&("**"===t.path||wi(e,t,n).matched)}function Si(t,e,n){return 0===e.length&&!t.children[n]}class Ti{constructor(t){this.segmentGroup=t||null}}class Ii{constructor(t){this.urlTree=t}}function xi(t){return new _t.a(e=>e.error(new Ti(t)))}function Ai(t){return new _t.a(e=>e.error(new Ii(t)))}function ji(t){return new _t.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class ki{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Ci(this.urlTree.root,[],[],this.config).segmentGroup,e=new dr(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Yn).pipe(Object(Ct.a)(t=>this.createUrlTree(Ni(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(hn(t=>{if(t instanceof Ii)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Ti)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Yn).pipe(Object(Ct.a)(e=>this.createUrlTree(Ni(e),t.queryParams,t.fragment))).pipe(hn(t=>{if(t instanceof Ti)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new dr([],{[Yn]:t}):t;return new hr(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Ct.a)(t=>new dr([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(bt.a)(r).pipe(gn(r=>{const i=n.children[r],o=bi(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(Ct.a)(t=>({segment:t,outlet:r})))}),on((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?un((e,n)=>t(e,n,r)):Tn.a,yn(1),n?On(e):bn(()=>new He))}())}expandSegment(t,e,n,r,i,o){return Object(bt.a)(n).pipe(gn(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(hn(t=>{if(t instanceof Ti)return Object(Ae.a)(null);throw t}))),In(t=>!!t),hn((t,n)=>{if(t instanceof He||"EmptyError"===t.name){if(Si(e,r,i))return Object(Ae.a)(new dr([],{}));throw new Ti(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Ei(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):xi(e):xi(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Ai(i):this.lineralizeSegments(n,i).pipe(Object(pn.a)(n=>{const i=new dr(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=wi(e,r,i);if(!s)return xi(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Ai(l):this.lineralizeSegments(r,l).pipe(Object(pn.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(Ae.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(Ct.a)(t=>(n._loadedConfig=t,new dr(r,{})))):Object(Ae.a)(new dr(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=wi(e,n,r);if(!o)return xi(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(pn.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Ci(e,s,u,o),l=new dr(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(Ct.a)(t=>new dr(s,t)));if(0===o.length&&0===c.length)return Object(Ae.a)(new dr(s,{}));const h=vi(n)===i;return this.expandSegment(r,l,o,c,h?Yn:i,!0).pipe(Object(Ct.a)(t=>new dr(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Ae.a)(new ui(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Ae.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(pn.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Ct.a)(t=>(e._loadedConfig=t,t))):function(t){return new _t.a(e=>e.error(Zn(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Ae.a)(new ui([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Ae.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&ci(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!ci(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return sr(o)});return Object(Ae.a)(i).pipe(di(),Object(xn.a)(t=>{if(!li(t))return;const e=Zn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Ct.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Ae.a)(n);if(r.numberOfChildren>1||!r.children.primary)return ji(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new hr(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return or(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return or(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new dr(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ni(t){const e={};for(const n of Object.keys(t.children)){const r=Ni(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new dr(t.segments.concat(e.segments),e.children)}return t}(new dr(t.segments,e))}class Pi{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Ri{constructor(t,e){this.component=t,this.route=e}}function Di(t,e,n){const r=t._root;return Li(r,e?e._root:null,n,[r.value])}function Mi(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Li(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Dr(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!pr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!pr(t.url,e.url)||!er(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zr(t,e)||!er(t.queryParams,e.queryParams);case"paramsChange":default:return!zr(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Pi(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Li(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ri(a.outlet.component,s))}else s&&Fi(e,a,i),i.canActivateChecks.push(new Pi(r)),Li(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),or(o,(t,e)=>Fi(t,n.getContext(e),i)),i}function Fi(t,e,n){const r=Dr(t),i=t.value;or(r,(t,r)=>{Fi(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Ri(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Vi{}function Ui(t){return new _t.a(e=>e.error(t))}class qi{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Ci(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Yn);if(null===e)return null;const n=new Ur([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Yn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Rr(n,e),i=new qr(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Vr(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=bi(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!Bi(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Yn?-1:e.value.outlet===Yn?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Si(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Ei(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?ir(n).parameters:{};i=new Ur(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zi(t),vi(t),t.component,t,Hi(e),Qi(e)+n.length,Gi(t))}else{const r=wi(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Ur(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zi(t),vi(t),t.component,t,Hi(e),Qi(e)+o.length,Gi(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Ci(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Rr(i,t)]}if(0===a.length&&0===c.length)return[new Rr(i,[])];const l=vi(t)===r,h=this.processSegment(a,u,c,l?Yn:r);return null===h?null:[new Rr(i,h)]}}function Bi(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Hi(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Qi(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function zi(t){return t.data||{}}function Gi(t){return t.resolve||{}}function Wi(t){return Ye(e=>{const n=t(e);return n?Object(bt.a)(n).pipe(Object(Ct.a)(()=>e)):Object(Ae.a)(e)})}class Ki extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const $i=new r.r("ROUTES");class Yi{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(Ct.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new ui(rr(i.injector.get($i,void 0,r.q.Self|r.q.Optional)).map(mi),i)}),hn(t=>{throw e._loader$=void 0,t}));return e._loader$=new Ke.a(n,()=>new je.a).pipe(Object(An.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(bt.a)(this.loader.load(t)):sr(t()).pipe(Object(pn.a)(t=>t instanceof r.w?Object(Ae.a)(t):Object(bt.a)(this.compiler.compileModuleAsync(t))))}}class Xi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ji,this.attachRef=null}}class Ji{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Xi,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Zi{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function to(t){throw t}function eo(t,e,n){return e.parse("/")}function no(t,e){return Object(Ae.a)(null)}let ro=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new je.a,this.errorHandler=to,this.malformedUriErrorHandler=eo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:no,afterPreactivation:no},this.urlHandlingStrategy=new Zi,this.routeReuseStrategy=new Ki,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new hr(new dr([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Yi(s,a,t=>this.triggerEvent(new Hn(t)),t=>this.triggerEvent(new Qn(t))),this.routerState=Lr(this.currentUrlTree,this.rootComponentType),this.transitions=new Ne({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(un(t=>0!==t.id),Object(Ct.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Ye(t=>{let n=!1,r=!1;return Object(Ae.a)(t).pipe(Object(xn.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ye(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Ae.a)(t).pipe(Ye(t=>{const n=this.transitions.getValue();return e.next(new Rn(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Ge.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Ye(t=>function(t,e,n,r,i){return new ki(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Ct.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(xn.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(pn.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new qi(t,e,n,r,i,o).recognize();return null===s?Ui(new Vi):Object(Ae.a)(s)}catch(z_){return Ui(z_)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Ct.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(xn.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Fn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Rn(n,this.serializeUrl(r),i,o);e.next(a);const u=Lr(r,this.rootComponentType).snapshot;return Object(Ae.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Ge.a}),Wi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(xn.a)(t=>{const e=new Vn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Ct.a)(t=>Object.assign(Object.assign({},t),{guards:Di(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(pn.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Ae.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(bt.a)(t).pipe(Object(pn.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Ae.a)(!0);const s=o.map(o=>{const s=Mi(o,e,i);let a;if(function(t){return t&&ci(t.canDeactivate)}(s))a=sr(s.canDeactivate(t,e,n,r));else{if(!ci(s))throw new Error("Invalid CanDeactivate guard");a=sr(s(t,e,n,r))}return a.pipe(In())});return Object(Ae.a)(s).pipe(di())}(t.component,t.route,n,e,r)),In(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(pn.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(bt.a)(e).pipe(gn(e=>ze(function(t,e){return null!==t&&e&&e(new zn(t)),Object(Ae.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Wn(t)),Object(Ae.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>We(()=>{const i=e.guards.map(i=>{const o=Mi(i,e.node,n);let s;if(function(t){return t&&ci(t.canActivateChild)}(o))s=sr(o.canActivateChild(r,t));else{if(!ci(o))throw new Error("Invalid CanActivateChild guard");s=sr(o(r,t))}return s.pipe(In())});return Object(Ae.a)(i).pipe(di())}));return Object(Ae.a)(i).pipe(di())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Ae.a)(!0);const i=r.map(r=>We(()=>{const i=Mi(r,e,n);let o;if(function(t){return t&&ci(t.canActivate)}(i))o=sr(i.canActivate(e,t));else{if(!ci(i))throw new Error("Invalid CanActivate guard");o=sr(i(e,t))}return o.pipe(In())}));return Object(Ae.a)(i).pipe(di())}(t,e.route,n))),In(t=>!0!==t,!0))}(r,o,t,e):Object(Ae.a)(n)),Object(Ct.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(xn.a)(t=>{if(li(t.guardsResult)){const e=Zn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Un(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),un(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Mn(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Wi(t=>{if(t.guards.canActivateChecks.length)return Object(Ae.a)(t).pipe(Object(xn.a)(t=>{const e=new qn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Ye(t=>{let n=!1;return Object(Ae.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(pn.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Ae.a)(t);let o=0;return Object(bt.a)(n).pipe(gn(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Ae.a)({});const o={};return Object(bt.a)(i).pipe(Object(pn.a)(i=>function(t,e,n,r){const i=Mi(t,e,r);return sr(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(xn.a)(t=>{o[i]=t}))),yn(1),Object(pn.a)(()=>Object.keys(o).length===i.length?Object(Ae.a)(o):Ge.a))}(t._resolve,t,e,r).pipe(Object(Ct.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Vr(t,n).resolve),null)))}(t.route,e,r,i)),Object(xn.a)(()=>o++),yn(1),Object(pn.a)(e=>o===n.length?Object(Ae.a)(t):Ge.a))})),Object(xn.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Mn(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(xn.a)(t=>{const e=new Bn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Wi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Ct.a)(t=>{const e=function(t,e,n){const r=Gr(t,e._root,n?n._root:void 0);return new Mr(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(xn.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Ct.a)(t=>(new si(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(xn.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Mn(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new kn(i))),hn(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=li(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Mn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ln(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(bd){t.reject(bd)}}var i;return Ge.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){pi(t),this.config=t.map(mi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Yr(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Jr(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return or(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Jr(n,e,r)}(n);if(o.toRoot())return Yr(e.root,new dr([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Zr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Zr(t,t===e.root,0)}const r=Kr(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Zr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?ei(s.segmentGroup,s.index,o.commands):ti(s.segmentGroup,s.index,o.commands);return Yr(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=li(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(z_){e=this.malformedUriErrorHandler(z_,this.urlSerializer,t)}return e}isActive(t,e){if(li(t))return ar(this.currentUrlTree,t,e);const n=this.parseUrl(t);return ar(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Dn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.N),r.Qb(gr),r.Qb(Ji),r.Qb(w),r.Qb(r.s),r.Qb(r.x),r.Qb(r.i),r.Qb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),io=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new je.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:so(this.skipLocationChange),replaceUrl:so(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:so(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ro),r.Kb(Fr),r.Rb("tabindex"),r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Tb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})(),oo=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new je.a,this.subscription=t.events.subscribe(t=>{t instanceof Dn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:so(this.skipLocationChange),replaceUrl:so(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:so(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ro),r.Kb(Fr),r.Kb(y))},t.\u0275dir=r.Fb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Tb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Pb("href",e.href,r.dc),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function so(t){return""===t||!!t}let ao=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Yn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new uo(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Ji),r.Kb(r.Q),r.Kb(r.j),r.Rb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class uo{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Fr?this.route:t===Ji?this.childContexts:this.parent.get(t,e)}}class co{}class lo{preload(t,e){return Object(Ae.a)(null)}}let ho=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Yi(e,n,e=>t.triggerEvent(new Hn(e)),e=>t.triggerEvent(new Qn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(un(t=>t instanceof Dn),gn(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(bt.a)(n).pipe(Object(Qe.a)(),Object(Ct.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(Ae.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(pn.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(ro),r.Qb(r.x),r.Qb(r.i),r.Qb(r.s),r.Qb(co))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),fo=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Rn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Dn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $n&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new $n(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(ro),r.Qb(q),r.Qb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const po=new r.r("ROUTER_CONFIGURATION"),go=new r.r("ROUTER_FORROOT_GUARD"),yo=[w,{provide:gr,useClass:yr},{provide:ro,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new ro(null,t,e,n,r,i,s,rr(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[gr,Ji,w,r.s,r.x,r.i,$i,po,[class{},new r.B],[class{},new r.B]]},Ji,{provide:Fr,useFactory:function(t){return t.routerState.root},deps:[ro]},{provide:r.x,useClass:r.K},ho,lo,class{preload(t,e){return e().pipe(hn(()=>Object(Ae.a)(null)))}},{provide:po,useValue:{enableTracing:!1}}];function mo(){return new r.z("Router",ro)}let vo=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[yo,Co(e),{provide:go,useFactory:wo,deps:[[ro,new r.B,new r.J]]},{provide:po,useValue:n||{}},{provide:y,useFactory:_o,deps:[a,[new r.p(v),new r.B],po]},{provide:fo,useFactory:bo,deps:[ro,q,po]},{provide:co,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:lo},{provide:r.z,multi:!0,useFactory:mo},[Oo,{provide:r.d,multi:!0,useFactory:Eo,deps:[Oo]},{provide:To,useFactory:So,deps:[Oo]},{provide:r.b,multi:!0,useExisting:To}]]}}static forChild(e){return{ngModule:t,providers:[Co(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(go,8),r.Qb(ro,8))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();function bo(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new fo(t,e,n)}function _o(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function wo(t){return"guarded"}function Co(t){return[{provide:r.a,multi:!0,useValue:t},{provide:$i,multi:!0,useValue:t}]}let Oo=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new je.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ro),r=this.injector.get(po);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(Ae.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(po),n=this.injector.get(ho),i=this.injector.get(fo),o=this.injector.get(ro),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function Eo(t){return t.appInitializer.bind(t)}function So(t){return t.bootstrapListener.bind(t)}const To=new r.r("Router Initializer"),Io=function(){return["/home"]};let xo=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-about-page"]],decls:10,vars:2,consts:[["id","title"],[1,"row"],[1,"card"],["src","http://drive.google.com/uc?export=view&id=1kB-YERYrwK9ZZIKfEcEJDJTUvGr_wsgD","alt","Photo",1,"aboutImage"],[1,"content"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"h2",0),r.gc(1,"About Jordan"),r.Mb(),r.Nb(2,"div",1),r.Nb(3,"div",2),r.Lb(4,"img",3),r.Nb(5,"p",4),r.gc(6,'"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."'),r.Mb(),r.Mb(),r.Mb(),r.Nb(7,"div",1),r.Nb(8,"button",5),r.gc(9,"Back to home"),r.Mb(),r.Mb()),2&t&&(r.Ab(8),r.Yb("routerLink",r.ac(1,Io)))},directives:[io],styles:["*[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}.aboutImage[_ngcontent-%COMP%]{max-width:500px;height:auto;width:100%}#title[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]{text-align:center}.content[_ngcontent-%COMP%]{margin:20px 7%}button[_ngcontent-%COMP%]{padding:14px 28px;font-size:16px;cursor:pointer;border:2px solid #e7e7e7}.row[_ngcontent-%COMP%]{text-align:center;margin:4% 0}"]}),t})();var Ao=n("D0XW"),jo=n("VRyK"),ko=n("w1tV");function No(t,e){return n=>n.lift(new Po(t,e))}class Po{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ro(t,this.compare,this.keySelector))}}class Ro extends Re.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class Do{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Mo(t,this.observables,this.project))}}class Mo extends De{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Fe(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Lo{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Fo(t,this.predicate))}}class Fo extends Re.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var Vo=n("spgP"),Uo=(n("6Uf2"),n("pxpQ")),qo=n("qgXg"),Bo=n("Ylt2");class Ho extends je.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Qo(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new ke.a;if(this.isStopped||this.hasError?o=jn.a.EMPTY:(this.observers.push(t),o=new Bo.a(this,t)),r&&t.add(t=new Uo.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||qo.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Qo{constructor(t,e){this.time=t,this.value=e}}function zo(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Ho(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Go(t,e){return e?Ye(()=>t,e):Ye(()=>t)}var Wo=n("tf+s");const Ko=new r.r("angularfire2.auth.use-emulator"),$o=new r.r("angularfire2.auth.settings"),Yo=new r.r("angularfire2.auth.tenant-id"),Xo=new r.r("angularfire2.auth.langugage-code"),Jo=new r.r("angularfire2.auth.use-device-language"),Zo=new r.r("angularfire.auth.persistence");let ts=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Vo.d(i),d=Object(Vo.h)(h),f=new je.a,p=Object(Ae.a)(void 0).pipe(Object(Uo.b)(h.outsideAngular),Ye(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(Ct.a)(()=>Object(Vo.g)(t,i,e)),Object(Ct.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Vo.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),zo({bufferSize:1,refCount:!1}));if(U(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Ae.a)(null);else{p.pipe(In()).subscribe();const t=p.pipe(Ye(t=>t.getRedirectResult().then(t=>t,()=>null)),d,zo({bufferSize:1,refCount:!1})),e=t=>new _t.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Ye(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Ye(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Go(n),Object(Wo.a)(h.outsideAngular),Object(Uo.b)(h.insideAngular)),this.user=t.pipe(Go(r),Object(Wo.a)(h.outsideAngular),Object(Uo.b)(h.insideAngular)),this.idToken=this.user.pipe(Ye(t=>t?Object(bt.a)(t.getIdToken()):Object(Ae.a)(null))),this.idTokenResult=this.user.pipe(Ye(t=>t?Object(bt.a)(t.getIdTokenResult()):Object(Ae.a)(null))),this.credential=Object(jo.a)(t,f,this.authState.pipe(un(t=>!t))).pipe(Object(Ct.a)(t=>(null==t?void 0:t.user)?t:null),Object(Wo.a)(h.outsideAngular),Object(Uo.b)(h.insideAngular))}return Object(Vo.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Vo.c),r.Qb(Vo.b,8),r.Qb(r.C),r.Qb(r.A),r.Qb(Ko,8),r.Qb($o,8),r.Qb(Yo,8),r.Qb(Xo,8),r.Qb(Jo,8),r.Qb(Zo,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(Vo.c),Object(r.Qb)(Vo.b,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(Ko,8),Object(r.Qb)($o,8),Object(r.Qb)(Yo,8),Object(r.Qb)(Xo,8),Object(r.Qb)(Jo,8),Object(r.Qb)(Zo,8))},token:t,providedIn:"any"}),t})();Object(Vo.e)(ts,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var es=n("Jgta");function ns(t){return null==t}function rs(t){return"function"==typeof t.set}function is(t,e){return rs(e)?e:t.ref(e)}function os(t,e){if("string"==typeof t)return e.stringCase();if(rs(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function ss(t,e,n="on",r=Ao.a){return new _t.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(Ct.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(ko.a)())}function as(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function us(t,e){const{payload:n,prevKey:r,key:i}=e,o=as(t,i),s=function(t,e){if(ns(e))return 0;{const n=as(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function cs(t){return(ns(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function ls(t,e,n){return function(t,e,n){return ss(t,"value","once",n).pipe(Ye(r=>{const i=[Object(Ae.a)(r)];return e.forEach(e=>i.push(ss(t,e,"on",n))),Object(jo.a)(...i).pipe(on(us,[]))}),No())}(t,e=cs(e),n)}function hs(t,e,n){const r=(e=cs(e)).map(e=>ss(t,e,"on",n));return Object(jo.a)(...r)}function ds(t,e){return function(n,r){return os(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function fs(t,e){return function(){return ss(t,"value","on",e)}}const ps=new r.r("angularfire2.realtimeDatabaseURL"),gs=new r.r("angularfire2.database.use-emulator");let ys=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Vo.d(i),this.keepUnstableUntilFirst=Object(Vo.h)(this.schedulers);const a=o,u=Object(Vo.g)(t,i,e);!es.a.auth&&s&&Object(Vo.j)(),this.database=Object(Vo.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>is(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:ds(r,"update"),set:ds(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?os(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>ls(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>hs(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return ss(t,"value","on",e).pipe(Object(Ct.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Do(t,n))}}(e),Object(Ct.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Lo(r))),Object(Ct.a)(t=>t.actions));var r}(t,hs(t,e).pipe(on((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>ls(t,r,n).pipe(Object(Ct.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>is(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>fs(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>fs(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(Ct.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Vo.c),r.Qb(Vo.b,8),r.Qb(ps,8),r.Qb(r.C),r.Qb(r.A),r.Qb(gs,8),r.Qb(Ko,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(Vo.c),Object(r.Qb)(Vo.b,8),Object(r.Qb)(ps,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(gs,8),Object(r.Qb)(Ko,8))},token:t,providedIn:"any"}),t})(),ms=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[ys]}),t})();function vs(t,e){if(1&t&&r.Lb(0,"img",12),2&t){const t=r.Vb().$implicit;r.Zb("src","http://drive.google.com/uc?export=view&id=",t.imageID,"",r.dc)}}const bs=function(t){return["/post",t]};function _s(t,e){if(1&t&&(r.Nb(0,"div",9),r.Nb(1,"h3"),r.gc(2),r.Mb(),r.Nb(3,"h5"),r.gc(4),r.Mb(),r.fc(5,vs,1,1,"img",10),r.Nb(6,"div",11),r.gc(7),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Yb("routerLink",r.bc(5,bs,t.id)),r.Ab(2),r.hc(t.title),r.Ab(2),r.hc(t.date),r.Ab(1),r.Yb("ngIf",""!=t.imageID),r.Ab(2),r.hc(t.content)}}const ws=function(){return["/about-me"]};let Cs=(()=>{class t{constructor(t){this.db=t,this.Posts=new _t.a}ngOnInit(){this.Posts=this.db.list("/posts",t=>t.orderByChild("priority")).valueChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ys))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-home-page"]],decls:18,vars:7,consts:[[1,"row"],[1,"leftcolumn"],[1,"title"],["class","card","id","post",3,"routerLink",4,"ngFor","ngForOf"],[1,"rightcolumn"],[1,"card"],[3,"routerLink"],["src","http://drive.google.com/uc?export=view&id=1kB-YERYrwK9ZZIKfEcEJDJTUvGr_wsgD","alt","Photo",1,"aboutImage",3,"routerLink"],[1,"content","limit-2"],["id","post",1,"card",3,"routerLink"],["class","postImage","alt","Photo",3,"src",4,"ngIf"],[1,"content","limit-4"],["alt","Photo",1,"postImage",3,"src"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"h2",2),r.gc(3,"Latest Posts"),r.Mb(),r.fc(4,_s,8,7,"div",3),r.Wb(5,"async"),r.Mb(),r.Nb(6,"div",4),r.Nb(7,"div",5),r.Nb(8,"h3",6),r.gc(9,"About Me"),r.Mb(),r.Lb(10,"img",7),r.Nb(11,"p",8),r.gc(12,"Some text about me in culpa qui officia deserunt mollit anim. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam"),r.Mb(),r.Mb(),r.Nb(13,"div",5),r.Nb(14,"h4"),r.gc(15,"Follow Me"),r.Mb(),r.Nb(16,"p",8),r.gc(17,"Some text.."),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(4),r.Yb("ngForOf",r.Xb(5,3,e.Posts)),r.Ab(4),r.Yb("routerLink",r.ac(5,ws)),r.Ab(2),r.Yb("routerLink",r.ac(6,ws)))},directives:[A,io,k],pipes:[F],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}body[_ngcontent-%COMP%]{font-family:Arial;padding:20px;background:#f1f1f1}.header[_ngcontent-%COMP%]{padding:15px;font-size:40px;text-align:left;background:#fff}h2.title[_ngcontent-%COMP%]{padding-left:18px}h2[_ngcontent-%COMP%]{margin:3px}.leftcolumn[_ngcontent-%COMP%]{float:left;width:65%;padding:25px 25px 25px 50px}.rightcolumn[_ngcontent-%COMP%]{float:left;width:30%;padding-left:20px;padding-top:25px}.fakeimg[_ngcontent-%COMP%]{background-color:#aaa;width:100%;padding:20px}.card[_ngcontent-%COMP%]{background-color:#fff;padding:18px}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.row[_ngcontent-%COMP%]{padding-top:20px}.footer[_ngcontent-%COMP%]{padding:20px;text-align:center;background:#ddd;margin-top:20px}.postImage[_ngcontent-%COMP%]{width:100%;max-width:485px;height:auto}.aboutImage[_ngcontent-%COMP%]{width:100%;max-width:438px;height:auto}@media screen and (max-width:800px){.leftcolumn[_ngcontent-%COMP%], .rightcolumn[_ngcontent-%COMP%]{width:100%;padding:0}}#post[_ngcontent-%COMP%]:hover{cursor:pointer}.content[_ngcontent-%COMP%]{white-space:pre-wrap}.limit-4[_ngcontent-%COMP%]{max-height:110px;-webkit-line-clamp:4}.limit-2[_ngcontent-%COMP%], .limit-4[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.limit-2[_ngcontent-%COMP%]{max-height:85px;-webkit-line-clamp:2}']}),t})();var Os,Es=new Uint8Array(16);function Ss(){if(!Os&&!(Os="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Os(Es)}for(var Ts=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Is=function(t){return"string"==typeof t&&Ts.test(t)},xs=[],As=0;As<256;++As)xs.push((As+256).toString(16).substr(1));var js=function(t,e,n){var r=(t=t||{}).random||(t.rng||Ss)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(xs[t[e+0]]+xs[t[e+1]]+xs[t[e+2]]+xs[t[e+3]]+"-"+xs[t[e+4]]+xs[t[e+5]]+"-"+xs[t[e+6]]+xs[t[e+7]]+"-"+xs[t[e+8]]+xs[t[e+9]]+"-"+xs[t[e+10]]+xs[t[e+11]]+xs[t[e+12]]+xs[t[e+13]]+xs[t[e+14]]+xs[t[e+15]]).toLowerCase();if(!Is(n))throw TypeError("Stringified UUID is invalid");return n}(r)};class ks{constructor(t,e,n,r,i){this.title=t,this.date=e,this.content=n,this.imageID=r,this.priority=i,this.title=t,this.date=e,this.content=n,this.imageID=r,this.id=js(),this.priority=i}}function Ns(){return t=>t.lift(new Ps)}class Ps{call(t,e){return e.subscribe(new Rs(t))}}class Rs extends Re.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Ds=n("zIRd"),Ms=n("qOnz"),Ls=n("q/0M"),Fs=function(t,e){return(Fs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Vs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Us,qs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Bs=Bs||{},Hs=qs||self;function Qs(){}function zs(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Gs(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ws="closure_uid_"+(1e9*Math.random()>>>0),Ks=0;function $s(t,e,n){return t.call.apply(t.bind,arguments)}function Ys(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Xs(t,e,n){return(Xs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$s:Ys).apply(null,arguments)}function Js(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Zs(){return Date.now()}function ta(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ea(){this.j=this.j,this.i=this.i}ea.prototype.j=!1,ea.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Ws)&&t[Ws]||(t[Ws]=++Ks)}(this)},ea.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var na=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ra=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ia(t){return Array.prototype.concat.apply([],arguments)}function oa(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function sa(t){return/^[\s\xa0]*$/.test(t)}var aa,ua=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ca(t,e){return-1!=t.indexOf(e)}function la(t,e){return t<e?-1:t>e?1:0}t:{var ha=Hs.navigator;if(ha){var da=ha.userAgent;if(da){aa=da;break t}}aa=""}function fa(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function pa(t){var e={};for(var n in t)e[n]=t[n];return e}var ga="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ya(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ga.length;o++)n=ga[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ma(t){return ma[" "](t),t}ma[" "]=Qs;var va,ba,_a=ca(aa,"Opera"),wa=ca(aa,"Trident")||ca(aa,"MSIE"),Ca=ca(aa,"Edge"),Oa=Ca||wa,Ea=ca(aa,"Gecko")&&!(ca(aa.toLowerCase(),"webkit")&&!ca(aa,"Edge"))&&!(ca(aa,"Trident")||ca(aa,"MSIE"))&&!ca(aa,"Edge"),Sa=ca(aa.toLowerCase(),"webkit")&&!ca(aa,"Edge");function Ta(){var t=Hs.document;return t?t.documentMode:void 0}t:{var Ia="",xa=(ba=aa,Ea?/rv:([^\);]+)(\)|;)/.exec(ba):Ca?/Edge\/([\d\.]+)/.exec(ba):wa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ba):Sa?/WebKit\/(\S+)/.exec(ba):_a?/(?:Version)[ \/]?(\S+)/.exec(ba):void 0);if(xa&&(Ia=xa?xa[1]:""),wa){var Aa=Ta();if(null!=Aa&&Aa>parseFloat(Ia)){va=String(Aa);break t}}va=Ia}var ja={};function ka(t){return function(t,e){var n=ja;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=ua(String(va)).split("."),r=ua(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=la(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||la(0==s[2].length,0==a[2].length)||la(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Na=Hs.document&&wa&&(Ta()||parseInt(va,10))||void 0,Pa=!wa||9<=Number(Na),Ra=wa&&!ka("9"),Da=function(){if(!Hs.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Hs.addEventListener("test",Qs,e),Hs.removeEventListener("test",Qs,e)}catch(n){}return t}();function Ma(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function La(t,e){if(Ma.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ea){t:{try{ma(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Fa[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ma.prototype.b=function(){this.defaultPrevented=!0},ta(La,Ma);var Fa={2:"touch",3:"pen",4:"mouse"};La.prototype.b=function(){La.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ra)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Va="closure_listenable_"+(1e6*Math.random()|0),Ua=0;function qa(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ua,this.Y=this.Z=!1}function Ba(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ha(t){this.src=t,this.a={},this.b=0}function Qa(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=na(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ba(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function za(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ha.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=za(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new qa(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ga="closure_lm_"+(1e6*Math.random()|0),Wa={};function Ka(t,e,n,r,i){if(r&&r.once)return Ya(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ka(t,e[o],n,r,i);return null}return n=iu(n),t&&t[Va]?t.va(e,n,Gs(r)?!!r.capture:!!r,i):$a(t,e,n,!1,r,i)}function $a(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Gs(i)?!!i.capture:!!i;if(s&&!Pa)return null;var a=nu(t);if(a||(t[Ga]=a=new Ha(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=eu,e=Pa?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Da||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Za(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ya(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ya(t,e[o],n,r,i);return null}return n=iu(n),t&&t[Va]?t.wa(e,n,Gs(r)?!!r.capture:!!r,i):$a(t,e,n,!0,r,i)}function Xa(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Xa(t,e[o],n,r,i);else r=Gs(r)?!!r.capture:!!r,n=iu(n),t&&t[Va]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=za(o=t.a[e],n,r,i))&&(Ba(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=nu(t))&&(e=t.a[e.toString()],t=-1,e&&(t=za(e,n,r,i)),(n=-1<t?e[t]:null)&&Ja(n))}function Ja(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Va])Qa(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Za(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=nu(e))?(Qa(n,t),0==n.b&&(n.src=null,e[Ga]=null)):Ba(t)}}}function Za(t){return t in Wa?Wa[t]:Wa[t]="on"+t}function tu(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ja(t),n.call(r,e)}function eu(t,e){if(t.Y)return!0;if(!Pa){if(!e)t:{e=["window","event"];for(var n=Hs,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return tu(t,e=new La(e,this))}return tu(t,new La(e,this))}function nu(t){return(t=t[Ga])instanceof Ha?t:null}var ru="__closure_events_fn_"+(1e9*Math.random()>>>0);function iu(t){return"function"==typeof t?t:(t[ru]||(t[ru]=function(e){return t.handleEvent(e)}),t[ru])}function ou(){ea.call(this),this.c=new Ha(this),this.J=this,this.C=null}function su(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ma(e,t);else if(e instanceof Ma)e.target=e.target||t;else{var i=e;ya(e=new Ma(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=au(s,r,!0,e)&&i}if(i=au(s=e.a=t,r,!0,e)&&i,i=au(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=au(s=e.a=n[o],r,!1,e)&&i}function au(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Qa(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ta(ou,ea),ou.prototype[Va]=!0,(Us=ou.prototype).addEventListener=function(t,e,n,r){Ka(this,t,e,n,r)},Us.removeEventListener=function(t,e,n,r){Xa(this,t,e,n,r)},Us.G=function(){if(ou.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ba(n[r]);delete e.a[t],e.b--}}this.C=null},Us.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Us.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var uu=Hs.JSON.stringify;function cu(){this.b=this.a=null}var lu,hu=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new fu},function(t){t.reset()});function du(){var t=mu,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function fu(){this.next=this.b=this.a=null}function pu(t){Hs.setTimeout(function(){throw t},0)}function gu(t,e){lu||function(){var t=Hs.Promise.resolve(void 0);lu=function(){t.then(vu)}}(),yu||(lu(),yu=!0),mu.add(t,e)}cu.prototype.add=function(t,e){var n=hu.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},fu.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},fu.prototype.reset=function(){this.next=this.b=this.a=null};var yu=!1,mu=new cu;function vu(){for(var t;t=du();){try{t.a.call(t.b)}catch(n){pu(n)}var e=hu;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}yu=!1}function bu(t,e){ou.call(this),this.b=t||1,this.a=e||Hs,this.f=Xs(this.Za,this),this.g=Zs()}function _u(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function wu(t,e,n){if("function"==typeof t)n&&(t=Xs(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Xs(t.handleEvent,t)}return 2147483647<Number(e)?-1:Hs.setTimeout(t,e||0)}function Cu(t){t.a=wu(function(){t.a=null,t.c&&(t.c=!1,Cu(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ta(bu,ou),(Us=bu.prototype).aa=!1,Us.M=null,Us.Za=function(){if(this.aa){var t=Zs()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),su(this,"tick"),this.aa&&(_u(this),this.start()))}},Us.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Zs())},Us.G=function(){bu.X.G.call(this),_u(this),delete this.a};var Ou=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Fs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Cu(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Hs.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ea);function Eu(t){ea.call(this),this.b=t,this.a={}}ta(Eu,ea);var Su=[];function Tu(t,e,n,r){Array.isArray(n)||(n&&(Su[0]=n.toString()),n=Su);for(var i=0;i<n.length;i++){var o=Ka(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Iu(t){fa(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ja(t)},t),t.a={}}function xu(){this.a=!0}function Au(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return uu(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Eu.prototype.G=function(){Eu.X.G.call(this),Iu(this)},Eu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xu.prototype.info=function(){};var ju={},ku=null;function Nu(){return ku=ku||new ou}function Pu(t){Ma.call(this,ju.Fa,t)}function Ru(t){var e=Nu();su(e,new Pu(e,t))}function Du(t,e){Ma.call(this,ju.STAT_EVENT,t),this.stat=e}function Mu(t){var e=Nu();su(e,new Du(e,t))}function Lu(t){Ma.call(this,ju.Ga,t)}function Fu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Hs.setTimeout(function(){t()},e)}ju.Fa="serverreachability",ta(Pu,Ma),ju.STAT_EVENT="statevent",ta(Du,Ma),ju.Ga="timingevent",ta(Lu,Ma);var Vu={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Uu={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function qu(){}function Bu(){}qu.prototype.a=null;var Hu,Qu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function zu(){Ma.call(this,"d")}function Gu(){Ma.call(this,"c")}function Wu(){}function Ku(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Eu(this),this.P=$u,this.R=new bu(t=Oa?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ta(zu,Ma),ta(Gu,Ma),ta(Wu,qu),Hu=new Wu;var $u=45e3,Yu={},Xu={};function Ju(t,e,n){t.H=1,t.i=_c(pc(e)),t.j=n,t.I=!0,Zu(t,null)}function Zu(t,e){t.u=Zs(),nc(t),t.l=pc(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Pc(n.b,"t",r),t.D=0,t.a=Il(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ou(Xs(t.Ca,t,t.a),t.O)),Tu(t.J,t.a,"readystatechange",t.Xa),e=t.B?pa(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ru(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function tc(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ec(t,n);if(i==Xu){4==e&&(t.h=4,Mu(14),r=!1),Au(t.c,t.f,null,"[Incomplete Response]");break}if(i==Yu){t.h=4,Mu(15),Au(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Au(t.c,t.f,i,null),ac(t,i)}4==e&&0==n.length&&(t.h=1,Mu(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),bl(e),e.F=!0,Mu(11))):(Au(t.c,t.f,n,"[Invalid Chunked Response]"),sc(t),oc(t))}function ec(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Xu:(n=Number(e.substring(n,r)),isNaN(n)?Yu:(r+=1)+n>e.length?Xu:(e=e.substr(r,n),t.D=r+n,e))}function nc(t){t.T=Zs()+t.P,rc(t,t.P)}function rc(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Fu(Xs(t.Va,t),e)}function ic(t){t.o&&(Hs.clearTimeout(t.o),t.o=null)}function oc(t){0==t.g.v||t.A||Cl(t.g,t)}function sc(t){ic(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,_u(t.R),Iu(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ac(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Uc(n.b,t)))if(n.I=t.N,!t.C&&Uc(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(l_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;wl(n),ll(n)}vl(n),Mu(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Fu(Xs(n.Sa,n),6e3));if(1>=Vc(n.b)&&n.ea){try{n.ea()}catch(l_){}n.ea=void 0}}else El(n,11)}else if((t.C||n.a==t)&&wl(n),!sa(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(ca(l,"spdy")||ca(l,"quic")||ca(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(qc(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,bc(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Zs()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Tl(u,u.C?u.ga:null,u.fa),f.C){Bc(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(ic(p),nc(p)),u.a=f}else ml(u);0<n.g.length&&fl(n)}else"stop"!=i[0]&&"close"!=i[0]||El(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?El(n,7):cl(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ru(4)}catch(l_){}}function uc(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(zs(t)||"string"==typeof t)ra(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(zs(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(zs(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function cc(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof cc)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function lc(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];hc(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)hc(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function hc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Us=Ku.prototype).setTimeout=function(t){this.P=t},Us.Xa=function(t){t=t.target;var e=this.F;e&&3==ol(t)?e.f():this.Ca(t)},Us.Ca=function(t){try{if(t==this.a)t:{var e=ol(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Oa&&!this.a.$())){this.A||4!=e||7==n||Ru(8==n||0>=r?3:2),ic(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sa(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Mu(12),sc(this),oc(this);break t}Au(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ac(this,u)}this.I?(tc(this,e,o),Oa&&this.b&&3==e&&(Tu(this.J,this.R,"tick",this.Wa),this.R.start())):(Au(this.c,this.f,o,null),ac(this,o)),4==e&&sc(this),this.b&&!this.A&&(4==e?Cl(this.g,this):(this.b=!1,nc(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Mu(12)):(this.h=0,Mu(13)),sc(this),oc(this)}}}catch(c){}},Us.Wa=function(){if(this.a){var t=ol(this.a),e=this.a.$();this.D<e.length&&(ic(this),tc(this,t,e),this.b&&4!=t&&nc(this))}},Us.cancel=function(){this.A=!0,sc(this)},Us.Va=function(){this.o=null;var t=Zs();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Ru(3),Mu(17)),sc(this),this.h=2,oc(this)):rc(this,this.T-t)},(Us=cc.prototype).K=function(){lc(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Us.L=function(){return lc(this),this.a.concat()},Us.get=function(t,e){return hc(this.b,t)?this.b[t]:e},Us.set=function(t,e){hc(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Us.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var dc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fc(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof fc){this.a=void 0!==e?e:t.a,gc(this,t.f),this.j=t.j,yc(this,t.c),mc(this,t.h),this.g=t.g,e=t.b;var n=new Ac;n.c=e.c,e.a&&(n.a=new cc(e.a),n.b=e.b),vc(this,n),this.i=t.i}else t&&(n=String(t).match(dc))?(this.a=!!e,gc(this,n[1]||"",!0),this.j=wc(n[2]||""),yc(this,n[3]||"",!0),mc(this,n[4]),this.g=wc(n[5]||"",!0),vc(this,n[6]||"",!0),this.i=wc(n[7]||"")):(this.a=!!e,this.b=new Ac(null,this.a))}function pc(t){return new fc(t)}function gc(t,e,n){t.f=n?wc(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function yc(t,e,n){t.c=n?wc(e,!0):e}function mc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function vc(t,e,n){e instanceof Ac?(t.b=e,function(t,e){e&&!t.f&&(jc(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(kc(this,e),Pc(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Cc(e,Ic)),t.b=new Ac(e,t.a))}function bc(t,e,n){t.b.set(e,n)}function _c(t){return bc(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Zs()).toString(36)),t}function wc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Cc(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Oc),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Oc(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}fc.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Cc(e,Ec,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Cc(e,Ec,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Cc(n,"/"==n.charAt(0)?Tc:Sc,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Cc(n,xc)),t.join("")};var Ec=/[#\/\?@]/g,Sc=/[#\?:]/g,Tc=/[#\?]/g,Ic=/[#\?@]/g,xc=/#/g;function Ac(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function jc(t){t.a||(t.a=new cc,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function kc(t,e){jc(t),e=Rc(t,e),hc(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,hc((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&lc(t)))}function Nc(t,e){return jc(t),e=Rc(t,e),hc(t.a.b,e)}function Pc(t,e,n){kc(t,e),0<n.length&&(t.c=null,t.a.set(Rc(t,e),oa(n)),t.b+=n.length)}function Rc(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Us=Ac.prototype).add=function(t,e){jc(this),this.c=null,t=Rc(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Us.forEach=function(t,e){jc(this),this.a.forEach(function(n,r){ra(n,function(n){t.call(e,n,r,this)},this)},this)},Us.L=function(){jc(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Us.K=function(t){jc(this);var e=[];if("string"==typeof t)Nc(this,t)&&(e=ia(e,this.a.get(Rc(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=ia(e,t[n])}return e},Us.set=function(t,e){return jc(this),this.c=null,Nc(this,t=Rc(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Us.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Us.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Dc=function(){return function(t,e){this.b=t,this.a=e}}();function Mc(t){this.g=t||Lc,t=Hs.PerformanceNavigationTiming?0<(t=Hs.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Hs.ia&&Hs.ia.ya&&Hs.ia.ya()&&Hs.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Lc=10;function Fc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Vc(t){return t.b?1:t.a?t.a.size:0}function Uc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function qc(t,e){t.a?t.a.add(e):t.b=e}function Bc(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Hc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Vs(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return oa(t.c)}function Qc(){}function zc(){this.a=new Qc}function Gc(t,e,n){var r=n||"";try{uc(t,function(t,n){var i=t;Gs(t)&&(i=uu(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(z_){throw e.push(r+"type="+encodeURIComponent("_badmap")),z_}}function Wc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Mc.prototype.cancel=function(){var t,e;if(this.c=Hc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Vs(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Qc.prototype.stringify=function(t){return Hs.JSON.stringify(t,void 0)},Qc.prototype.parse=function(t){return Hs.JSON.parse(t,void 0)};var Kc=Hs.JSON.parse;function $c(t){ou.call(this),this.headers=new cc,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Yc,this.D=this.F=!1}ta($c,ou);var Yc="",Xc=/^https?$/i,Jc=["POST","PUT"];function Zc(t){return"content-type"==t.toLowerCase()}function tl(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,el(t),rl(t)}function el(t){t.u||(t.u=!0,su(t,"complete"),su(t,"error"))}function nl(t){if(t.b&&void 0!==Bs&&(!t.s[1]||4!=ol(t)||2!=t.W()))if(t.l&&4==ol(t))wu(t.za,0,t);else if(su(t,"readystatechange"),4==ol(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(dc)[1]||null;if(!o&&Hs.self&&Hs.self.location){var s=Hs.self.location.protocol;o=s.substr(0,s.length-1)}i=!Xc.test(o?o.toLowerCase():"")}e=i}if(e)su(t,"complete"),su(t,"success");else{t.h=6;try{var a=2<ol(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",el(t)}}finally{rl(t)}}}function rl(t,e){if(t.a){il(t);var n=t.a,r=t.s[0]?Qs:null;t.a=null,t.s=null,e||su(t,"ready");try{n.onreadystatechange=r}catch(z_){}}}function il(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Hs.clearTimeout(t.m),t.m=null)}function ol(t){return t.a?t.a.readyState:0}function sl(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return fa(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):bc(t,e,n))}function al(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ul(t){this.pa=0,this.g=[],this.c=new xu,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=al("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=al("baseRetryDelayMs",5e3,t),this.Ra=al("retryDelaySeedMs",1e4,t),this.Ma=al("forwardChannelMaxRetries",2,t),this.ma=al("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Mc(t&&t.concurrentRequestLimit),this.ka=new zc,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function cl(t){if(hl(t),3==t.v){var e=t.R++,n=pc(t.B);bc(n,"SID",t.J),bc(n,"RID",e),bc(n,"TYPE","terminate"),gl(t,n),(e=new Ku(t,t.c,e,void 0)).H=2,e.i=_c(pc(n)),n=!1,Hs.navigator&&Hs.navigator.sendBeacon&&(n=Hs.navigator.sendBeacon(e.i.toString(),"")),!n&&Hs.Image&&((new Image).src=e.i,n=!0),n||(e.a=Il(e.g,null),e.a.ba(e.i)),e.u=Zs(),nc(e)}Sl(t)}function ll(t){t.a&&(bl(t),t.a.cancel(),t.a=null)}function hl(t){ll(t),t.j&&(Hs.clearTimeout(t.j),t.j=null),wl(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Hs.clearTimeout(t.h),t.h=null)}function dl(t,e){t.g.push(new Dc(t.Oa++,e)),3==t.v&&fl(t)}function fl(t){Fc(t.b)||t.h||(t.h=!0,gu(t.Ba,t),t.u=0)}function pl(t,e){var n;n=e?e.f:t.R++;var r=pc(t.B);bc(r,"SID",t.J),bc(r,"RID",n),bc(r,"AID",t.P),gl(t,r),t.i&&t.l&&sl(r,t.i,t.l),n=new Ku(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=yl(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),qc(t.b,n),Ju(n,r,e)}function gl(t,e){t.f&&uc({},function(t,n){bc(e,n,t)})}function yl(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Xs(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Gc(l,s,"req"+c+"_")}catch(oh){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function ml(t){t.a||t.j||(t.T=1,gu(t.Aa,t),t.o=0)}function vl(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Fu(Xs(t.Aa,t),Ol(t,t.o)),t.o++,0))}function bl(t){null!=t.s&&(Hs.clearTimeout(t.s),t.s=null)}function _l(t){t.a=new Ku(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=pc(t.la);bc(e,"RID","rpc"),bc(e,"SID",t.J),bc(e,"CI",t.H?"0":"1"),bc(e,"AID",t.P),gl(t,e),bc(e,"TYPE","xmlhttp"),t.i&&t.l&&sl(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=_c(pc(e)),n.j=null,n.I=!0,Zu(n,t)}function wl(t){null!=t.m&&(Hs.clearTimeout(t.m),t.m=null)}function Cl(t,e){var n=null;if(t.a==e){wl(t),bl(t),t.a=null;var r=2}else{if(!Uc(t.b,e))return;n=e.s,Bc(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Zs()-e.u;var i=t.u;su(r=Nu(),new Lu(r,n,e,i)),fl(t)}else ml(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Vc(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Fu(Xs(t.Ba,t,e),Ol(t,t.u)),t.u++,0)))}(t,e)||2==r&&vl(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:El(t,5);break;case 4:El(t,10);break;case 3:El(t,6);break;default:El(t,2)}}function Ol(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function El(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Xs(t.Ya,t);n||(n=new fc("//www.google.com/images/cleardot.gif"),Hs.location&&"http"==Hs.location.protocol||gc(n,"https"),_c(n)),function(t,e){var n=new xu;if(Hs.Image){var r=new Image;r.onload=Js(Wc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Js(Wc,n,r,"TestLoadImage: error",!1,e),r.onabort=Js(Wc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Js(Wc,n,r,"TestLoadImage: timeout",!1,e),Hs.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Mu(2);t.v=0,t.f&&t.f.ra(e),Sl(t),hl(t)}function Sl(t){t.v=0,t.I=-1,t.f&&(0==Hc(t.b).length&&0==t.g.length||(t.b.c.length=0,oa(t.g),t.g.length=0),t.f.qa())}function Tl(t,e,n){var r=function(t){return t instanceof fc?pc(t):new fc(t,void 0)}(n);if(""!=r.c)e&&yc(r,e+"."+r.c),mc(r,r.h);else{var i=Hs.location;r=function(t,e,n,r){var i=new fc(null,void 0);return t&&gc(i,t),e&&yc(i,e),n&&mc(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&fa(t.V,function(t,e){bc(r,e,t)}),n=t.na,(e=t.A)&&n&&bc(r,e,n),bc(r,"VER",t.ha),gl(t,r),r}function Il(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new $c(t.Na)).F=t.C,e}function xl(){}function Al(){if(wa&&!(10<=Number(Na)))throw Error("Environmental error: no available transport.")}function jl(t,e){ou.call(this),this.a=new ul(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!sa(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!sa(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Pl(this)}function kl(t){zu.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Nl(){Gu.call(this),this.status=1}function Pl(t){this.a=t}(Us=$c.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Hu),this.a.onreadystatechange=Xs(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void tl(this,o)}t=n||"";var i=new cc(this.headers);r&&uc(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Zc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Hs.FormData&&t instanceof Hs.FormData,!(0<=na(Jc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{il(this),0<this.o&&((this.D=function(t){return wa&&ka(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Xs(this.xa,this)):this.m=wu(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){tl(this,o)}},Us.xa=function(){void 0!==Bs&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,su(this,"timeout"),this.abort(8))},Us.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,su(this,"complete"),su(this,"abort"),rl(this))},Us.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),rl(this,!0)),$c.X.G.call(this)},Us.za=function(){this.j||(this.A||this.l||this.g?nl(this):this.Ua())},Us.Ua=function(){nl(this)},Us.W=function(){try{return 2<ol(this)?this.a.status:-1}catch(ba){return-1}},Us.$=function(){try{return this.a?this.a.responseText:""}catch(ba){return""}},Us.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Kc(e)}},Us.ua=function(){return this.h},Us.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Us=ul.prototype).ha=8,Us.v=1,Us.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ku(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ya(r=pa(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=yl(this,n,e),bc(i=pc(this.B),"RID",t),bc(i,"CVER",22),this.A&&bc(i,"X-HTTP-Session-Id",this.A),gl(this,i),this.i&&r&&sl(i,this.i,r),qc(this.b,n),this.Ia&&bc(i,"TYPE","init"),this.da?(bc(i,"$req",e),bc(i,"SID","null"),n.U=!0,Ju(n,i,null)):Ju(n,i,e),this.v=2}}else 3==this.v&&(t?pl(this,t):0==this.g.length||Fc(this.b)||pl(this))},Us.Aa=function(){if(this.j=null,_l(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Fu(Xs(this.Ta,this),t)}},Us.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Mu(10),ll(this),_l(this))},Us.Sa=function(){null!=this.m&&(this.m=null,ll(this),vl(this),Mu(19))},Us.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Mu(2)):(this.c.info("Failed to ping google.com"),Mu(1))},(Us=xl.prototype).ta=function(){},Us.sa=function(){},Us.ra=function(){},Us.qa=function(){},Us.Ja=function(){},Al.prototype.a=function(t,e){return new jl(t,e)},ta(jl,ou),jl.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Mu(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Tl(t,null,t.fa),fl(t)},jl.prototype.close=function(){cl(this.a)},jl.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,dl(this.a,e)}else this.l?((e={}).__data__=uu(t),dl(this.a,e)):dl(this.a,t)},jl.prototype.G=function(){this.a.f=null,delete this.f,cl(this.a),delete this.a,jl.X.G.call(this)},ta(kl,zu),ta(Nl,Gu),ta(Pl,xl),Pl.prototype.ta=function(){su(this.a,"a")},Pl.prototype.sa=function(t){su(this.a,new kl(t))},Pl.prototype.ra=function(t){su(this.a,new Nl(t))},Pl.prototype.qa=function(){su(this.a,"b")},Al.prototype.createWebChannel=Al.prototype.a,jl.prototype.send=jl.prototype.h,jl.prototype.open=jl.prototype.g,jl.prototype.close=jl.prototype.close,Vu.NO_ERROR=0,Vu.TIMEOUT=8,Vu.HTTP_ERROR=6,Uu.COMPLETE="complete",Bu.EventType=Qu,Qu.OPEN="a",Qu.CLOSE="b",Qu.ERROR="c",Qu.MESSAGE="d",ou.prototype.listen=ou.prototype.va,$c.prototype.listenOnce=$c.prototype.wa,$c.prototype.getLastError=$c.prototype.Qa,$c.prototype.getLastErrorCode=$c.prototype.ua,$c.prototype.getStatus=$c.prototype.W,$c.prototype.getResponseJson=$c.prototype.Pa,$c.prototype.getResponseText=$c.prototype.$,$c.prototype.send=$c.prototype.ba;var Rl=Vu,Dl=Uu,Ml=ju,Ll=Bu,Fl=$c,Vl=n("mrSG"),Ul=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ul.o=-1;var ql={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Bl=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Vl.c)(e,t),e}(Error),Hl=new Ls.b("@firebase/firestore");function Ql(){return Hl.logLevel}function zl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hl.logLevel<=Ls.a.DEBUG){var r=e.map(Kl);Hl.debug.apply(Hl,Object(Vl.f)(["Firestore (8.3.3): "+t],r))}}function Gl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hl.logLevel<=Ls.a.ERROR){var r=e.map(Kl);Hl.error.apply(Hl,Object(Vl.f)(["Firestore (8.3.3): "+t],r))}}function Wl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hl.logLevel<=Ls.a.WARN){var r=e.map(Kl);Hl.warn.apply(Hl,Object(Vl.f)(["Firestore (8.3.3): "+t],r))}}function Kl(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(z_){return t}}function $l(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.3) INTERNAL ASSERTION FAILED: "+t;throw Gl(e),new Error(e)}function Yl(t,e){t||$l()}function Xl(t,e){return t}function Jl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Zl=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Jl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function th(t,e){return t<e?-1:t>e?1:0}function eh(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function nh(t){return t+"\0"}var rh=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Bl(ql.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Bl(ql.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Bl(ql.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Bl(ql.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?th(this.nanoseconds,t.nanoseconds):th(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ih=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new rh(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function oh(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sh(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ah(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var uh=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&$l(),void 0===n?n=t.length-e:n>t.length-e&&$l(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ch=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Bl(ql.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(uh),lh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,hh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return lh.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Bl(ql.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Bl(ql.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Bl(ql.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Bl(ql.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(uh),dh=function(){function t(t){this.fields=t,t.sort(hh.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return eh(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),fh=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return th(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();fh.EMPTY_BYTE_STRING=new fh("");var ph=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gh(t){if(Yl(!!t),"string"==typeof t){var e=0,n=ph.exec(t);if(Yl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yh(t.seconds),nanos:yh(t.nanos)}}function yh(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function mh(t){return"string"==typeof t?fh.fromBase64String(t):fh.fromUint8Array(t)}function vh(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function bh(t){var e=t.mapValue.fields.__previous_value__;return vh(e)?bh(e):e}function _h(t){var e=gh(t.mapValue.fields.__local_write_time__.timestampValue);return new rh(e.seconds,e.nanos)}function wh(t){return null==t}function Ch(t){return 0===t&&1/t==-1/0}function Oh(t){return"number"==typeof t&&Number.isInteger(t)&&!Ch(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Eh=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ch.fromString(e))},t.fromName=function(e){return new t(ch.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ch.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ch.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ch(e.slice()))},t}();function Sh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vh(t)?4:10:$l()}function Th(t,e){var n=Sh(t);if(n!==Sh(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _h(t).isEqual(_h(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=gh(t.timestampValue),r=gh(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return mh(t.bytesValue).isEqual(mh(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return yh(t.geoPointValue.latitude)===yh(e.geoPointValue.latitude)&&yh(t.geoPointValue.longitude)===yh(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return yh(t.integerValue)===yh(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=yh(t.doubleValue),r=yh(e.doubleValue);return n===r?Ch(n)===Ch(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return eh(t.arrayValue.values||[],e.arrayValue.values||[],Th);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(oh(n)!==oh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Th(n[i],r[i])))return!1;return!0}(t,e);default:return $l()}}function Ih(t,e){return void 0!==(t.values||[]).find(function(t){return Th(t,e)})}function xh(t,e){var n=Sh(t),r=Sh(e);if(n!==r)return th(n,r);switch(n){case 0:return 0;case 1:return th(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=yh(t.integerValue||t.doubleValue),r=yh(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ah(t.timestampValue,e.timestampValue);case 4:return Ah(_h(t),_h(e));case 5:return th(t.stringValue,e.stringValue);case 6:return function(t,e){var n=mh(t),r=mh(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=th(n[i],r[i]);if(0!==o)return o}return th(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=th(yh(t.latitude),yh(e.latitude));return 0!==n?n:th(yh(t.longitude),yh(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=xh(n[i],r[i]);if(o)return o}return th(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=th(r[s],o[s]);if(0!==a)return a;var u=xh(n[r[s]],i[o[s]]);if(0!==u)return u}return th(r.length,o.length)}(t.mapValue,e.mapValue);default:throw $l()}}function Ah(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return th(t,e);var n=gh(t),r=gh(e),i=th(n.seconds,r.seconds);return 0!==i?i:th(n.nanos,r.nanos)}function jh(t){return kh(t)}function kh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=gh(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?mh(t.bytesValue).toBase64():"referenceValue"in t?Eh.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=kh(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+kh(t.fields[o])}return e+"}"}(t.mapValue):$l();var e}function Nh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Ph(t){return!!t&&"integerValue"in t}function Rh(t){return!!t&&"arrayValue"in t}function Dh(t){return!!t&&"nullValue"in t}function Mh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lh(t){return!!t&&"mapValue"in t}var Fh=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(hh.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Th(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Sh(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Lh(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(hh.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Lh(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Vh(t){var e=[];return sh(t.fields||{},function(t,n){var r=new hh([t]);if(Lh(n)){var i=Vh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new dh(e)}var Uh=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,ih.min(),Fh.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Fh.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Fh.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Fh.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Fh.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),qh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Bh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new qh(t,e,n,r,i,o,s)}function Hh(t){var e=Xl(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+jh(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),wh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=nd(e.startAt)),e.endAt&&(n+="|ub:",n+=nd(e.endAt)),e.h=n}return e.h}function Qh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!id(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Th(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sd(t.startAt,e.startAt)&&sd(t.endAt,e.endAt)}function zh(t){return Eh.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Gh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Vl.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Wh(t,n,r):"array-contains"===n?new Xh(t,r):"in"===n?new Jh(t,r):"not-in"===n?new Zh(t,r):"array-contains-any"===n?new td(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Kh(t,n):new $h(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(xh(e,this.value)):null!==e&&Sh(this.value)===Sh(e)&&this.m(xh(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return $l()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Wh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Eh.fromName(r.referenceValue),i}return Object(Vl.c)(e,t),e.prototype.matches=function(t){var e=Eh.comparator(t.key,this.key);return this.m(e)},e}(Gh),Kh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Yh(0,n),r}return Object(Vl.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Gh),$h=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Yh(0,n),r}return Object(Vl.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Gh);function Yh(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Eh.fromName(t.referenceValue)})}var Xh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Vl.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Rh(e)&&Ih(e.arrayValue,this.value)},e}(Gh),Jh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Vl.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Ih(this.value.arrayValue,e)},e}(Gh),Zh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Vl.c)(e,t),e.prototype.matches=function(t){if(Ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ih(this.value.arrayValue,e)},e}(Gh),td=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Vl.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Rh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Ih(e.value.arrayValue,t)})},e}(Gh),ed=function(t,e){this.position=t,this.before=e};function nd(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return jh(t)}).join(",")}var rd=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function id(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function od(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Eh.comparator(Eh.fromName(s.referenceValue),n.key):xh(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function sd(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Th(t.position[n],e.position[n]))return!1;return!0}var ad=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function ud(t,e,n,r,i,o,s,a){return new ad(t,e,n,r,i,o,s,a)}function cd(t){return new ad(t)}function ld(t){return!wh(t.limit)&&"F"===t.limitType}function hd(t){return!wh(t.limit)&&"L"===t.limitType}function dd(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function fd(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function pd(t){return null!==t.collectionGroup}function gd(t){var e=Xl(t);if(null===e.p){e.p=[];var n=fd(e),r=dd(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new rd(n)),e.p.push(new rd(hh.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new rd(hh.keyField(),u))}}}return e.p}function yd(t){var e=Xl(t);if(!e.T)if("F"===e.limitType)e.T=Bh(e.path,e.collectionGroup,gd(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=gd(e);r<i.length;r++){var o=i[r];n.push(new rd(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ed(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ed(e.startAt.position,!e.startAt.before):null;e.T=Bh(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function md(t,e,n){return new ad(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vd(t,e){return Qh(yd(t),yd(e))&&t.limitType===e.limitType}function bd(t){return Hh(yd(t))+"|lt:"+t.limitType}function _d(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+jh(e.value);var e}).join(", ")+"]"),wh(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+nd(t.startAt)),t.endAt&&(e+=", endAt: "+nd(t.endAt)),"Target("+e+")"}(yd(t))+"; limitType="+t.limitType+")"}function wd(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Eh.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!od(t.startAt,gd(t),e)||t.endAt&&od(t.endAt,gd(t),e))}(t,e)}function Cd(t){return function(e,n){for(var r=!1,i=0,o=gd(t);i<o.length;i++){var s=o[i],a=Od(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Od(t,e,n){var r=t.field.isKeyField()?Eh.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?xh(r,i):$l()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $l()}}function Ed(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function Sd(t){return{integerValue:""+t}}function Td(t,e){return Oh(e)?Sd(e):Ed(t,e)}var Id=function(){this._=void 0};function xd(t,e,n){return t instanceof kd?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Nd?Pd(t,e):t instanceof Rd?Dd(t,e):function(t,e){var n=jd(t,e),r=Ld(n)+Ld(t.A);return Ph(n)&&Ph(t.A)?Sd(r):Ed(t.R,r)}(t,e)}function Ad(t,e,n){return t instanceof Nd?Pd(t,e):t instanceof Rd?Dd(t,e):n}function jd(t,e){return t instanceof Md?Ph(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vl.c)(e,t),e}(Id),Nd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Vl.c)(e,t),e}(Id);function Pd(t,e){for(var n=Fd(e),r=function(t){n.some(function(e){return Th(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Rd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Vl.c)(e,t),e}(Id);function Dd(t,e){for(var n=Fd(e),r=function(t){n=n.filter(function(e){return!Th(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Md=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Vl.c)(e,t),e}(Id);function Ld(t){return yh(t.integerValue||t.doubleValue)}function Fd(t){return Rh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Vd=function(t,e){this.field=t,this.transform=e},Ud=function(t,e){this.version=t,this.transformResults=e},qd=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Bd(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Hd=function(){};function Qd(t,e,n){t instanceof $d?function(t,e,n){var r=t.value.clone(),i=Jd(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Yd?function(t,e,n){if(Bd(t.precondition,e)){var r=Jd(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Xd(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function zd(t,e,n){t instanceof $d?function(t,e,n){if(Bd(t.precondition,e)){var r=t.value.clone(),i=Zd(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Kd(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Yd?function(t,e,n){if(Bd(t.precondition,e)){var r=Zd(t.fieldTransforms,n,e),i=e.data;i.setAll(Xd(t)),i.setAll(r),e.convertToFoundDocument(Kd(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Bd(t.precondition,e)&&e.convertToNoDocument(ih.min())}(t,e)}function Gd(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=jd(o.transform,s||null);null!=a&&(null==n&&(n=Fh.empty()),n.set(o.field,a))}return n||null}function Wd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&eh(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Nd&&e instanceof Nd||t instanceof Rd&&e instanceof Rd?eh(t.elements,e.elements,Th):t instanceof Md&&e instanceof Md?Th(t.A,e.A):t instanceof kd&&e instanceof kd}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Kd(t){return t.isFoundDocument()?t.version:ih.min()}var $d=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Vl.c)(e,t),e}(Hd),Yd=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Vl.c)(e,t),e}(Hd);function Xd(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Jd(t,e,n){var r=new Map;Yl(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Ad(s,a,n[i]))}return r}function Zd(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,xd(a,u,e))}return r}var tf,ef,nf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Vl.c)(e,t),e}(Hd),rf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Vl.c)(e,t),e}(Hd),of=function(t){this.count=t};function sf(t){switch(t){case ql.OK:return $l();case ql.CANCELLED:case ql.UNKNOWN:case ql.DEADLINE_EXCEEDED:case ql.RESOURCE_EXHAUSTED:case ql.INTERNAL:case ql.UNAVAILABLE:case ql.UNAUTHENTICATED:return!1;case ql.INVALID_ARGUMENT:case ql.NOT_FOUND:case ql.ALREADY_EXISTS:case ql.PERMISSION_DENIED:case ql.FAILED_PRECONDITION:case ql.ABORTED:case ql.OUT_OF_RANGE:case ql.UNIMPLEMENTED:case ql.DATA_LOSS:return!0;default:return $l()}}function af(t){if(void 0===t)return Gl("GRPC error has no .code"),ql.UNKNOWN;switch(t){case tf.OK:return ql.OK;case tf.CANCELLED:return ql.CANCELLED;case tf.UNKNOWN:return ql.UNKNOWN;case tf.DEADLINE_EXCEEDED:return ql.DEADLINE_EXCEEDED;case tf.RESOURCE_EXHAUSTED:return ql.RESOURCE_EXHAUSTED;case tf.INTERNAL:return ql.INTERNAL;case tf.UNAVAILABLE:return ql.UNAVAILABLE;case tf.UNAUTHENTICATED:return ql.UNAUTHENTICATED;case tf.INVALID_ARGUMENT:return ql.INVALID_ARGUMENT;case tf.NOT_FOUND:return ql.NOT_FOUND;case tf.ALREADY_EXISTS:return ql.ALREADY_EXISTS;case tf.PERMISSION_DENIED:return ql.PERMISSION_DENIED;case tf.FAILED_PRECONDITION:return ql.FAILED_PRECONDITION;case tf.ABORTED:return ql.ABORTED;case tf.OUT_OF_RANGE:return ql.OUT_OF_RANGE;case tf.UNIMPLEMENTED:return ql.UNIMPLEMENTED;case tf.DATA_LOSS:return ql.DATA_LOSS;default:return $l()}}(ef=tf||(tf={}))[ef.OK=0]="OK",ef[ef.CANCELLED=1]="CANCELLED",ef[ef.UNKNOWN=2]="UNKNOWN",ef[ef.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ef[ef.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ef[ef.NOT_FOUND=5]="NOT_FOUND",ef[ef.ALREADY_EXISTS=6]="ALREADY_EXISTS",ef[ef.PERMISSION_DENIED=7]="PERMISSION_DENIED",ef[ef.UNAUTHENTICATED=16]="UNAUTHENTICATED",ef[ef.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ef[ef.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ef[ef.ABORTED=10]="ABORTED",ef[ef.OUT_OF_RANGE=11]="OUT_OF_RANGE",ef[ef.UNIMPLEMENTED=12]="UNIMPLEMENTED",ef[ef.INTERNAL=13]="INTERNAL",ef[ef.UNAVAILABLE=14]="UNAVAILABLE",ef[ef.DATA_LOSS=15]="DATA_LOSS";var uf=function(){function t(t,e){this.comparator=t,this.root=e||lf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new cf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new cf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new cf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new cf(this.root,t,this.comparator,!0)},t}(),cf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),lf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw $l();if(this.right.isRed())throw $l();var t=this.left.check();if(t!==this.right.check())throw $l();return t+(this.isRed()?0:1)},t}();lf.EMPTY=null,lf.RED=!0,lf.BLACK=!1,lf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw $l()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw $l()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw $l()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw $l()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw $l()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new lf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var hf=function(){function t(t){this.comparator=t,this.data=new uf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new df(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new df(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),df=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ff=new uf(Eh.comparator);function pf(){return ff}var gf=new uf(Eh.comparator);function yf(){return gf}var mf=new uf(Eh.comparator);function vf(){return mf}var bf=new hf(Eh.comparator);function _f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=bf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var wf=new hf(th);function Cf(){return wf}var Of=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Ef.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ih.min(),r,Cf(),pf(),_f())},t}(),Ef=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(fh.EMPTY_BYTE_STRING,n,_f(),_f(),_f())},t}(),Sf=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Tf=function(t,e){this.targetId=t,this.V=e},If=function(t,e,n,r){void 0===n&&(n=fh.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},xf=function(){function t(){this.S=0,this.D=kf(),this.C=fh.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=_f(),e=_f(),n=_f();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:$l()}}),new Ef(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=kf()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Af=function(){function t(t){this.W=t,this.G=new Map,this.H=pf(),this.J=jf(),this.Y=new hf(th)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:$l()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(zh(i))if(0===n){var o=new Eh(i.path);this.tt(e,o,Uh.newNoDocument(o,ih.min()))}else Yl(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&zh(o.target)){var s=new Eh(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Uh.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=_f();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Of(t,n,this.Y,this.H,r);return this.H=pf(),this.J=jf(),this.Y=new hf(th),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new xf,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new hf(th),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||zl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new xf),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function jf(){return new uf(Eh.comparator)}function kf(){return new uf(Eh.comparator)}var Nf={asc:"ASCENDING",desc:"DESCENDING"},Pf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rf=function(t,e){this.databaseId=t,this.I=e};function Df(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mf(t,e){return t.I?e.toBase64():e.toUint8Array()}function Lf(t,e){return Df(t,e.toTimestamp())}function Ff(t){return Yl(!!t),ih.fromTimestamp(function(t){var e=gh(t);return new rh(e.seconds,e.nanos)}(t))}function Vf(t,e){return function(t){return new ch(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Uf(t){var e=ch.fromString(t);return Yl(lp(e)),e}function qf(t,e){return Vf(t.databaseId,e.path)}function Bf(t,e){var n=Uf(e);if(n.get(1)!==t.databaseId.projectId)throw new Bl(ql.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Bl(ql.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Eh(Gf(n))}function Hf(t,e){return Vf(t.databaseId,e)}function Qf(t){var e=Uf(t);return 4===e.length?ch.emptyPath():Gf(e)}function zf(t){return new ch(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gf(t){return Yl(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Wf(t,e,n){return{name:qf(t,e),fields:n.toProto().mapValue.fields}}function Kf(t,e,n){var r=Bf(t,e.name),i=Ff(e.updateTime),o=new Fh({mapValue:{fields:e.fields}}),s=Uh.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function $f(t,e){var n;if(e instanceof $d)n={update:Wf(t,e.key,e.value)};else if(e instanceof nf)n={delete:qf(t,e.key)};else if(e instanceof Yd)n={update:Wf(t,e.key,e.data),updateMask:cp(e.fieldMask)};else{if(!(e instanceof rf))return $l();n={verify:qf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof kd)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nd)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rd)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Md)return{fieldPath:e.field.canonicalString(),increment:n.A};throw $l()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Lf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:$l()}(t,e.precondition)),n}function Yf(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?qd.updateTime(Ff(t.updateTime)):void 0!==t.exists?qd.exists(t.exists):qd.none()}(e.currentDocument):qd.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Yl("REQUEST_TIME"===e.setToServerValue),n=new kd):"appendMissingElements"in e?n=new Nd(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Rd(e.removeAllFromArray.values||[]):"increment"in e?n=new Md(t,e.increment):$l();var r=hh.fromServerFormat(e.fieldPath);return new Vd(r,n)}(t,e)}):[];if(e.update){var i=Bf(t,e.update.name),o=new Fh({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new dh((t.fieldPaths||[]).map(function(t){return hh.fromServerFormat(t)}))}(e.updateMask);return new Yd(i,o,s,n,r)}return new $d(i,o,n,r)}if(e.delete){var a=Bf(t,e.delete);return new nf(a,n)}if(e.verify){var u=Bf(t,e.verify);return new rf(u,n)}return $l()}function Xf(t,e){return{documents:[Hf(t,e.path)]}}function Jf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Hf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Hf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Mh(t.value))return{unaryFilter:{field:op(t.field),op:"IS_NAN"}};if(Dh(t.value))return{unaryFilter:{field:op(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Mh(t.value))return{unaryFilter:{field:op(t.field),op:"IS_NOT_NAN"}};if(Dh(t.value))return{unaryFilter:{field:op(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:op(t.field),op:ip(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:op(t.field),direction:rp(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||wh(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=ep(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ep(e.endAt)),n}function Zf(t){var e=Qf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Yl(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=tp(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new rd(sp(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return wh(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=np(n.startAt));var l=null;return n.endAt&&(l=np(n.endAt)),ud(e,i,a,s,u,"F",c,l)}function tp(t){return t?void 0!==t.unaryFilter?[up(t)]:void 0!==t.fieldFilter?[ap(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return tp(t)}).reduce(function(t,e){return t.concat(e)}):$l():[]}function ep(t){return{before:t.before,values:t.position}}function np(t){return new ed(t.values||[],!!t.before)}function rp(t){return Nf[t]}function ip(t){return Pf[t]}function op(t){return{fieldPath:t.canonicalString()}}function sp(t){return hh.fromServerFormat(t.fieldPath)}function ap(t){return Gh.create(sp(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return $l()}}(t.fieldFilter.op),t.fieldFilter.value)}function up(t){switch(t.unaryFilter.op){case"IS_NAN":var e=sp(t.unaryFilter.field);return Gh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=sp(t.unaryFilter.field);return Gh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=sp(t.unaryFilter.field);return Gh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=sp(t.unaryFilter.field);return Gh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return $l()}}function cp(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function lp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function hp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=fp(e)),e=dp(t.get(n),e);return fp(e)}function dp(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function fp(t){return t+"\x01\x01"}function pp(t){var e=t.length;if(Yl(e>=2),2===e)return Yl("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ch.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&$l(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:$l()}o=s+2}return new ch(r)}var gp=function(t,e){this.seconds=t,this.nanoseconds=e},yp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};yp.store="owner",yp.key="owner";var mp=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};mp.store="mutationQueues",mp.keyPath="userId";var vp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};vp.store="mutations",vp.keyPath="batchId",vp.userMutationsIndex="userMutationsIndex",vp.userMutationsKeyPath=["userId","batchId"];var bp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,hp(e)]},t.key=function(t,e,n){return[t,hp(e),n]},t}();bp.store="documentMutations",bp.PLACEHOLDER=new bp;var _p=function(t,e){this.path=t,this.readTime=e},wp=function(t,e){this.path=t,this.version=e},Cp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Cp.store="remoteDocuments",Cp.readTimeIndex="readTimeIndex",Cp.readTimeIndexPath="readTime",Cp.collectionReadTimeIndex="collectionReadTimeIndex",Cp.collectionReadTimeIndexPath=["parentPath","readTime"];var Op=function(t){this.byteSize=t};Op.store="remoteDocumentGlobal",Op.key="remoteDocumentGlobalKey";var Ep=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Ep.store="targets",Ep.keyPath="targetId",Ep.queryTargetsIndexName="queryTargetsIndex",Ep.queryTargetsKeyPath=["canonicalId","targetId"];var Sp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Sp.store="targetDocuments",Sp.keyPath=["targetId","path"],Sp.documentTargetsIndex="documentTargetsIndex",Sp.documentTargetsKeyPath=["path","targetId"];var Tp=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Tp.key="targetGlobalKey",Tp.store="targetGlobal";var Ip=function(t,e){this.collectionId=t,this.parent=e};Ip.store="collectionParents",Ip.keyPath=["collectionId","parent"];var xp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};xp.store="clientMetadata",xp.keyPath="clientId";var Ap=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ap.store="bundles",Ap.keyPath="bundleId";var jp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};jp.store="namedQueries",jp.keyPath="name";var kp=Object(Vl.f)(Object(Vl.f)([],Object(Vl.f)(Object(Vl.f)([],Object(Vl.f)(Object(Vl.f)([],Object(Vl.f)(Object(Vl.f)([],[mp.store,vp.store,bp.store,Cp.store,Ep.store,yp.store,Tp.store,Sp.store]),[xp.store])),[Op.store])),[Ip.store])),[Ap.store,jp.store]),Np="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Rp=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Dp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&$l(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Mp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Rp,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Vp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Qp(e.target.error);n.ft.reject(new Vp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Vp(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(zl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new qp(e)},t}(),Lp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Ms.n)())&&Gl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return zl("SimpleDb","Removing database:",t),Bp(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Ms.n)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Vl.b)(this,void 0,void 0,function(){var e,n=this;return Object(Vl.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(zl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Vp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Bl(ql.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Vp(t,n))},i.onupgradeneeded=function(t){zl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){zl("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Vl.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Vl.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Vl.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Mp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Dp.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return zl("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Fp=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Bp(this.Pt.delete())},t}(),Vp=function(t){function e(e,n){var r=this;return(r=t.call(this,ql.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Vl.c)(e,t),e}(Bl);function Up(t){return"IndexedDbTransactionError"===t.name}var qp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(zl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(zl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Bp(n)},t.prototype.add=function(t){return zl("SimpleDb","ADD",this.store.name,t,t),Bp(this.store.add(t))},t.prototype.get=function(t){var e=this;return Bp(this.store.get(t)).next(function(n){return void 0===n&&(n=null),zl("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return zl("SimpleDb","DELETE",this.store.name,t),Bp(this.store.delete(t))},t.prototype.count=function(){return zl("SimpleDb","COUNT",this.store.name),Bp(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){zl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Dp(function(n,r){e.onerror=function(t){var e=Qp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Dp(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Fp(i),s=e(i.primaryKey,i.value,o);if(s instanceof Dp){var a=s.catch(function(t){return o.done(),Dp.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Dp.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Bp(t){return new Dp(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Qp(t.target.error);n(e)}})}var Hp=!1;function Qp(t){var e=Lp._t(Object(Ms.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Bl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Hp||(Hp=!0,setTimeout(function(){throw r},0)),r}}return t}var zp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Vl.c)(e,t),e}(Pp);function Gp(t,e){var n=Xl(t);return Lp.It(n.Mt,e)}var Wp=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Qd(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&zd(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&zd(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ih.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},_f())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&eh(this.mutations,t.mutations,function(t,e){return Wd(t,e)})&&eh(this.baseMutations,t.baseMutations,function(t,e){return Wd(t,e)})},t}(),Kp=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Yl(e.mutations.length===r.length);for(var i=vf(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),$p=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ih.min()),void 0===o&&(o=ih.min()),void 0===s&&(s=fh.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Yp=function(t){this.Lt=t};function Xp(t,e){if(e.document)return Kf(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Eh.fromSegments(e.noDocument.path),r=ng(e.noDocument.readTime),i=Uh.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Eh.fromSegments(e.unknownDocument.path);return r=ng(e.unknownDocument.version),Uh.newUnknownDocument(o,r)}return $l()}function Jp(t,e,n){var r=Zp(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:qf(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Df(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Cp(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=eg(e.version);return s=e.hasCommittedMutations,new Cp(null,new _p(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=eg(e.version);return new Cp(new wp(c,l),null,null,!0,r,i)}return $l()}function Zp(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function tg(t){var e=new rh(t[0],t[1]);return ih.fromTimestamp(e)}function eg(t){var e=t.toTimestamp();return new gp(e.seconds,e.nanoseconds)}function ng(t){var e=new rh(t.seconds,t.nanoseconds);return ih.fromTimestamp(e)}function rg(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Yf(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Yf(t.Lt,e)}),o=rh.fromMillis(e.localWriteTimeMs);return new Wp(e.batchId,o,n,i)}function ig(t){var e,n,r=ng(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ng(t.lastLimboFreeSnapshotVersion):ih.min();return void 0!==t.query.documents?(Yl(1===(n=t.query).documents.length),e=yd(cd(Qf(n.documents[0])))):e=function(t){return yd(Zf(t))}(t.query),new $p(e,t.targetId,0,t.lastListenSequenceNumber,r,i,fh.fromBase64String(t.resumeToken))}function og(t,e){var n,r=eg(e.snapshotVersion),i=eg(e.lastLimboFreeSnapshotVersion);n=zh(e.target)?Xf(t.Lt,e.target):Jf(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Ep(e.targetId,Hh(e.target),r,o,e.sequenceNumber,i,n)}function sg(t){var e=Zf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?md(e,e.limit,"L"):e}var ag=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return ug(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:ng(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return ug(t).put({bundleId:(n=e).id,createTime:eg(Ff(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return cg(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:sg(e.bundledQuery),readTime:ng(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return cg(t).put(function(t){return{name:t.name,readTime:eg(Ff(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ug(t){return Gp(t,Ap.store)}function cg(t){return Gp(t,jp.store)}var lg=function(){function t(){this.Bt=new hg}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Dp.resolve()},t.prototype.getCollectionParents=function(t,e){return Dp.resolve(this.Bt.getEntries(e))},t}(),hg=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new hf(ch.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new hf(ch.comparator)).toArray()},t}(),dg=function(){function t(){this.qt=new hg}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:hp(i)};return fg(t).put(o)}return Dp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[nh(e),""],!1,!0);return fg(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(pp(o.parent))}return n})},t}();function fg(t){return Gp(t,Ip.store)}var pg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gg=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function yg(t,e,n){var r=t.store(vp.store),i=t.store(bp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Yl(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=bp.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Dp.waitFor(o).next(function(){return c})}function mg(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw $l();e=t.noDocument}return JSON.stringify(e).length}gg.DEFAULT_COLLECTION_PERCENTILE=10,gg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gg.DEFAULT=new gg(41943040,gg.DEFAULT_COLLECTION_PERCENTILE,gg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gg.DISABLED=new gg(-1,0,0);var vg=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Yl(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _g(t).Ot({index:vp.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=wg(t),s=_g(t);return s.add({}).next(function(a){Yl("number"==typeof a);for(var u=new Wp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return $f(t.Lt,e)}),i=n.mutations.map(function(e){return $f(t.Lt,e)});return new vp(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new hf(function(t,e){return th(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=bp.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,bp.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Dp.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return _g(t).get(e).next(function(t){return t?(Yl(t.userId===n.userId),rg(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Dp.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return _g(t).Ot({index:vp.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Yl(e.batchId>=r),o=rg(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return _g(t).Ot({index:vp.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _g(t).Nt(vp.userMutationsIndex,n).next(function(t){return t.map(function(t){return rg(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=bp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return wg(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=pp(r[1]);if(a===n.userId&&e.path.isEqual(c))return _g(t).get(u).next(function(t){if(!t)throw $l();Yl(t.userId===n.userId),o.push(rg(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new hf(th),i=[];return e.forEach(function(e){var o=bp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=wg(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=pp(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Dp.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=bp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new hf(th);return wg(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=pp(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(_g(t).get(e).next(function(t){if(null===t)throw $l();Yl(t.userId===n.userId),r.push(rg(n.R,t))}))}),Dp.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return yg(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Dp.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Dp.resolve();var r=IDBKeyRange.lowerBound(bp.prefixForUser(e.userId)),i=[];return wg(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=pp(t[1]);i.push(o)}else r.done()}).next(function(){Yl(0===i.length)})})},t.prototype.containsKey=function(t,e){return bg(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Cg(t).get(this.userId).next(function(t){return t||new mp(e.userId,-1,"")})},t}();function bg(t,e,n){var r=bp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return wg(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function _g(t){return Gp(t,vp.store)}function wg(t){return Gp(t,bp.store)}function Cg(t){return Gp(t,mp.store)}var Og=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Eg=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Og(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return ih.fromTimestamp(new rh(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Sg(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Yl(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Sg(t).Ot(function(s,a){var u=ig(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Dp.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Sg(t).Ot(function(t,n){var r=ig(n);e(r)})},t.prototype.Xt=function(t){return Tg(t).get(Tp.key).next(function(t){return Yl(null!==t),t})},t.prototype.Zt=function(t,e){return Tg(t).put(Tp.key,e)},t.prototype.te=function(t,e){return Sg(t).put(og(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Hh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Sg(t).Ot({range:r,index:Ep.queryTargetsIndexName},function(t,n,r){var o=ig(n);Qh(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Ig(t);return e.forEach(function(e){var s=hp(e.path);i.push(o.put(new Sp(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Dp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Ig(t);return Dp.forEach(e,function(e){var o=hp(e.path);return Dp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ig(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ig(t),i=_f();return r.Ot({range:n,kt:!0},function(t,e,n){var r=pp(t[1]),o=new Eh(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=hp(e.path),r=IDBKeyRange.bound([n],[nh(n)],!1,!0),i=0;return Ig(t).Ot({index:Sp.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Sg(t).get(e).next(function(t){return t?ig(t):null})},t}();function Sg(t){return Gp(t,Ep.store)}function Tg(t){return Gp(t,Tp.store)}function Ig(t){return Gp(t,Sp.store)}function xg(t){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(e){if(t.code!==ql.FAILED_PRECONDITION||t.message!==Np)throw t;return zl("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Ag(t,e){var n=t[1],r=e[1],i=th(t[0],e[0]);return 0===i?th(n,r):i}var jg=function(){function t(t){this.ne=t,this.buffer=new hf(Ag),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ag(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),kg=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;zl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Vl.b)(e,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Up(e=n.sent())?(zl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,xg(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Ng=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Dp.resolve(Ul.o);var r=new jg(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(zl("LruGarbageCollector","Garbage collection skipped; disabled"),Dp.resolve(pg)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(zl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),pg):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(zl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Ql()<=Ls.a.DEBUG&&zl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Dp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Pg=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Ng(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Rg(t,n)},t.prototype.removeReference=function(t,e,n){return Rg(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Rg(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Cg(t).$t(function(r){return bg(t,r,e).next(function(t){return t&&(n=!0),Dp.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Ig(t).delete([0,hp(s.path)])})});i.push(u)}}).next(function(){return Dp.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Rg(t,e)},t.prototype.we=function(t,e){var n,r=Ig(t),i=Ul.o;return r.Ot({index:Sp.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ul.o&&e(new Eh(pp(n)),i),i=s,n=o):i=Ul.o}).next(function(){i!==Ul.o&&e(new Eh(pp(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Rg(t,e){return Ig(t).put(function(t,e){return new Sp(0,hp(t.path),e)}(e,t.currentSequenceNumber))}var Dg=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){sh(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return ah(this.inner)},t}(),Mg=function(){function t(){this.changes=new Dg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ih.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Uh.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Dp.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Lg=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Ug(t).put(qg(e),n)},t.prototype.removeEntry=function(t,e){var n=Ug(t),r=qg(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Ug(t).get(qg(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Ug(t).get(qg(e)).next(function(t){return{document:n.ye(e,t),size:mg(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=pf();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=pf(),i=new uf(Eh.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,mg(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Dp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Ug(t).Ot({range:r},function(t,e,r){for(var s=Eh.fromSegments(t);o&&Eh.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=pf(),o=e.path.length+1,s={};if(n.isEqual(ih.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Zp(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Cp.collectionReadTimeIndex}return Ug(t).Ot(s,function(t,n,s){if(t.length===o){var a=Xp(r.R,n);e.path.isPrefixOf(a.key.path)?wd(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Fg(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Vg(t).get(Op.key).next(function(t){return Yl(!!t),t})},t.prototype.me=function(t,e){return Vg(t).put(Op.key,e)},t.prototype.ye=function(t,e){if(e){var n=Xp(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(ih.min()))return n}return Uh.newInvalidDocument(t)},t}(),Fg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Dg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Vl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new hf(function(t,e){return th(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Jp(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=mg(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Jp(e.Ie.R,Uh.newNoDocument(o,ih.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Dp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Mg);function Vg(t){return Gp(t,Op.store)}function Ug(t){return Gp(t,Cp.store)}function qg(t){return t.path.toArray()}var Bg=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Yl(n<r&&n>=0&&r<=11);var o=new Mp("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(yp.store)}(t),function(t){t.createObjectStore(mp.store,{keyPath:mp.keyPath}),t.createObjectStore(vp.store,{keyPath:vp.keyPath,autoIncrement:!0}).createIndex(vp.userMutationsIndex,vp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(bp.store)}(t),Hg(t),function(t){t.createObjectStore(Cp.store)}(t));var s=Dp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Sp.store),t.deleteObjectStore(Ep.store),t.deleteObjectStore(Tp.store)}(t),Hg(t)),s=s.next(function(){return function(t){var e=t.store(Tp.store),n=new Tp(0,0,ih.min().toTimestamp(),0);return e.put(Tp.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(vp.store).Nt().next(function(n){t.deleteObjectStore(vp.store),t.createObjectStore(vp.store,{keyPath:vp.keyPath,autoIncrement:!0}).createIndex(vp.userMutationsIndex,vp.userMutationsKeyPath,{unique:!0});var r=e.store(vp.store),i=n.map(function(t){return r.put(t)});return Dp.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(xp.store,{keyPath:xp.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Op.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Cp.store);e.createIndex(Cp.readTimeIndex,Cp.readTimeIndexPath,{unique:!1}),e.createIndex(Cp.collectionReadTimeIndex,Cp.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Ap.store,{keyPath:Ap.keyPath})}(t),function(t){t.createObjectStore(jp.store,{keyPath:jp.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Cp.store).Ot(function(t,n){e+=mg(n)}).next(function(){var n=new Op(e);return t.store(Op.store).put(Op.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(mp.store),r=t.store(vp.store);return n.Nt().next(function(n){return Dp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(vp.userMutationsIndex,i).next(function(r){return Dp.forEach(r,function(r){Yl(r.userId===n.userId);var i=rg(e.R,r);return yg(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Sp.store),n=t.store(Cp.store);return t.store(Tp.store).get(Tp.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new ch(n),s=function(t){return[0,hp(t)]}(o);r.push(e.get(s).next(function(n){return n?Dp.resolve():function(n){return e.put(new Sp(0,hp(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Dp.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Ip.store,{keyPath:Ip.keyPath});var n=e.store(Ip.store),r=new hg,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:hp(i)})}};return e.store(Cp.store).Ot({kt:!0},function(t,e){var n=new ch(t);return i(n.popLast())}).next(function(){return e.store(bp.store).Ot({kt:!0},function(t,e){var n=pp(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Ep.store);return n.Ot(function(t,r){var i=ig(r),o=og(e.R,i);return n.put(o)})},t}();function Hg(t){t.createObjectStore(Sp.store,{keyPath:Sp.keyPath}).createIndex(Sp.documentTargetsIndex,Sp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ep.store,{keyPath:Ep.keyPath}).createIndex(Ep.queryTargetsIndexName,Ep.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Tp.store)}var Qg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zg=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Bl(ql.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pg(this,i),this.Le=n+"main",this.R=new Yp(u),this.Be=new Lp(this.Le,11,new Bg(this.R)),this.qe=new Eg(this.referenceDelegate,this.R),this.Ut=new dg,this.Ue=function(t,e){return new Lg(t,e)}(this.R,this.Ut),this.Qe=new ag,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Gl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Bl(ql.FAILED_PRECONDITION,Qg);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Ul(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Vl.b)(e,void 0,void 0,function(){return Object(Vl.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Vl.b)(e,void 0,void 0,function(){return Object(Vl.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Vl.b)(e,void 0,void 0,function(){return Object(Vl.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Wg(e).put(new xp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Up(e))return zl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return zl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Gg(t).get(yp.key).next(function(t){return Dp.resolve(e.tn(t))})},t.prototype.en=function(t){return Wg(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Vl.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Vl.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Gp(t,xp.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Dp.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Dp.resolve(!0):Gg(t).get(yp.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Bl(ql.FAILED_PRECONDITION,Qg);return!1}}return!(!e.networkEnabled||!e.inForeground)||Wg(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&zl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Vl.b)(this,void 0,void 0,function(){var t=this;return Object(Vl.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[yp.store,xp.store],function(e){var n=new zp(e,Ul.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Wg(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return vg.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return zl("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",kp,function(o){return r=new zp(o,i.Ne?i.Ne.next():Ul.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Gl("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Bl(ql.FAILED_PRECONDITION,Np);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Gg(t).get(yp.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Bl(ql.FAILED_PRECONDITION,Qg)})},t.prototype.Ze=function(t){var e=new yp(this.clientId,this.allowTabSynchronization,Date.now());return Gg(t).put(yp.key,e)},t.yt=function(){return Lp.yt()},t.prototype.Xe=function(t){var e=this,n=Gg(t);return n.get(yp.key).next(function(t){return e.tn(t)?(zl("IndexedDbPersistence","Releasing primary lease."),n.delete(yp.key)):Dp.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Gl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return zl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Gl("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Gl("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Gg(t){return Gp(t,yp.store)}function Wg(t){return Gp(t,xp.store)}function Kg(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var $g=function(t,e){this.progress=t,this.wn=e},Yg=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Eh.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):pd(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Eh(e)).next(function(t){var e=yf();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=yf();return this.Ut.getCollectionParents(t,i).next(function(s){return Dp.forEach(s,function(s){var a=function(t,e){return new ad(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Uh.newInvalidDocument(c),r=r.insert(c,l)),zd(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){wd(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=_f(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Yd&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Xg=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=_f(),i=_f(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Jg=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ih.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(ld(e)||hd(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Ql()<=Ls.a.DEBUG&&zl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),_d(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new hf(Cd(t));return e.forEach(function(e,r){wd(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Ql()<=Ls.a.DEBUG&&zl("QueryEngine","Using full collection scan to execute query:",_d(e)),this.Sn.getDocumentsMatchingQuery(t,e,ih.min())},t}(),Zg=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new uf(th),this.kn=new Dg(function(t){return Hh(t)},Qh),this.On=ih.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Yg(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function ty(t,e,n,r){return new Zg(t,e,n,r)}function ey(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Vl.d)(this,function(s){switch(s.label){case 0:return n=Xl(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Yg(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=_f(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function ny(t,e){var n=Xl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Dp.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Yl(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function ry(t){var e=Xl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function iy(t,e){var n=Xl(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Yl(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=pf();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(oy(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(ih.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Dp.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function oy(t,e,n,r,i){var o=_f();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=pf();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(ih.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):zl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function sy(t,e){var n=Xl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function ay(t,e){var n=Xl(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Dp.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new $p(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function uy(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Vl.d)(this,function(a){switch(a.label){case 0:r=Xl(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Up(s=a.sent()))throw s;return zl("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function cy(t,e,n){var r=Xl(t),i=ih.min(),o=_f();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Xl(t),i=r.kn.get(n);return void 0!==i?Dp.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,yd(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ih.min(),n?o:_f())}).next(function(t){return{documents:t,Bn:o}})})}function ly(t,e){var n=Xl(t),r=Xl(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function hy(t){var e=Xl(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Xl(t),i=pf(),o=Zp(n),s=Ug(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:Cp.readTimeIndex,range:a},function(t,e){var n=Xp(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:tg(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function dy(t){return Object(Vl.b)(this,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(n){return[2,(e=Xl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Ug(t),n=ih.min();return e.Ot({index:Cp.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=tg(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function fy(t,e,n,r){return Object(Vl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(Vl.d)(this,function(p){switch(p.label){case 0:for(i=Xl(t),o=_f(),s=pf(),a=vf(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,ay(i,function(t){return yd(cd(ch.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return oy(t,d,s,ih.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function py(t,e,n){return void 0===n&&(n=_f()),Object(Vl.b)(this,void 0,void 0,function(){var r,i;return Object(Vl.d)(this,function(o){switch(o.label){case 0:return[4,ay(t,yd(sg(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Xl(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Ff(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(fh.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var gy=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Dp.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Ff(n.createTime)}),Dp.resolve()},t.prototype.getNamedQuery=function(t,e){return Dp.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:sg(t.bundledQuery),readTime:Ff(t.readTime)}}(e)),Dp.resolve()},t}(),yy=function(){function t(){this.Wn=new hf(my.Gn),this.zn=new hf(my.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new my(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new my(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Eh(new ch([])),r=new my(n,t),i=new my(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Eh(new ch([])),n=new my(e,t),r=new my(e,t+1),i=_f();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new my(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),my=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Eh.comparator(t.key,e.key)||th(t.ns,e.ns)},t.Hn=function(t,e){return th(t.ns,e.ns)||Eh.comparator(t.key,e.key)},t}(),vy=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new hf(my.Gn)}return t.prototype.checkEmpty=function(t){return Dp.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Wp(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new my(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Dp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Dp.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Dp.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Dp.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Dp.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new my(e,0),i=new my(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Dp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new hf(th);return e.forEach(function(t){var e=new my(t,0),i=new my(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Dp.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Eh.isDocumentKey(i)||(i=i.child(""));var o=new my(new Eh(i),0),s=new hf(th);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Dp.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Yl(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Dp.forEach(e.mutations,function(i){var o=new my(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new my(e,0),r=this.rs.firstAfterOrEqual(n);return Dp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Dp.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),by=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new uf(Eh.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Dp.resolve(n?n.document.clone():Uh.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=pf();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Uh.newInvalidDocument(t))}),Dp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=pf(),i=new Eh(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||wd(e,u)&&(r=r.insert(u.key,u.clone()))}return Dp.resolve(r)},t.prototype.fs=function(t,e){return Dp.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new _y(this)},t.prototype.getSize=function(t){return Dp.resolve(this.size)},t}(),_y=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Vl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Dp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Mg),wy=function(){function t(t){this.persistence=t,this.ds=new Dg(function(t){return Hh(t)},Qh),this.lastRemoteSnapshotVersion=ih.min(),this.highestTargetId=0,this.ws=0,this._s=new yy,this.targetCount=0,this.ys=Og.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Dp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Dp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Dp.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Dp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Dp.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Og(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Dp.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Dp.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Dp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Dp.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Dp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Dp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Dp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Dp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Dp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Dp.resolve(n)},t.prototype.containsKey=function(t,e){return Dp.resolve(this._s.containsKey(e))},t}(),Cy=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ul(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new wy(this),this.Ut=new lg,this.Ue=function(t,e){return new by(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Yp(e),this.Qe=new gy(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new vy(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;zl("MemoryPersistence","Starting transaction:",t);var i=new Oy(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Dp.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Oy=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Vl.c)(e,t),e}(Pp),Ey=function(){function t(t){this.persistence=t,this.As=new yy,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw $l()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Dp.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Dp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Dp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dp.forEach(this.vs,function(r){var i=Eh.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Dp.or([function(){return Dp.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Sy=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Ty(t,e){return"firestore_clients_"+t+"_"+e}function Iy(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function xy(t,e){return"firestore_targets_"+t+"_"+e}Sy.UNAUTHENTICATED=new Sy(null),Sy.GOOGLE_CREDENTIALS=new Sy("google-credentials-uid"),Sy.FIRST_PARTY=new Sy("first-party-uid");var Ay=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Bl(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Gl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),jy=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Bl(i.error.code,i.error.message)),o?new t(e,i.state,r):(Gl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ky=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Cf(),s=0;i&&s<r.activeTargetIds.length;++s)i=Oh(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Gl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ny=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Gl("SharedClientState","Failed to parse online state: "+e),null)},t}(),Py=function(){function t(){this.activeTargetIds=Cf()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ry=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new uf(th),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Ty(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Py),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Vl.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Vl.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Ty(this.persistenceKey,r)))&&(o=ky.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(xy(this.persistenceKey,t));if(n){var r=jy.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(xy(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return zl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){zl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){zl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(zl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Gl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Vl.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Vl.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Ul.o;if(null!=t)try{var n=JSON.parse(t);Yl("number"==typeof n),e=n}catch(t){Gl("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ul.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Ay(this.currentUser,t,e,n),i=Iy(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Iy(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=xy(this.persistenceKey,t),i=new jy(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return ky.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Ay.Vs(new Sy(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return jy.Vs(r,e)},t.prototype.js=function(t){return Ny.Vs(t)},t.prototype.ii=function(t){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(zl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Cf();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Dy=function(){function t(){this.li=new Py,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Py,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),My=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Ly=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){zl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){zl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Fy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Vy=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Uy=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Vl.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Fl;s.listenOnce(Dl.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Rl.NO_ERROR:var e=s.getResponseJson();zl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Rl.TIMEOUT:zl("Connection",'RPC "'+t+'" timed out'),o(new Bl(ql.DEADLINE_EXCEEDED,"Request time out"));break;case Rl.HTTP_ERROR:var n=s.getStatus();if(zl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ql).indexOf(e)>=0?e:ql.UNKNOWN}(r.status);o(new Bl(a,r.message))}else o(new Bl(ql.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Bl(ql.UNAVAILABLE,"Connection failed."));break;default:$l()}}finally{zl("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Al,i=Nu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(Ms.u)()||Object(Ms.x)()||Object(Ms.r)()||Object(Ms.t)()||Object(Ms.y)()||Object(Ms.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");zl("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Vy({Ei:function(t){c?zl("Connection","Not sending because WebChannel is closed:",t):(u||(zl("Connection","Opening WebChannel transport."),a.open(),u=!0),zl("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ll.EventType.OPEN,function(){c||zl("Connection","WebChannel transport opened.")}),h(a,Ll.EventType.CLOSE,function(){c||(c=!0,zl("Connection","WebChannel transport closed"),l.Vi())}),h(a,Ll.EventType.ERROR,function(t){c||(c=!0,Wl("Connection","WebChannel transport errored:",t),l.Vi(new Bl(ql.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ll.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Yl(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){zl("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=tf[t];if(void 0!==e)return af(e)}(i),s=r.message;void 0===o&&(o=ql.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Bl(o,s)),a.close()}else zl("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Ml.STAT_EVENT,function(t){10===t.stat?zl("Connection","Detected buffering proxy"):11===t.stat&&zl("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);zl("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return zl("RestConnection","Received: ",t),t},function(e){throw Wl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.3",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Fy[t]},t}());function qy(){return"undefined"!=typeof window?window:null}function By(){return"undefined"!=typeof document?document:null}function Hy(t){return new Rf(t,!0)}var Qy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&zl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),zy=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Qy(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ql.RESOURCE_EXHAUSTED?(Gl(e.toString()),Gl("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===ql.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Bl(ql.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Vl.b)(t,void 0,void 0,function(){return Object(Vl.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return zl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(zl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Gy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Vl.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:$l()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Yl(void 0===e||"string"==typeof e),fh.fromBase64String(e||"")):(Yl(void 0===e||e instanceof Uint8Array),fh.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ql.UNKNOWN:af(t.code);return new Bl(e,t.message||"")}(a);n=new If(r,i,o,s||null)}else if("documentChange"in e){i=Bf(t,(r=e.documentChange).document.name),o=Ff(r.document.updateTime);var a=new Fh({mapValue:{fields:r.document.fields}}),u=(s=Uh.newFoundDocument(i,o,a),r.targetIds||[]);n=new Sf(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Bf(t,(r=e.documentDelete).document),o=r.readTime?Ff(r.readTime):ih.min(),a=Uh.newNoDocument(i,o),n=new Sf([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Bf(t,(r=e.documentRemove).document),n=new Sf([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return $l();var c=e.filter;i=new of(r=c.count||0),n=new Tf(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return ih.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ih.min():e.readTime?Ff(e.readTime):ih.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=zf(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=zh(r)?{documents:Xf(t,r)}:{query:Jf(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Mf(t,e.resumeToken):e.snapshotVersion.compareTo(ih.min())>0&&(n.readTime=Df(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return $l()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=zf(this.R),e.removeTarget=t,this.cr(e)},e}(zy),Wy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Vl.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Yl(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Yl(void 0!==e),t.map(function(t){return function(t,e){var n=Ff(t.updateTime?t.updateTime:e);return n.isEqual(ih.min())&&(n=Ff(e)),new Ud(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Ff(t.commitTime);return this.listener.Tr(n,e)}return Yl(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=zf(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return $f(e.R,t)})};this.cr(n)},e}(zy),Ky=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Vl.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Bl(ql.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw t.code===ql.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw t.code===ql.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Rr=!1},e}(function(){}),$y=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Gl(e),this.Vr=!1):zl("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Yy=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Vl.b)(o,void 0,void 0,function(){return Object(Vl.d)(this,function(t){switch(t.label){case 0:return om(this)?(zl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Vl.b)(this,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(n){switch(n.label){case 0:return(e=Xl(t)).$r.add(4),[4,Jy(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Xy(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new $y(n,r)};function Xy(t){return Object(Vl.b)(this,void 0,void 0,function(){var e,n;return Object(Vl.d)(this,function(r){switch(r.label){case 0:if(!om(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Jy(t){return Object(Vl.b)(this,void 0,void 0,function(){var e,n;return Object(Vl.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Zy(t,e){var n=Xl(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),im(n)?rm(n):_m(n).er()&&em(n,e))}function tm(t,e){var n=Xl(t),r=_m(n);n.Or.delete(e),r.er()&&nm(n,e),0===n.Or.size&&(r.er()?r.ir():om(n)&&n.Br.set("Unknown"))}function em(t,e){t.qr.U(e.targetId),_m(t).mr(e)}function nm(t,e){t.qr.U(e),_m(t).yr(e)}function rm(t){t.qr=new Af({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),_m(t).start(),t.Br.Sr()}function im(t){return om(t)&&!_m(t).tr()&&t.Or.size>0}function om(t){return 0===Xl(t).$r.size}function sm(t){t.qr=void 0}function am(t){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(e){return t.Or.forEach(function(e,n){em(t,e)}),[2]})})}function um(t,e){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(n){return sm(t),im(t)?(t.Br.Nr(e),rm(t)):t.Br.set("Unknown"),[2]})})}function cm(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var r,i,o;return Object(Vl.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof If&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Vl.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),zl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,lm(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Sf?t.qr.X(e):e instanceof Tf?t.qr.rt(e):t.qr.et(e),n.isEqual(ih.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,ry(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(fh.EMPTY_BYTE_STRING,n.snapshotVersion)),nm(t,e);var r=new $p(n.target,e,1,n.sequenceNumber);em(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return zl("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,lm(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function lm(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var r=this;return Object(Vl.d)(this,function(i){switch(i.label){case 0:if(!Up(e))throw e;return t.$r.add(1),[4,Jy(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return ry(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Vl.b)(r,void 0,void 0,function(){return Object(Vl.d)(this,function(e){switch(e.label){case 0:return zl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Xy(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function hm(t,e){return e().catch(function(n){return lm(t,n,e)})}function dm(t){return Object(Vl.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Vl.d)(this,function(s){switch(s.label){case 0:e=Xl(t),n=wm(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return om(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,sy(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=wm(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,lm(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return fm(e)&&pm(e),[2]}})})}function fm(t){return om(t)&&!wm(t).tr()&&t.kr.length>0}function pm(t){wm(t).start()}function gm(t){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(e){return wm(t).Ar(),[2]})})}function ym(t){return Object(Vl.b)(this,void 0,void 0,function(){var e,n,r;return Object(Vl.d)(this,function(i){for(e=wm(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function mm(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var r,i;return Object(Vl.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Kp.from(r,e,n),[4,hm(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,dm(t)];case 2:return o.sent(),[2]}})})}function vm(t,e){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(n){switch(n.label){case 0:return e&&wm(t).pr?[4,function(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r;return Object(Vl.d)(this,function(i){switch(i.label){case 0:return sf(r=e.code)&&r!==ql.ABORTED?(n=t.kr.shift(),wm(t).sr(),[4,hm(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,dm(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return fm(t)&&pm(t),[2]}})})}function bm(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n;return Object(Vl.d)(this,function(r){switch(r.label){case 0:return n=Xl(t),e?(n.$r.delete(2),[4,Xy(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Jy(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function _m(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Xl(t);return r.br(),new Gy(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:am.bind(null,t),Ri:um.bind(null,t),_r:cm.bind(null,t)}),t.Mr.push(function(n){return Object(Vl.b)(e,void 0,void 0,function(){return Object(Vl.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),im(t)?rm(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),sm(t),e.label=3;case 3:return[2]}})})})),t.Ur}function wm(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Xl(t);return r.br(),new Wy(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:gm.bind(null,t),Ri:vm.bind(null,t),Ir:ym.bind(null,t),Tr:mm.bind(null,t)}),t.Mr.push(function(n){return Object(Vl.b)(e,void 0,void 0,function(){return Object(Vl.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,dm(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(zl("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Cm=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Rp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bl(ql.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Om(t,e){if(Gl("AsyncQueue",e+": "+t),Up(t))return new Bl(ql.UNAVAILABLE,e+": "+t);throw t}var Em=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Eh.comparator(e.key,n.key)}:function(t,e){return Eh.comparator(t.key,e.key)},this.keyedMap=yf(),this.sortedSet=new uf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Sm=function(){function t(){this.Kr=new uf(Eh.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):$l():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Tm=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Em.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&vd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Im=function(){this.Wr=void 0,this.listeners=[]},xm=function(){this.queries=new Dg(function(t){return bd(t)},vd),this.onlineState="Unknown",this.Gr=new Set};function Am(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Vl.d)(this,function(c){switch(c.label){case 0:if(n=Xl(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Im),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Om(a,"Initialization of query '"+_d(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Pm(n),[2]}})})}function jm(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Vl.d)(this,function(a){return n=Xl(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function km(t,e){for(var n=Xl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Pm(n)}function Nm(t,e,n){var r=Xl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Pm(t){t.Gr.forEach(function(t){t.next()})}var Rm=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Tm(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Tm.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Dm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Mm=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Bf(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Kf(this.R,t.document,!1):Uh.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Ff(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Mm(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||_f()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Vl.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Vl.d)(this,function(o){switch(o.label){case 0:return[4,fy(this.localStore,new Mm(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,py(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new $g(Object.assign({},this.progress),t))]}})})}}();var Lm=function(t){this.key=t},Fm=function(t){this.key=t},Vm=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=_f(),this.mutatedKeys=_f(),this.lo=Cd(t),this.fo=new Em(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Sm,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=ld(this.query)&&i.size===this.query.limit?i.last():null,c=hd(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=wd(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),ld(this.query)||hd(this.query))for(;s.size>this.query.limit;){var l=ld(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $l()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Tm(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Sm,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=_f(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Fm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Lm(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=_f();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Tm.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Um=function(t,e,n){this.query=t,this.targetId=e,this.view=n},qm=function(t){this.key=t,this.bo=!1},Bm=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Dg(function(t){return bd(t)},vd),this.Vo=new Map,this.So=new Set,this.Do=new uf(Eh.comparator),this.Co=new Map,this.No=new yy,this.xo={},this.Fo=new Map,this.ko=Og.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Hm(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Vl.d)(this,function(a){switch(a.label){case 0:return n=vv(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,ay(n.localStore,yd(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Qm(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Zy(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Qm(t,e,n,r){return Object(Vl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Vl.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Vl.b)(this,void 0,void 0,function(){var i,o,s;return Object(Vl.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,cy(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(rv(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,cy(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Vm(e,i.Bn),s=o._o(i.documents),a=Ef.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),rv(t,n,u.To),c=new Um(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function zm(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vl.d)(this,function(o){switch(o.label){case 0:return n=Xl(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!vd(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,uy(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),tm(n.remoteStore,r.targetId),ev(n,r.targetId)}).catch(xg)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ev(n,r.targetId),[4,uy(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Gm(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Vl.d)(this,function(a){switch(a.label){case 0:r=bv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Xl(t),i=rh.now(),o=e.reduce(function(t,e){return t.add(e.key)},_f());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Gd(c,n.get(c.key));null!=l&&s.push(new Yd(c.key,l,Vh(l.toProto().mapValue),qd.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new uf(th)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,sv(r,i.changes)];case 3:return a.sent(),[4,dm(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Om(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Wm(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r;return Object(Vl.d)(this,function(i){switch(i.label){case 0:n=Xl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,iy(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Yl(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Yl(r.bo):t.removedDocuments.size>0&&(Yl(r.bo),r.bo=!1))}),[4,sv(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,xg(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Km(t,e,n){var r=Xl(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Xl(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Pm(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $m(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Vl.d)(this,function(c){switch(c.label){case 0:return(r=Xl(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new uf(Eh.comparator)).insert(o,Uh.newNoDocument(o,ih.min())),a=_f().add(o),u=new Of(ih.min(),new Map,new hf(th),s,a),[4,Wm(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),ov(r),[3,4];case 2:return[4,uy(r.localStore,e,!1).then(function(){return ev(r,e,n)}).catch(xg)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Ym(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vl.d)(this,function(o){switch(o.label){case 0:n=Xl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,ny(n.localStore,e)];case 2:return i=o.sent(),tv(n,r,null),Zm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,sv(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,xg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Xm(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var r,i;return Object(Vl.d)(this,function(o){switch(o.label){case 0:r=Xl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Xl(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Yl(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),tv(r,e,n),Zm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,sv(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,xg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Jm(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Vl.d)(this,function(a){switch(a.label){case 0:om((n=Xl(t)).remoteStore)||zl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Xl(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Om(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Zm(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function tv(t,e,n){var r=Xl(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function ev(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||nv(t,e)})}function nv(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(tm(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ov(t))}function rv(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Lm?(t.No.addReference(o.key,e),iv(t,o)):o instanceof Fm?(zl("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||nv(t,o.key)):$l()}}function iv(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(zl("SyncEngine","New document in limbo: "+n),t.So.add(r),ov(t))}function ov(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Eh(ch.fromString(e)),r=t.ko.next();t.Co.set(r,new qm(n)),t.Do=t.Do.insert(n,r),Zy(t.remoteStore,new $p(yd(cd(n.path)),r,2,Ul.o))}}function sv(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Vl.d)(this,function(a){switch(a.label){case 0:return r=Xl(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Xg.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Vl.d)(this,function(l){switch(l.label){case 0:n=Xl(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Dp.forEach(e,function(e){return Dp.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Dp.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Up(r=l.sent()))throw r;return zl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function av(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r;return Object(Vl.d)(this,function(i){switch(i.label){case 0:return(n=Xl(t)).currentUser.isEqual(e)?[3,3]:(zl("SyncEngine","User change. New user:",e.toKey()),[4,ey(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Bl(ql.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,sv(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function uv(t,e){var n=Xl(t),r=n.Co.get(e);if(r&&r.bo)return _f().add(r.key);var i=_f(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function cv(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vl.d)(this,function(o){switch(o.label){case 0:return[4,cy((n=Xl(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&rv(n,e.targetId,i.To),i)]}})})}function lv(t){return Object(Vl.b)(this,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(n){return[2,hy((e=Xl(t)).localStore).then(function(t){return sv(e,t)})]})})}function hv(t,e,n,r){return Object(Vl.b)(this,void 0,void 0,function(){var i,o;return Object(Vl.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Xl(t),r=Xl(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Dp.resolve(null)})})}((i=Xl(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,dm(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(tv(i,e,r||null),Zm(i,e),function(t,e){Xl(Xl(t)._n).Gt(e)}(i.localStore,e)):$l(),s.label=4;case 4:return[4,sv(i,o)];case 5:return s.sent(),[3,7];case 6:zl("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function dv(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Vl.d)(this,function(c){switch(c.label){case 0:return vv(n=Xl(t)),bv(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,fv(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,bm(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Zy(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return ev(n,e),uy(n.localStore,e,!0)}),tm(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,fv(n,a)];case 5:return c.sent(),function(t){var e=Xl(t);e.Co.forEach(function(t,n){tm(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new uf(Eh.comparator)}(n),n.Oo=!1,[4,bm(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function fv(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(Vl.d)(this,function(g){switch(g.label){case 0:n=Xl(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,ay(n.localStore,yd(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,cv(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,ly(n.localStore,a)];case 8:return p=g.sent(),[4,ay(n.localStore,p)];case 9:return u=g.sent(),[4,Qm(n,pv(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function pv(t){return ud(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function gv(t){var e=Xl(t);return Xl(Xl(e.localStore).persistence).fn()}function yv(t,e,n,r){return Object(Vl.b)(this,void 0,void 0,function(){var i,o,s;return Object(Vl.d)(this,function(a){switch(a.label){case 0:return(i=Xl(t)).Oo?(zl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,hy(i.localStore)];case 3:return o=a.sent(),s=Of.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,sv(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,uy(i.localStore,e,!0)];case 6:return a.sent(),ev(i,e,r),[3,8];case 7:$l(),a.label=8;case 8:return[2]}})})}function mv(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Vl.d)(this,function(d){switch(d.label){case 0:if(!(r=vv(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(zl("SyncEngine","Adding an already active target "+s),[3,5]):[4,ly(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,ay(r.localStore,a)];case 3:return u=d.sent(),[4,Qm(r,pv(a),u.targetId,!1)];case 4:d.sent(),Zy(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Vl.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,uy(r.localStore,t,!1).then(function(){tm(r.remoteStore,t),ev(r,t)}).catch(xg)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function vv(t){var e=Xl(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$m.bind(null,e),e.vo._r=km.bind(null,e.eventManager),e.vo.Mo=Nm.bind(null,e.eventManager),e}function bv(t){var e=Xl(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ym.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xm.bind(null,e),e}var _v=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(e){switch(e.label){case 0:return this.R=Hy(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return ty(this.persistence,new Jg,t.initialUser,this.R)},t.prototype.qo=function(t){return new Cy(Ey.bs,this.R)},t.prototype.Bo=function(t){return new Dy},t.prototype.terminate=function(){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),wv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Vl.c)(e,t),e.prototype.initialize=function(e){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,dy(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,bv(this.Ko.syncEngine)];case 4:return n.sent(),[4,dm(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return ty(this.persistence,new Jg,t.initialUser,this.R)},e.prototype.Uo=function(t){return new kg(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Kg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?gg.withCacheSize(this.cacheSizeBytes):gg.DEFAULT;return new zg(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,qy(),By(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Dy},e}(_v),Cv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Vl.c)(e,t),e.prototype.initialize=function(e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r=this;return Object(Vl.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Ry?(this.sharedClientState.syncEngine={ui:hv.bind(null,n),ai:yv.bind(null,n),hi:mv.bind(null,n),fn:gv.bind(null,n),ci:lv.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Vl.b)(r,void 0,void 0,function(){return Object(Vl.d)(this,function(e){switch(e.label){case 0:return[4,dv(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=qy();if(!Ry.yt(e))throw new Bl(ql.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Kg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ry(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(wv),Ov=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n=this;return Object(Vl.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Km(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=av.bind(null,this.syncEngine),[4,bm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new xm},t.prototype.createDatastore=function(t){var e=Hy(t.databaseInfo.databaseId),n=new Uy(t.databaseInfo);return function(t,e,n){return new Ky(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Km(s.syncEngine,t,0)},o=Ly.yt()?new Ly:new My,new Yy(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Bm(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Vl.b)(this,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(n){switch(n.label){case 0:return e=Xl(t),zl("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Jy(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Ev=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Sv=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Rp,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Vl.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Vl.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Dm(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Vl.b)(this,void 0,void 0,function(){var t,e;return Object(Vl.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Vl.b)(this,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Vl.b)(this,void 0,void 0,function(){var t,e;return Object(Vl.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Vl.b)(this,void 0,void 0,function(){var e,n=this;return Object(Vl.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Bl(ql.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Vl.d)(this,function(u){switch(u.label){case 0:return n=Xl(t),r=zf(n.R)+"/documents",i={documents:e.map(function(t){return qf(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Yl(!!e.found);var n=Bf(t,e.found.name),r=Ff(e.found.updateTime),i=new Fh({mapValue:{fields:e.found.fields}});return Uh.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Yl(!!e.missing),Yl(!!e.readTime);var n=Bf(t,e.missing),r=Ff(e.readTime);return Uh.newNoDocument(n,r)}(t,e):$l()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Yl(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new nf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Vl.b)(this,void 0,void 0,function(){var t,e=this;return Object(Vl.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Eh.fromPath(n);e.mutations.push(new rf(r,e.precondition(r)))}),[4,function(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vl.d)(this,function(o){switch(o.label){case 0:return n=Xl(t),r=zf(n.R)+"/documents",i={writes:e.map(function(t){return $f(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw $l();e=ih.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Bl(ql.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?qd.updateTime(e):qd.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ih.min()))throw new Bl(ql.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qd.updateTime(e)}return qd.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Tv=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Qy(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Vl.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Vl.d)(this,function(r){return t=new Sv(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!wh(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!sf(e)}return!1},t}(),Iv=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Sy.UNAUTHENTICATED,this.clientId=Zl.u(),this.credentialListener=function(){},this.receivedInitialUser=new Rp,this.credentials.setChangeListener(function(t){zl("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Bl(ql.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Rp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Vl.b)(t,void 0,void 0,function(){var t,n;return Object(Vl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Om(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function xv(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Vl.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),zl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Vl.b)(i,void 0,void 0,function(){return Object(Vl.d)(this,function(t){switch(t.label){case 0:return[4,ey(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Av(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r;return Object(Vl.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,jv(t)];case 1:return n=i.sent(),zl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Vl.b)(this,void 0,void 0,function(){var n,r;return Object(Vl.d)(this,function(i){switch(i.label){case 0:return(n=Xl(t)).asyncQueue.verifyOperationInProgress(),zl("RemoteStore","RemoteStore received new credentials"),r=om(n),n.$r.add(3),[4,Jy(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Xy(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function jv(t){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(zl("FirestoreClient","Using default OfflineComponentProvider"),[4,xv(t,new _v)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function kv(t){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(zl("FirestoreClient","Using default OnlineComponentProvider"),[4,Av(t,new Ov)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Nv(t){return jv(t).then(function(t){return t.persistence})}function Pv(t){return jv(t).then(function(t){return t.localStore})}function Rv(t){return kv(t).then(function(t){return t.remoteStore})}function Dv(t){return kv(t).then(function(t){return t.syncEngine})}function Mv(t){return Object(Vl.b)(this,void 0,void 0,function(){var e,n;return Object(Vl.d)(this,function(r){switch(r.label){case 0:return[4,kv(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Hm.bind(null,e.syncEngine),n.onUnlisten=zm.bind(null,e.syncEngine),n)]}})})}function Lv(t,e,n){var r=this;void 0===n&&(n={});var i=new Rp;return t.asyncQueue.enqueueAndForget(function(){return Object(Vl.b)(r,void 0,void 0,function(){var r;return Object(Vl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ev({next:function(o){e.enqueueAndForget(function(){return jm(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Bl(ql.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Bl(ql.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Rm(cd(n.path),o,{includeMetadataChanges:!0,so:!0});return Am(t,s)},[4,Mv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Fv(t,e,n){var r=this;void 0===n&&(n={});var i=new Rp;return t.asyncQueue.enqueueAndForget(function(){return Object(Vl.b)(r,void 0,void 0,function(){var r;return Object(Vl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ev({next:function(n){e.enqueueAndForget(function(){return jm(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Bl(ql.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Rm(n,o,{includeMetadataChanges:!0,so:!0});return Am(t,s)},[4,Mv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Vv=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Uv=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),qv=new Map,Bv=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Hv=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Sy.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Qv=function(){function t(t){var e=this;this.oc=null,this.currentUser=Sy.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(zl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Yl("string"==typeof n.accessToken),new Bv(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Yl(null===t||"string"==typeof t),new Sy(t)},t}(),zv=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=Sy.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Gv=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new zv(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(Sy.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Wv(t,e,n){if(!n)throw new Bl(ql.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Kv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Bl(ql.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function $v(t,e,n,r){if(!0===e&&!0===r)throw new Bl(ql.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Yv(t){if(!Eh.isDocumentKey(t))throw new Bl(ql.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Xv(t){if(Eh.isDocumentKey(t))throw new Bl(ql.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Jv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":$l()}function Zv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Bl(ql.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Jv(t);throw new Bl(ql.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function tb(t,e){if(e<=0)throw new Bl(ql.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var eb=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Bl(ql.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Bl(ql.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,$v("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),nb=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new eb({}),this._settingsFrozen=!1,t instanceof Uv?(this._databaseId=t,this._credentials=new Hv):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Bl(ql.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uv(t.options.projectId)}(t),this._credentials=new Qv(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Bl(ql.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Bl(ql.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eb(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Hv;switch(t.type){case"gapi":var e=t.client;return Yl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Gv(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Bl(ql.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=qv.get(this))&&(zl("ComponentProvider","Removing Datastore"),qv.delete(this),t.terminate()),Promise.resolve();var t},t}(),rb=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ob(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ib=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),ob=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,cd(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(Vl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new rb(this.firestore,null,new Eh(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ib);function sb(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Ms.m)(t),Wv("collection","path",e),t instanceof nb)return Xv(n=ch.fromString.apply(ch,Object(Vl.f)([e],r))),new ob(t,null,n);if(!(t instanceof rb||t instanceof ob))throw new Bl(ql.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Xv(n=ch.fromString.apply(ch,Object(Vl.f)([t.path],r)).child(ch.fromString(e))),new ob(t.firestore,null,n)}function ab(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Ms.m)(t),1===arguments.length&&(e=Zl.u()),Wv("doc","path",e),t instanceof nb)return Yv(n=ch.fromString.apply(ch,Object(Vl.f)([e],r))),new rb(t,null,new Eh(n));if(!(t instanceof rb||t instanceof ob))throw new Bl(ql.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Yv(n=t._path.child(ch.fromString.apply(ch,Object(Vl.f)([e],r)))),new rb(t.firestore,t instanceof ob?t._converter:null,new Eh(n))}function ub(t,e){return t=Object(Ms.m)(t),e=Object(Ms.m)(e),(t instanceof rb||t instanceof ob)&&(e instanceof rb||e instanceof ob)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function cb(t,e){return t=Object(Ms.m)(t),e=Object(Ms.m)(e),t instanceof ib&&e instanceof ib&&t.firestore===e.firestore&&vd(t._query,e._query)&&t._converter===e._converter}var lb=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Qy(this,"async_queue_retry"),this.Ec=function(){var e=By();e&&zl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=By();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=By();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Vl.b)(this,void 0,void 0,function(){var t,e=this;return Object(Vl.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Up(t=n.sent()))throw t;return zl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Gl("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Cm.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&$l()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Vl.b)(this,void 0,void 0,function(){var t;return Object(Vl.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function hb(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Rp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var db=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new lb,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Vl.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||pb(this),this._firestoreClient.terminate()},e}(nb);function fb(t){return t._firestoreClient||pb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function pb(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Vv(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Iv(t._credentials,t._queue,r)}function gb(t,e,n){var r=this,i=new Rp;return t.asyncQueue.enqueue(function(){return Object(Vl.b)(r,void 0,void 0,function(){var r;return Object(Vl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,xv(t,n)];case 1:return o.sent(),[4,Av(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ql.FAILED_PRECONDITION||t.code===ql.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function yb(t){if(t._initialized||t._terminated)throw new Bl(ql.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var mb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Bl(ql.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hh(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),vb=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(fh.fromBase64String(e))}catch(e){throw new Bl(ql.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(fh.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),bb=function(t){this._methodName=t},_b=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Bl(ql.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Bl(ql.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return th(this._lat,t._lat)||th(this._long,t._long)},t}(),wb=/^__.*__$/,Cb=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Yd(t,this.data,this.fieldMask,e,this.fieldTransforms):new $d(t,this.data,e,this.fieldTransforms)},t}(),Ob=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Yd(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Eb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $l()}}var Sb=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return zb(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(Eb(this.Dc)&&wb.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),Tb=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Hy(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new Sb({Dc:t,methodName:e,Lc:n,path:hh.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Ib(t){var e=t._freezeSettings(),n=Hy(t._databaseId);return new Tb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xb(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);qb("Data must be an object, but it was:",s,r);var a,u,c=Vb(r,s);if(o.merge)a=new dh(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Bb(e,d[h],n);if(!s.contains(f))throw new Bl(ql.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Gb(l,f)||l.push(f)}a=new dh(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Cb(new Fh(c),a,u)}var Ab=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vl.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(bb);function jb(t,e,n){return new Sb({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var kb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vl.c)(e,t),e.prototype._toFieldTransform=function(t){return new Vd(t.path,new kd)},e.prototype.isEqual=function(t){return t instanceof e},e}(bb),Nb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Vl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=jb(this,t,!0),n=this.qc.map(function(t){return Fb(t,e)}),r=new Nd(n);return new Vd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(bb),Pb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Vl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=jb(this,t,!0),n=this.qc.map(function(t){return Fb(t,e)}),r=new Rd(n);return new Vd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(bb),Rb=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Vl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Md(t.R,Td(t.R,this.Uc));return new Vd(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(bb);function Db(t,e,n,r){var i=t.Bc(1,e,n);qb("Data must be an object, but it was:",i,r);var o=[],s=Fh.empty();sh(r,function(t,r){var a=Qb(e,t,n);r=Object(Ms.m)(r);var u=i.kc(a);if(r instanceof Ab)o.push(a);else{var c=Fb(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new dh(o);return new Ob(s,a,i.fieldTransforms)}function Mb(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Bb(e,r,n)],u=[i];if(o.length%2!=0)throw new Bl(ql.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Bb(e,o[c])),u.push(o[c+1]);for(var l=[],h=Fh.empty(),d=a.length-1;d>=0;--d)if(!Gb(l,a[d])){var f=a[d],p=u[d];p=Object(Ms.m)(p);var g=s.kc(f);if(p instanceof Ab)l.push(f);else{var y=Fb(p,g);null!=y&&(l.push(f),h.set(f,y))}}var m=new dh(l);return new Ob(h,m,s.fieldTransforms)}function Lb(t,e,n,r){return void 0===r&&(r=!1),Fb(n,t.Bc(r?4:3,e))}function Fb(t,e){if(Ub(t=Object(Ms.m)(t)))return qb("Unsupported field value:",e,t),Vb(t,e);if(t instanceof bb)return function(t,e){if(!Eb(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Fb(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Ms.m)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Td(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=rh.fromDate(t);return{timestampValue:Df(e.R,n)}}if(t instanceof rh)return n=new rh(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Df(e.R,n)};if(t instanceof _b)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vb)return{bytesValue:Mf(e.R,t._byteString)};if(t instanceof rb){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Vf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Jv(t))}(t,e)}function Vb(t,e){var n={};return ah(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sh(t,function(t,r){var i=Fb(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Ub(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof rh||t instanceof _b||t instanceof vb||t instanceof rb||t instanceof bb)}function qb(t,e,n){if(!Ub(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Jv(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Bb(t,e,n){if((e=Object(Ms.m)(e))instanceof mb)return e._internalPath;if("string"==typeof e)return Qb(t,e);throw zb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Hb=new RegExp("[~\\*/\\[\\]]");function Qb(t,e,n){if(e.search(Hb)>=0)throw zb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(mb.bind.apply(mb,Object(Vl.f)([void 0],e.split(".")))))._internalPath}catch(r){throw zb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function zb(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Bl(ql.INVALID_ARGUMENT,(a+=". ")+t+u)}function Gb(t,e){return t.some(function(t){return t.isEqual(e)})}var Wb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new rb(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Kb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field($b("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Kb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vl.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Wb);function $b(t,e){return"string"==typeof e?Qb(t,e):e instanceof mb?e._internalPath:e._delegate._internalPath}var Yb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Xb=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Vl.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Jb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field($b("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Wb),Jb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vl.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Xb),Zb=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Yb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Jb(n._firestore,n._userDataWriter,r.key,r,new Yb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Bl(ql.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Jb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Yb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Jb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Yb(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:t_(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function t_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $l()}}function e_(t,e){return t instanceof Xb&&e instanceof Xb?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Zb&&e instanceof Zb&&t._firestore===e._firestore&&cb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function n_(t){if(hd(t)&&0===t.explicitOrderBy.length)throw new Bl(ql.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var r_=function(){};function i_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var o_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Vl.c)(e,t),e.prototype._apply=function(t){var e=Ib(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Bl(ql.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){d_(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(h_(r,t,l[c]));a={arrayValue:{values:u}}}else a=h_(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||d_(s,o),a=Lb(n,"where",s,"in"===o||"not-in"===o);var h=Gh.create(i,o,a);return function(t,e){if(e.g()){var n=fd(t);if(null!==n&&!n.isEqual(e.field))throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=dd(t);null!==r&&f_(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Bl(ql.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new ib(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new ad(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(r_),s_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Vl.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new rd(e,n);return function(t,e){if(null===dd(t)){var n=fd(t);null!==n&&f_(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new ib(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new ad(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(r_),a_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Vl.c)(e,t),e.prototype._apply=function(t){return new ib(t.firestore,t._converter,md(t._query,this.Gc,this.zc))},e}(r_),u_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Vl.c)(e,t),e.prototype._apply=function(t){var e=l_(t,this.type,this.Hc,this.Jc);return new ib(t.firestore,t._converter,function(t,e){return new ad(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(r_),c_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Vl.c)(e,t),e.prototype._apply=function(t){var e=l_(t,this.type,this.Hc,this.Jc);return new ib(t.firestore,t._converter,function(t,e){return new ad(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(r_);function l_(t,e,n,r){if(n[0]=Object(Ms.m)(n[0]),n[0]instanceof Wb)return function(t,e,n,r,i){if(!r)throw new Bl(ql.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=gd(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Nh(e,r.key));else{var c=r.data.field(u.field);if(vh(c))throw new Bl(ql.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ed(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Ib(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Bl(ql.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!pd(t)&&-1!==c.indexOf("/"))throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(ch.fromString(c));if(!Eh.isDocumentKey(l))throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Eh(l);a.push(Nh(e,h))}else{var d=Lb(n,r,c);a.push(d)}}return new ed(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function h_(t,e,n){if("string"==typeof(n=Object(Ms.m)(n))){if(""===n)throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!pd(e)&&-1!==n.indexOf("/"))throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ch.fromString(n));if(!Eh.isDocumentKey(r))throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Nh(t,new Eh(r))}if(n instanceof rb)return Nh(t,n._key);throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Jv(n)+".")}function d_(t,e){if(!Array.isArray(t)||0===t.length)throw new Bl(ql.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Bl(ql.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function f_(t,e,n){if(!n.isEqual(e))throw new Bl(ql.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var p_=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Sh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return yh(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(mh(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw $l()}},t.prototype.convertObject=function(t,e){var n=this,r={};return sh(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new _b(yh(t.latitude),yh(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=bh(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(_h(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=gh(t);return new rh(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ch.fromString(t);Yl(lp(n));var r=new Uv(n.get(1),n.get(3)),i=new Eh(n.popFirst(5));return r.isEqual(e)||Gl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function g_(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var y_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Vl.c)(e,t),e.prototype.convertBytes=function(t){return new vb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new rb(this.firestore,null,e)},e}(p_),m_=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ib(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=v_(t,this._firestore),i=g_(r._converter,e,n),o=xb(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,qd.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=v_(t,this._firestore);return o="string"==typeof(e=Object(Ms.m)(e))||e instanceof mb?Mb(this._dataReader,"WriteBatch.update",s._key,e,n,r):Db(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,qd.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=v_(t,this._firestore);return this._mutations=this._mutations.concat(new nf(e._key,qd.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Bl(ql.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function v_(t,e){if((t=Object(Ms.m)(t)).firestore!==e)throw new Bl(ql.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var b_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Vl.c)(e,t),e.prototype.convertBytes=function(t){return new vb(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new rb(this.firestore,null,e)},e}(p_);function __(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Zv(t,rb);var o=Zv(t.firestore,db),s=Ib(o);return C_(o,[("string"==typeof(e=Object(Ms.m)(e))||e instanceof mb?Mb(s,"updateDoc",t._key,e,n,r):Db(s,"updateDoc",t._key,e)).toMutation(t._key,qd.exists(!0))])}function w_(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Ms.m)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||hb(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(hb(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof rb)c=Zv(t.firestore,db),l=cd(t._key.path),u={next:function(e){i[a]&&i[a](O_(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Zv(t,ib);c=Zv(f.firestore,db),l=f._query;var p=new b_(c);u={next:function(t){i[a]&&i[a](new Zb(c,p,f,t))},error:i[a+1],complete:i[a+2]},n_(t._query)}return function(t,e,n,r){var i=this,o=new Ev(r),s=new Rm(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Vl.b)(i,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(n){switch(n.label){case 0:return e=Am,[4,Mv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Vl.b)(i,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(n){switch(n.label){case 0:return e=jm,[4,Mv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(fb(c),l,h,u)}function C_(t,e){return function(t,e){var n=this,r=new Rp;return t.asyncQueue.enqueueAndForget(function(){return Object(Vl.b)(n,void 0,void 0,function(){var n;return Object(Vl.d)(this,function(i){switch(i.label){case 0:return n=Gm,[4,Dv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(fb(t),e)}function O_(t,e,n){var r=n.docs.get(e._key),i=new b_(t);return new Xb(t,i,e._key,r,new Yb(n.hasPendingWrites,n.fromCache),e._converter)}var E_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Vl.c)(e,t),e.prototype.get=function(e){var n=this,r=v_(e,this._firestore),i=new b_(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Xb(n._firestore,i,r._key,t._document,new Yb(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Ib(t)}return t.prototype.get=function(t){var e=this,n=v_(t,this._firestore),r=new y_(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return $l();var i=t[0];if(i.isFoundDocument())return new Wb(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new Wb(e._firestore,r,n._key,null,n._converter);throw $l()})},t.prototype.set=function(t,e,n){var r=v_(t,this._firestore),i=g_(r._converter,e,n),o=xb(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=v_(t,this._firestore);return o="string"==typeof(e=Object(Ms.m)(e))||e instanceof mb?Mb(this._dataReader,"Transaction.update",s._key,e,n,r):Db(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=v_(t,this._firestore);return this._transaction.delete(e._key),this},t}());function S_(){if("undefined"==typeof Uint8Array)throw new Bl(ql.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function T_(){if("undefined"==typeof atob)throw new Bl(ql.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var I_=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return T_(),new t(vb.fromBase64String(e))},t.fromUint8Array=function(e){return S_(),new t(vb.fromUint8Array(e))},t.prototype.toBase64=function(){return T_(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return S_(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),x_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){yb(t=Zv(t,db));var n=fb(t),r=t._freezeSettings(),i=new Ov;return gb(n,i,new wv(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){yb(t=Zv(t,db));var e=fb(t),n=t._freezeSettings(),r=new Ov;return gb(e,r,new Cv(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Bl(ql.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Rp;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Vl.b)(e,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Vl.b)(this,void 0,void 0,function(){return Object(Vl.d)(this,function(e){switch(e.label){case 0:return Lp.yt()?[4,Lp.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Kg(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),A_=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Uv||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Zv(t,nb))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Wl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Vl.b)(e,void 0,void 0,function(){var e,n;return Object(Vl.d)(this,function(r){switch(r.label){case 0:return[4,Nv(t)];case 1:return e=r.sent(),[4,Rv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Xl(t);return e.$r.delete(0),Xy(e)}(n))]}})})})}(fb(Zv(this._delegate,db)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Vl.b)(e,void 0,void 0,function(){var e,n;return Object(Vl.d)(this,function(r){switch(r.label){case 0:return[4,Nv(t)];case 1:return e=r.sent(),[4,Rv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Vl.b)(this,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(n){switch(n.label){case 0:return(e=Xl(t)).$r.add(0),[4,Jy(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(fb(Zv(this._delegate,db)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&$v("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Rp;return t.asyncQueue.enqueueAndForget(function(){return Object(Vl.b)(e,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(r){switch(r.label){case 0:return e=Jm,[4,Dv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(fb(Zv(this._delegate,db)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ev(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Vl.b)(n,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Xl(t).Gr.add(e),e.next()},[4,Mv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Vl.b)(n,void 0,void 0,function(){var e;return Object(Vl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Xl(t).Gr.delete(e)},[4,Mv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(fb(t=Zv(t,db)),hb(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Bl(ql.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new H_(this,sb(this._delegate,t))}catch(t){throw D_(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new R_(this,ab(this._delegate,t))}catch(t){throw D_(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new U_(this,function(t,e){if(t=Zv(t,nb),Wv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Bl(ql.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ib(t,null,function(t){return new ad(ch.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw D_(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Rp;return t.asyncQueue.enqueueAndForget(function(){return Object(Vl.b)(n,void 0,void 0,function(){var n;return Object(Vl.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return kv(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Tv(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(fb(t),function(n){return e(new E_(t,n))})}(this._delegate,function(n){return t(new k_(e,n))})},t.prototype.batch=function(){var t=this;return fb(this._delegate),new N_(new m_(this._delegate,function(e){return C_(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Bl(ql.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Bl(ql.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),j_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Vl.c)(e,t),e.prototype.convertBytes=function(t){return new I_(new vb(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return R_.Zc(e,this.firestore,null)},e}(p_),k_=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new j_(t)}return t.prototype.get=function(t){var e=this,n=Q_(t);return this._delegate.get(n).then(function(t){return new F_(e._firestore,new Xb(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},t.prototype.set=function(t,e,n){var r=Q_(t);return n?(Kv("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Q_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Vl.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Q_(t);return this._delegate.delete(e),this},t}(),N_=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Q_(t);return n?(Kv("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Q_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Vl.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Q_(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),P_=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Jb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new V_(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new j_(e),n),i.set(n,o)),o},t}();P_.eu=new WeakMap;var R_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new j_(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Bl(ql.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new rb(n._delegate,r,new Eh(e)))},t.Zc=function(e,n,r){return new t(n,new rb(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new H_(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new H_(this.firestore,sb(this._delegate,t))}catch(t){throw D_(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Ms.m)(t))instanceof rb&&ub(this._delegate,t)},t.prototype.set=function(t,e){e=Kv("DocumentReference.set",e);try{return function(t,e,n){t=Zv(t,rb);var r=Zv(t.firestore,db),i=g_(t._converter,e,n);return C_(r,[xb(Ib(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,qd.none())])}(this._delegate,t,e)}catch(t){throw D_(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?__(this._delegate,t):__.apply(void 0,Object(Vl.f)([this._delegate,t,e],n))}catch(t){throw D_(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return C_(Zv((t=this._delegate).firestore,db),[new nf(t._key,qd.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=M_(e),i=L_(e,function(e){return new F_(t.firestore,new Xb(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return w_(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Zv(t,rb);var e=Zv(t.firestore,db),n=fb(e),r=new b_(e);return function(t,e){var n=this,r=new Rp;return t.asyncQueue.enqueueAndForget(function(){return Object(Vl.b)(n,void 0,void 0,function(){var n;return Object(Vl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var r,i;return Object(Vl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Xl(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Bl(ql.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Om(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Pv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Xb(e,r,t._key,n,new Yb(null!==n&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Zv(t,rb);var e=Zv(t.firestore,db);return Lv(fb(e),t._key,{source:"server"}).then(function(n){return O_(e,t,n)})}(this._delegate):function(t){t=Zv(t,rb);var e=Zv(t.firestore,db);return Lv(fb(e),t._key).then(function(n){return O_(e,t,n)})}(this._delegate)).then(function(t){return new F_(e.firestore,new Xb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?P_.tu(this.firestore,e):null))},t}();function D_(t,e,n){return t.message=t.message.replace(e,n),t}function M_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!hb(r))return r}return{}}function L_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=hb(t[0])?t[0]:hb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var F_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new R_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return e_(this._delegate,t._delegate)},t}(),V_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vl.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(F_),U_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new j_(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,i_(this._delegate,function(t,e,n){var r=e,i=$b("where",t);return new o_(i,r,n)}(e,n,r)))}catch(e){throw D_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,i_(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=$b("orderBy",t);return new s_(r,n)}(e,n)))}catch(e){throw D_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,i_(this._delegate,function(t){return tb("limit",t),new a_("limit",t,"F")}(e)))}catch(e){throw D_(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,i_(this._delegate,function(t){return tb("limitToLast",t),new a_("limitToLast",t,"L")}(e)))}catch(e){throw D_(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,i_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new u_("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw D_(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,i_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new u_("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw D_(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,i_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new c_("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw D_(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,i_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new c_("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw D_(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return cb(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Zv(t,ib);var e=Zv(t.firestore,db),n=fb(e),r=new b_(e);return function(t,e){var n=this,r=new Rp;return t.asyncQueue.enqueueAndForget(function(){return Object(Vl.b)(n,void 0,void 0,function(){var n;return Object(Vl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Vl.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Vl.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,cy(t,e,!0)];case 1:return a=u.sent(),r=new Vm(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Om(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Pv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Zb(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Zv(t,ib);var e=Zv(t.firestore,db),n=fb(e),r=new b_(e);return Fv(n,t._query,{source:"server"}).then(function(n){return new Zb(e,r,t,n)})}(this._delegate):function(t){t=Zv(t,ib);var e=Zv(t.firestore,db),n=fb(e),r=new b_(e);return n_(t._query),Fv(n,t._query).then(function(n){return new Zb(e,r,t,n)})}(this._delegate)).then(function(t){return new B_(e.firestore,new Zb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=M_(e),i=L_(e,function(e){return new B_(t.firestore,new Zb(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return w_(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?P_.tu(this.firestore,e):null))},t}(),q_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new V_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),B_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new U_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new V_(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new q_(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new V_(n._firestore,r))})},t.prototype.isEqual=function(t){return e_(this._delegate,t._delegate)},t}(),H_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Vl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new R_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new R_(this.firestore,void 0===t?ab(this._delegate):ab(this._delegate,t))}catch(t){throw D_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Zv(t.firestore,db),r=ab(t),i=g_(t._converter,e);return C_(n,[xb(Ib(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,qd.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new R_(e.firestore,t)})},e.prototype.isEqual=function(t){return ub(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?P_.tu(this.firestore,t):null))},e}(U_);function Q_(t){return Zv(t,rb)}var z_,G_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(mb.bind.apply(mb,Object(Vl.f)([void 0],t)))}return t.documentId=function(){return new t(hh.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Ms.m)(t))instanceof mb&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),W_=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new kb("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ab("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Nb("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pb("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Rb("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),K_=n("/6Yf"),$_={Firestore:A_,GeoPoint:_b,Timestamp:rh,Blob:I_,Transaction:k_,WriteBatch:N_,DocumentReference:R_,DocumentSnapshot:F_,Query:U_,QueryDocumentSnapshot:V_,QuerySnapshot:B_,CollectionReference:H_,FieldPath:G_,FieldValue:W_,setLogLevel:function(t){Hl.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function Y_(t,e){return function(t,e=Ao.a){return new _t.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function X_(t,e){return Y_(t,e).pipe(Object(Ct.a)(t=>({payload:t,type:"query"})))}function J_(t,e){return X_(t,e).pipe(rn(void 0),Ns(),Object(Ct.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Z_(t,e,n){return J_(t,n).pipe(on((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return tw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return tw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),No(),Object(Ct.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function tw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function ew(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new K_.a("firestore",function(t){return function(t,e){return new A_(t,new db(t,e),new x_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},$_)))})(z_=Ds.a),z_.registerVersion("@firebase/firestore","2.2.3");class nw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=J_(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Ct.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(rn(void 0),Ns(),un(([t,e])=>e.length>0||!t),Object(Ct.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(on((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=ew(t);return Z_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return X_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ct.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(bt.a)(this.query.get(t)).pipe(Object(Uo.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new rw(this.ref.doc(t),this.afs)}}class rw{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=cw(n,e);return new nw(r,i,this.afs)}snapshotChanges(){return Y_(this.ref,this.afs.schedulers.outsideAngular).pipe(rn(void 0),Ns(),Object(Ct.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Ct.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(bt.a)(this.ref.get(t)).pipe(Object(Uo.b)(this.afs.schedulers.insideAngular))}}class iw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?J_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ct.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),un(t=>t.length>0),this.afs.keepUnstableUntilFirst):J_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(on((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=ew(t);return Z_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return X_(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ct.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(bt.a)(this.query.get(t)).pipe(Object(Uo.b)(this.afs.schedulers.insideAngular))}}const ow=new r.r("angularfire2.enableFirestorePersistence"),sw=new r.r("angularfire2.firestore.persistenceSettings"),aw=new r.r("angularfire2.firestore.settings"),uw=new r.r("angularfire2.firestore.use-emulator");function cw(t,e=(t=>t)){return{query:e(t),ref:t}}let lw=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Vo.d(o),this.keepUnstableUntilFirst=Object(Vo.h)(this.schedulers);const c=Object(Vo.g)(t,o,e);!es.a.auth&&u&&Object(Vo.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Vo.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!U(i)){const e=()=>{try{return Object(bt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(z_){return"undefined"!=typeof console&&console.warn(z_),Object(Ae.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Ae.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=cw(n,e),o=this.schedulers.ngZone.run(()=>r);return new nw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new iw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new rw(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(Vo.c),r.Qb(Vo.b,8),r.Qb(ow,8),r.Qb(aw,8),r.Qb(r.C),r.Qb(r.A),r.Qb(sw,8),r.Qb(uw,8),r.Qb(Ko,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Qb)(Vo.c),Object(r.Qb)(Vo.b,8),Object(r.Qb)(ow,8),Object(r.Qb)(aw,8),Object(r.Qb)(r.C),Object(r.Qb)(r.A),Object(r.Qb)(sw,8),Object(r.Qb)(uw,8),Object(r.Qb)(Ko,8))},token:t,providedIn:"any"}),t})(),hw=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:ow,useValue:!0},{provide:sw,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[lw]}),t})(),dw=(()=>{class t{constructor(t,e){this.angularFirestore=t,this.angularFireDatabase=e,this.dbPath="/posts",this.postsRef=e.list(this.dbPath)}getPostList(){return this.angularFirestore.collection("posts").snapshotChanges()}getPostById(t){return this.angularFirestore.collectionGroup("posts",e=>e.where("id","==",t)).snapshotChanges()}createPost(t){this.postsRef.push(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(lw),r.Qb(ys))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fw=(()=>{class t{constructor(t,e,n){this.postService=t,this.angularFirestore=e,this.db=n,this.postForm=new fe({}),this.postForm=new fe({title:new de(""),date:new de(""),content:new de(""),imageID:new de(""),priority:new de("")})}ngOnInit(){}onSubmit(){var t=new ks(this.postForm.value.title,this.postForm.value.date,this.postForm.value.content,this.postForm.value.imageID,this.postForm.value.priority);this.postService.createPost(t),this.postForm.reset()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(dw),r.Kb(lw),r.Kb(ys))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-add-post"]],decls:26,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"field","mb-1"],[1,"label"],["type","text","formControlName","title","required","",1,"form-control"],[1,"field","mb-2"],["type","date","formControlName","date",1,"form-control"],[1,"field","mb-3"],["rows","4","cols","40","id","content","type","text","formControlName","content","required","","placeholder","Enter text here",1,"form-control"],[1,"field","mb-4"],["type","text","formControlName","imageID",1,"form-control"],[1,"field","mb-5"],["type","number","formControlName","priority","placeholder","Lower number = higher position",1,"form-control"],[1,"field","mb-6"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,e){1&t&&(r.Nb(0,"h2"),r.gc(1,"Create Post"),r.Mb(),r.Nb(2,"form",0),r.Tb("ngSubmit",function(){return e.onSubmit()}),r.Nb(3,"div",1),r.Nb(4,"label",2),r.gc(5,"Title"),r.Mb(),r.Lb(6,"input",3),r.Mb(),r.Nb(7,"div",4),r.Nb(8,"label",2),r.gc(9,"Date"),r.Mb(),r.Lb(10,"input",5),r.Mb(),r.Nb(11,"div",6),r.Nb(12,"label",2),r.gc(13,"Content"),r.Mb(),r.Lb(14,"textarea",7),r.Mb(),r.Nb(15,"div",8),r.Nb(16,"label",2),r.gc(17,"Image ID"),r.Mb(),r.Lb(18,"input",9),r.Mb(),r.Nb(19,"div",10),r.Nb(20,"label",2),r.gc(21,"Priority"),r.Mb(),r.Lb(22,"input",11),r.Mb(),r.Nb(23,"div",12),r.Nb(24,"button",13),r.gc(25,"Create"),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(2),r.Yb("formGroup",e.postForm),r.Ab(22),r.Yb("disabled",!e.postForm.valid))},directives:[ge,Kt,we,At,Wt,Oe,Se,me],styles:[".field[_ngcontent-%COMP%]{padding:5px}.label[_ngcontent-%COMP%]{margin-right:8px}*[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}body[_ngcontent-%COMP%]{margin-left:25px}"]}),t})();function pw(t,e){if(1&t&&r.Lb(0,"img",8),2&t){const t=r.Vb().$implicit;r.Zb("src","http://drive.google.com/uc?export=view&id=",t.imageID,"",r.dc)}}function gw(t,e){if(1&t&&(r.Nb(0,"div",5),r.Nb(1,"h2"),r.gc(2),r.Mb(),r.Nb(3,"h5"),r.gc(4),r.Mb(),r.fc(5,pw,1,1,"img",6),r.Nb(6,"div",7),r.gc(7),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Ab(2),r.hc(t.title),r.Ab(2),r.hc(t.date),r.Ab(1),r.Yb("ngIf",""!=t.imageID),r.Ab(2),r.hc(t.content)}}const yw=function(){return["/home"]};let mw=(()=>{class t{constructor(t){this.db=t,this.Posts=new _t.a,this.id=""}ngOnInit(){this.id=window.location.pathname.replace("/post/",""),this.Posts=this.db.list("/posts",t=>t.orderByChild("id").equalTo(this.id)).valueChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ys))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-post-detail"]],decls:7,vars:5,consts:[[1,"row"],[1,"leftcolumn"],["class","card center","id","post",4,"ngFor","ngForOf"],[1,"row2"],[3,"routerLink"],["id","post",1,"card","center"],["class","postImage","alt","Photo",3,"src",4,"ngIf"],[1,"content"],["alt","Photo",1,"postImage",3,"src"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.fc(2,gw,8,4,"div",2),r.Wb(3,"async"),r.Mb(),r.Mb(),r.Nb(4,"div",3),r.Nb(5,"button",4),r.gc(6,"Back to home"),r.Mb(),r.Mb()),2&t&&(r.Ab(2),r.Yb("ngForOf",r.Xb(3,2,e.Posts)),r.Ab(3),r.Yb("routerLink",r.ac(4,yw)))},directives:[A,io,k],pipes:[F],styles:["*[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.footer[_ngcontent-%COMP%]{position:absolute!important;bottom:0;width:100%}.row[_ngcontent-%COMP%]{margin-top:5%}.center[_ngcontent-%COMP%]{text-align:center}.postImage[_ngcontent-%COMP%]{width:100%;max-width:500px;height:auto}.content[_ngcontent-%COMP%]{white-space:pre-wrap;margin:2% 7%}button[_ngcontent-%COMP%]{padding:14px 28px;font-size:16px;cursor:pointer;border:2px solid #e7e7e7}.row2[_ngcontent-%COMP%]{text-align:center;margin:4% 0}"]}),t})();const vw=function(){return["/home"]},bw=function(t){return["/post",t]};function _w(t,e){if(1&t&&(r.Nb(0,"div",4),r.Nb(1,"div"),r.Nb(2,"h3"),r.gc(3),r.Mb(),r.gc(4),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Yb("routerLink",r.bc(3,bw,t.id)),r.Ab(3),r.ic("",t.title," "),r.Ab(1),r.ic(" ",t.date,"")}}const ww=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:Cs},{path:"about-me",component:xo},{path:"contact",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-contact-page"]],decls:10,vars:2,consts:[["id","title"],[1,"row"],[1,"card"],["src","http://drive.google.com/uc?export=view&id=1kB-YERYrwK9ZZIKfEcEJDJTUvGr_wsgD","alt","Photo",1,"aboutImage"],[1,"content"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"h2",0),r.gc(1,"Contact Me"),r.Mb(),r.Nb(2,"div",1),r.Nb(3,"div",2),r.Lb(4,"img",3),r.Nb(5,"p",4),r.gc(6,'"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."'),r.Mb(),r.Mb(),r.Mb(),r.Nb(7,"div",1),r.Nb(8,"button",5),r.gc(9,"Back to home"),r.Mb(),r.Mb()),2&t&&(r.Ab(8),r.Yb("routerLink",r.ac(1,vw)))},directives:[io],styles:["*[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.aboutImage[_ngcontent-%COMP%]{max-width:500px;height:auto;width:100%}#title[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]{text-align:center}.content[_ngcontent-%COMP%]{margin:20px 7%}button[_ngcontent-%COMP%]{padding:14px 28px;font-size:16px;cursor:pointer;border:2px solid #e7e7e7}.row[_ngcontent-%COMP%]{text-align:center;margin:4% 0}"]}),t})()},{path:"archive",component:(()=>{class t{constructor(t){this.db=t,this.Posts=new _t.a,this.id=""}ngOnInit(){this.Posts=this.db.list("/posts",t=>t.orderByChild("priority")).valueChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ys))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-archive"]],decls:6,vars:3,consts:[[1,"row"],[1,"title"],[1,"leftcolumn"],["class","card","id","post",3,"routerLink",4,"ngFor","ngForOf"],["id","post",1,"card",3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"h2",1),r.gc(2,"Latest Posts"),r.Mb(),r.Nb(3,"div",2),r.fc(4,_w,5,5,"div",3),r.Wb(5,"async"),r.Mb(),r.Mb()),2&t&&(r.Ab(4),r.Yb("ngForOf",r.Xb(5,1,e.Posts)))},directives:[A,io],pipes:[F],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}body[_ngcontent-%COMP%]{font-family:Arial;padding:20px;background:#f1f1f1}.header[_ngcontent-%COMP%]{padding:15px;font-size:40px;text-align:left;background:#fff}.title[_ngcontent-%COMP%]{margin-left:5%;-webkit-text-decoration-line:underline;text-decoration-line:underline}h2[_ngcontent-%COMP%]{margin:3px}.leftcolumn[_ngcontent-%COMP%]{float:left;width:65%;padding:25px 25px 25px 50px;margin-left:2%}.card[_ngcontent-%COMP%]{background-color:#fff;padding:18px}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.row[_ngcontent-%COMP%]{padding-top:20px}.footer[_ngcontent-%COMP%]{padding:20px;text-align:center;background:#ddd;margin-top:20px}@media screen and (max-width:800px){.leftcolumn[_ngcontent-%COMP%], .rightcolumn[_ngcontent-%COMP%]{width:100%;padding:0}}#post[_ngcontent-%COMP%]:hover{cursor:pointer}.content[_ngcontent-%COMP%]{white-space:pre-wrap}']}),t})()},{path:"create-post",component:fw},{path:"post/:id",component:mw}];let Cw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[vo.forRoot(ww)],vo]}),t})();const Ow=function(){return["/archive"]},Ew=function(){return["/contact"]},Sw=function(){return["/about-me"]};let Tw=(()=>{class t{constructor(t){this.title="JordanWebsite"}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(lw))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:21,vars:6,consts:[[1,"nav"],[3,"routerLink"],["href","#home"],[1,"spacing"],[1,"footer","text-center","copyright"]],template:function(t,e){1&t&&(r.Nb(0,"ul",0),r.Nb(1,"li"),r.Nb(2,"h1"),r.gc(3,"Jordan Randolph"),r.Mb(),r.Mb(),r.Nb(4,"ul"),r.Nb(5,"li"),r.Nb(6,"a",1),r.gc(7,"Post Archive"),r.Mb(),r.Mb(),r.Nb(8,"li"),r.Nb(9,"a",1),r.gc(10,"Contact"),r.Mb(),r.Mb(),r.Nb(11,"li"),r.Nb(12,"a",1),r.gc(13,"About"),r.Mb(),r.Mb(),r.Nb(14,"li"),r.Nb(15,"a",2),r.gc(16,"Home"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(17,"div",3),r.Lb(18,"router-outlet"),r.Mb(),r.Nb(19,"h5",4),r.gc(20," \xa9 Copyrights reserved by Jordan Randolph"),r.Mb()),2&t&&(r.Ab(6),r.Yb("routerLink",r.ac(3,Ow)),r.Ab(3),r.Yb("routerLink",r.ac(4,Ew)),r.Ab(3),r.Yb("routerLink",r.ac(5,Sw)))},directives:[oo,ao],styles:["*[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.navbar-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;font-family:Arial,Helvetica,sans-serif;font-weight:700;font-size:22px}.nav[_ngcontent-%COMP%]{background-color:#e2e2e2}footer[_ngcontent-%COMP%]{justify-content:center;margin:5rem auto;text-align:center}.footer[_ngcontent-%COMP%]{bottom:0;width:100%;position:fixed}.spacing[_ngcontent-%COMP%]{margin-bottom:72px}@media screen and (max-width:365px){.spacing[_ngcontent-%COMP%]{margin-bottom:92px}}.github[_ngcontent-%COMP%]{width:30%;background:#000!important;color:#fff!important;justify-content:center;transition:all .2s ease-in-out;font-weight:600}.button[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:10px;border:0;text-transform:uppercase;background:rgba(0,123,255,.0627451);color:rgba(0,123,255,.6);cursor:pointer;border-radius:5px;transition:background .2s ease-in-out;margin:15px auto .5rem;outline:none;font-size:13px;text-decoration:none}.button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:.5rem;width:20px;stroke-width:2px}.button[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{align-self:center}a.button.btn-light.medium[_ngcontent-%COMP%]{background:rgba(87,100,112,.083);width:30%;color:#000!important;justify-content:center;font-weight:600;padding:13px}a.button.btn-light.medium[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.github[_ngcontent-%COMP%]:hover{background:#343a40!important}.github[_ngcontent-%COMP%]:hover, a.button.btn-light.medium[_ngcontent-%COMP%]:hover{transform:translateY(-3px);transition:all .2s ease-in-out}a.button.btn-light.medium[_ngcontent-%COMP%]:hover{background:rgba(108,117,125,.5)!important}.footer-icons[_ngcontent-%COMP%]{width:100%;text-align:center}.footer-icons[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{line-height:1.4;padding-left:0;margin:30px auto 2px;float:none}.footer-icons[_ngcontent-%COMP%]   li.nav-item.inline-block[_ngcontent-%COMP%]{display:inline;text-align:center;list-style-type:none;padding:20px;float:none}.copyright[_ngcontent-%COMP%]{box-shadow:0 10px 35px rgba(0,0,0,.3);background:#e2e2e2;padding-top:25px;padding-bottom:25px;margin-bottom:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}img.medium-icon[_ngcontent-%COMP%]{width:24px;margin-top:-9px}@media (max-width:551px){.collapse.navbar-collapse.sticky[_ngcontent-%COMP%]{position:fixed;top:0;z-index:99999;width:100%;display:block;background:#f8f8f8;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}.button[_ngcontent-%COMP%], .github[_ngcontent-%COMP%], a.button.btn-light.medium[_ngcontent-%COMP%]{width:100%;font-size:12px}footer.fadeInUp.col-md-12[_ngcontent-%COMP%]{padding:0}.header-main[_ngcontent-%COMP%]   .footer-icons[_ngcontent-%COMP%]{width:auto;text-align:right}.header-main[_ngcontent-%COMP%]   .footer-icons[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{float:right;margin:15px 0 0}.header-main[_ngcontent-%COMP%]   .footer-icons[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px}.header-main[_ngcontent-%COMP%]   .footer-icons[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{font-size:21px!important}.header-main[_ngcontent-%COMP%]   .footer-icons[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-top:-2px}.sticky-header[_ngcontent-%COMP%]{top:0}}@media screen and (min-width:992px){.footer-icons.hidden-xs.hidden-sm[_ngcontent-%COMP%]{position:fixed;left:0;background:#fff;z-index:55;border-radius:4px;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);top:25%;width:auto;text-align:left}.footer-icons.hidden-xs.hidden-sm[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.footer-icons.hidden-xs.hidden-sm[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:30px}.navbar-header[_ngcontent-%COMP%]   .footer-icons[_ngcontent-%COMP%]{display:none}.main-header[_ngcontent-%COMP%] > .container[_ngcontent-%COMP%]{position:fixed;top:0;background-color:#f8f8f8;border-color:#e7e7e7;width:100%;z-index:55;padding-left:55px;padding-right:55px;box-shadow:0 0 0 rgba(0,0,0,.28),0 2px 6px rgba(0,0,0,.23)}.footer-icons[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{opacity:.8;transform:translateY(-3px);transition:all .2s ease-in-out}}.middle[_ngcontent-%COMP%]{min-height:450px}ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden}li[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{float:left;padding-left:5%}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:30px}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:right;display:block;color:#666;text-align:center;padding:14px 16px;text-decoration:none}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:not(.active){background-color:#ddd}li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#fff;background-color:#a9a9a9}"]}),t})();const Iw={apiKey:"AIzaSyAcvOKRs8Y7RkmkFTXkKZwTFEvnLNao3q0",authDomain:"jordanwebsite-6f6f3.firebaseapp.com",databaseURL:"https://jordanwebsite-6f6f3-default-rtdb.firebaseio.com",projectId:"jordanwebsite-6f6f3",storageBucket:"jordanwebsite-6f6f3.appspot.com",messagingSenderId:"245103359785",appId:"1:245103359785:web:d0e6a1374cf88f5a2ba938",measurementId:"G-5BVEQ6TJ0M"};let xw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t,bootstrap:[Tw]}),t.\u0275inj=r.Hb({providers:[],imports:[[vt,Cw,Vo.a.initializeApp(Iw),ms,hw,xe,Ie]]}),t})();Object(r.T)(),yt().bootstrapModule(xw).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);